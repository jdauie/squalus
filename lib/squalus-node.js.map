{"version":3,"sources":["webpack:///squalus-node.js","webpack:///webpack/bootstrap 87dba465514bd2c53da3","webpack:///./src/SqualusNode.js","webpack:///./src/Squalus.js","webpack:///./src/Tag.js","webpack:///./src/Endpoint.js","webpack:///./src/Result.js","webpack:///./src/Type/BranchType.js","webpack:///./src/Type/ArrayType.js","webpack:///./src/Type/AttributeType.js","webpack:///./src/Type/ObjectType.js","webpack:///./src/Type/ScalarType.js","webpack:///./src/Type/NullableType.js","webpack:///./src/Type/MapType.js","webpack:///./src/Type/Scalar/BoolScalarType.js","webpack:///./src/Type/Scalar/FloatScalarType.js","webpack:///./src/Type/Scalar/IntScalarType.js","webpack:///./src/Type/Scalar/NullScalarType.js","webpack:///./src/Automation/TestCollection.js","webpack:///external \"colors\"","webpack:///external \"http\"","webpack:///./src/Automation/TestGroup.js","webpack:///./src/Automation/Test.js","webpack:///external \"request-promise\"","webpack:///./src/Automation/TestError.js","webpack:///external \"path\"","webpack:///external \"fs\"","webpack:///external \"js-yaml\""],"names":["module","exports","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","getFiles","source","regex","files","findChildren","dir","_fs2","readdirSync","forEach","f","child","_path2","join","statSync","isDirectory","test","push","collection","name","options","_TestCollection2","group","_TestGroup2","_Test2","defineProperty","squalus","undefined","_createClass","defineProperties","target","props","i","length","descriptor","key","protoProps","staticProps","_Squalus2","_Squalus3","_TestCollection","_TestGroup","_Test","_path","_fs","_jsYaml","_jsYaml2","SqualusNode","_Squalus","this","getPrototypeOf","apply","arguments","typePath","collectionInstance","initialContextPath","types","assign","map","file","safeLoad","readFileSync","encoding","buildTypes","context","JSON","parse","execute","toposort","elements","getName","getRequires","edges","Map","s","sources","elem","set","requires","dependency","has","Error","get","parents","sorted","nSource","pop","n","mSource","find","d","size","findPreviousTokenGroupStart","tokens","depth","j","_j","parseTokensFromType","type","dependenciesOnly","split","t","trim","filter","previous","splice","dependencies","_i","includes","buildKnownDependencies","_ScalarType2","getScalarTypes","data","parseChild","Set","keys","add","scopify","iter","scope","result","Array","from","item","indexOf","parseRoot","root","parsed","createAttrFromName","_AttributeType2","replace","clone","endsWith","stripOuterParens","array","splitArray","chunks","chunk","stack","token","buildType","def","branches","_ret","branchMap","branch","v","_BranchType2","_typeof","_MapType2","_NullableType2","slice","_ArrayType2","_ret2","transformStart","transformName","transformArgs","transforms","attributes","attr","_ObjectType2","scopedName","registeredTypes","attributeNames","inheritanceAttr","parent","_ret3","values","every","branchType","inheritedTypes","builder","k","_ret4","parentAttr","Symbol","iterator","_Tag","_Tag2","_Endpoint","_Endpoint2","_BranchType","_ArrayType","_AttributeType","_ObjectType","_ScalarType","_NullableType","_MapType","_BoolScalarType","_BoolScalarType2","_FloatScalarType","_FloatScalarType2","_IntScalarType","_IntScalarType2","_NullScalarType","_NullScalarType2","register","Squalus","concat","substring","tests","ul","appendChild","class","params","url","method","build","events","change","select.test-option","onChange","click",".test-row-add","onClickAdd",".test-row-remove","onClickRemove",".test-attr-toggle","onClickToggle",".test-edit","onEdit",".test-submit","onSubmit","keypress","input[type=text],input[type=checkbox],select","onKeyPress","addEventListener","e","closest","selector","matches","func","initializeSelectionStates","isObject","isArray","appendNode","element","content","nodeType","div","document","createElement","innerHTML","firstChild","tagName","_len","args","_key","children","startsWith","dataset","substr","setAttribute","closestAncestorByClassName","className","parentNode","classList","contains","convertValueToParam","val","query","encodeURI","_Result","_Result2","Endpoint","_url","_method","_params","_type","_node","Id","querySelector","_squalusType","populate","clear","querySelectorAll","param","keyPlaceholder","URL","window","location","href","searchParams","append","_this","toLowerCase","_squalusDef","names","match","data-name","getPopulatedUrl","stringify","headers","Content-Type","body","fetch","then","res","error","_this2","status","textContent","lock","ok","json","updateSingleParam","unlock","message","event","which","preventDefault","submit","edit","node","Result","relativeUrl","response","_relativeUrl","_response","Response","console","log","BranchType","_types","firstElementChild","selectedIndex","findIndex","validate","select","Event","bubbles","dispatchEvent","path","returnOnly","some","nextElementSibling","toggle","ArrayType","_rows","_body","row","lastElementChild","remove","AttributeType","required","_name","_required","_included","update","ObjectType","_attributes","included","implementations","ScalarType","_values","_parse","disabled","placeholder","_build","silent","_validate","implementation","NullableType","MapType","_this3","keyField","_ScalarType3","BoolScalarType","checked","FloatScalarType","parseFloat","IntScalarType","_validator","reduce","current","parts","start","parseInt","end","ranges","sort","a","b","fixed","rangeSize","r","NullScalarType","createTextNode","_colors","_http","_http2","TestCollection","_groups","_cancel","_pool","Agent","maxSockets","_maxGroupNameLength","initial","Promise","resolve","testCount","_tests","green","all","g","_test","statusCode","contentType","info","reason","_reason","_group","request","uri","toUpperCase","maxInfoNameLength","Math","max","red","yellow","repeat","require","TestGroup","_requires","_parallel","_session","_promise","groups","when","reject","reverse","onResolve","padRight","str","width","char","getParamNames","fnStr","toString","STRIP_COMMENTS","ARGUMENT_NAMES","callFuncWithParamInjection","sourceParams","maps","_requestPromise","_requestPromise2","_TestError","_TestError2","Test","_contentType","_responseContentType","_status","_save","_expect","populateVariables","absUrl","responseType","getType","bodyJson","expect","passed","save","Cookie","resolveWithFullResponse","simple","form","formData","getMaxGroupNameLength","gray","magenta","cyan","FormData","TestError","_collection"],"mappings":"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","file":"squalus-node.js","sourcesContent":["module.exports =\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"lib/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.test = exports.group = exports.collection = exports.squalus = undefined;\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _Squalus2 = __webpack_require__(1);\n\t\n\tvar _Squalus3 = _interopRequireDefault(_Squalus2);\n\t\n\tvar _TestCollection = __webpack_require__(16);\n\t\n\tvar _TestCollection2 = _interopRequireDefault(_TestCollection);\n\t\n\tvar _TestGroup = __webpack_require__(19);\n\t\n\tvar _TestGroup2 = _interopRequireDefault(_TestGroup);\n\t\n\tvar _Test = __webpack_require__(20);\n\t\n\tvar _Test2 = _interopRequireDefault(_Test);\n\t\n\tvar _path = __webpack_require__(23);\n\t\n\tvar _path2 = _interopRequireDefault(_path);\n\t\n\tvar _fs = __webpack_require__(24);\n\t\n\tvar _fs2 = _interopRequireDefault(_fs);\n\t\n\tvar _jsYaml = __webpack_require__(25);\n\t\n\tvar _jsYaml2 = _interopRequireDefault(_jsYaml);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tfunction getFiles(source, regex) {\n\t  var files = [];\n\t\n\t  var findChildren = function findChildren(dir) {\n\t    return _fs2.default.readdirSync(dir).forEach(function (f) {\n\t      var child = _path2.default.join(dir, f);\n\t      if (_fs2.default.statSync(child).isDirectory()) {\n\t        findChildren(child);\n\t      } else if (regex.test(f)) {\n\t        files.push(child);\n\t      }\n\t    });\n\t  };\n\t\n\t  if (_fs2.default.statSync(source).isDirectory()) {\n\t    findChildren(source);\n\t  } else {\n\t    files.push(source);\n\t  }\n\t\n\t  return files;\n\t}\n\t\n\tvar SqualusNode = function (_Squalus) {\n\t  _inherits(SqualusNode, _Squalus);\n\t\n\t  function SqualusNode() {\n\t    _classCallCheck(this, SqualusNode);\n\t\n\t    return _possibleConstructorReturn(this, Object.getPrototypeOf(SqualusNode).apply(this, arguments));\n\t  }\n\t\n\t  _createClass(SqualusNode, null, [{\n\t    key: 'execute',\n\t    value: function execute(typePath, collectionInstance, initialContextPath) {\n\t      var files = getFiles(typePath, /\\.yaml$/);\n\t\n\t      if (files.length) {\n\t        var types = Object.assign.apply(null, files.map(function (file) {\n\t          return _jsYaml2.default.safeLoad(_fs2.default.readFileSync(file, { encoding: 'utf8' }));\n\t        }));\n\t\n\t        _Squalus3.default.buildTypes(types);\n\t      }\n\t\n\t      var context = undefined;\n\t      if (initialContextPath) {\n\t        context = JSON.parse(_fs2.default.readFileSync(initialContextPath, { encoding: 'utf8' }));\n\t      }\n\t\n\t      return collectionInstance.execute(context);\n\t    }\n\t  }]);\n\t\n\t  return SqualusNode;\n\t}(_Squalus3.default);\n\t\n\tfunction collection(name, options) {\n\t  return new _TestCollection2.default(name, options);\n\t}\n\t\n\tfunction group(name) {\n\t  return new _TestGroup2.default(name);\n\t}\n\t\n\tfunction test(name) {\n\t  return new _Test2.default(name);\n\t}\n\t\n\texports.squalus = SqualusNode;\n\texports.collection = collection;\n\texports.group = group;\n\texports.test = test;\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\t\n\tvar _Tag = __webpack_require__(2);\n\t\n\tvar _Tag2 = _interopRequireDefault(_Tag);\n\t\n\tvar _Endpoint = __webpack_require__(3);\n\t\n\tvar _Endpoint2 = _interopRequireDefault(_Endpoint);\n\t\n\tvar _BranchType = __webpack_require__(5);\n\t\n\tvar _BranchType2 = _interopRequireDefault(_BranchType);\n\t\n\tvar _ArrayType = __webpack_require__(6);\n\t\n\tvar _ArrayType2 = _interopRequireDefault(_ArrayType);\n\t\n\tvar _AttributeType = __webpack_require__(7);\n\t\n\tvar _AttributeType2 = _interopRequireDefault(_AttributeType);\n\t\n\tvar _ObjectType = __webpack_require__(8);\n\t\n\tvar _ObjectType2 = _interopRequireDefault(_ObjectType);\n\t\n\tvar _ScalarType = __webpack_require__(9);\n\t\n\tvar _ScalarType2 = _interopRequireDefault(_ScalarType);\n\t\n\tvar _NullableType = __webpack_require__(10);\n\t\n\tvar _NullableType2 = _interopRequireDefault(_NullableType);\n\t\n\tvar _MapType = __webpack_require__(11);\n\t\n\tvar _MapType2 = _interopRequireDefault(_MapType);\n\t\n\tvar _BoolScalarType = __webpack_require__(12);\n\t\n\tvar _BoolScalarType2 = _interopRequireDefault(_BoolScalarType);\n\t\n\tvar _FloatScalarType = __webpack_require__(13);\n\t\n\tvar _FloatScalarType2 = _interopRequireDefault(_FloatScalarType);\n\t\n\tvar _IntScalarType = __webpack_require__(14);\n\t\n\tvar _IntScalarType2 = _interopRequireDefault(_IntScalarType);\n\t\n\tvar _NullScalarType = __webpack_require__(15);\n\t\n\tvar _NullScalarType2 = _interopRequireDefault(_NullScalarType);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\t_ScalarType2.default.register('null', _NullScalarType2.default);\n\t_ScalarType2.default.register(['int', 'uint'], _IntScalarType2.default);\n\t_ScalarType2.default.register('float', _FloatScalarType2.default);\n\t_ScalarType2.default.register('bool', _BoolScalarType2.default);\n\t\n\tvar registeredTypes = new Map();\n\t\n\tfunction toposort(elements, getName, getRequires) {\n\t  var edges = new Map();\n\t  var s = [];\n\t\n\t  var sources = new Map();\n\t  elements.forEach(function (elem) {\n\t    return sources.set(getName(elem), elem);\n\t  });\n\t\n\t  sources.forEach(function (source) {\n\t    var requires = getRequires(source);\n\t    if (requires && requires.length) {\n\t      requires.forEach(function (dependency) {\n\t        if (!sources.has(dependency)) {\n\t          throw new Error('Unknown dependency ' + dependency);\n\t        }\n\t        if (!edges.has(dependency)) {\n\t          edges.set(dependency, []);\n\t        }\n\t        edges.get(dependency).push(getName(source));\n\t      });\n\t    } else {\n\t      s.push(source);\n\t    }\n\t  });\n\t\n\t  var parents = void 0;\n\t  var sorted = new Map();\n\t  while (s.length > 0) {\n\t    var nSource = s.pop();\n\t    var n = getName(nSource);\n\t    sorted.set(n, nSource);\n\t    if (edges.has(n)) {\n\t      parents = edges.get(n);\n\t      while (parents.length > 0) {\n\t        var m = parents.pop();\n\t        var mSource = sources.get(m);\n\t        var requires = getRequires(mSource);\n\t        if (!requires || !requires.find(function (d) {\n\t          return !sorted.has(d);\n\t        })) {\n\t          s.push(mSource);\n\t        }\n\t      }\n\t    }\n\t  }\n\t\n\t  edges.forEach(function (value) {\n\t    if (value.size > 0) {\n\t      throw new Error('Graph cycle; unable to sort');\n\t    }\n\t  });\n\t\n\t  return sorted;\n\t}\n\t\n\tfunction findPreviousTokenGroupStart(tokens, i) {\n\t  if (tokens[i] === ')') {\n\t    var depth = 0;\n\t    for (var j = i - 1; j >= 0; j--) {\n\t      if (tokens[j] === ')') {\n\t        ++depth;\n\t      } else if (tokens[j] === '(') {\n\t        if (depth === 0) {\n\t          return findPreviousTokenGroupStart(tokens, j - 1);\n\t        }\n\t        --depth;\n\t      }\n\t    }\n\t  } else if (tokens[i] === '}') {\n\t    for (var _j = i - 1; _j >= 0; _j--) {\n\t      if (tokens[_j] === '{') {\n\t        return findPreviousTokenGroupStart(tokens, _j - 1);\n\t      }\n\t    }\n\t  } else if (tokens[i] === '[]') {\n\t    return findPreviousTokenGroupStart(tokens, i - 1);\n\t  }\n\t\n\t  return i >= 0 ? i : 0;\n\t}\n\t\n\tfunction parseTokensFromType(type, dependenciesOnly) {\n\t  /*\n\t   * e.g.\n\t   *   type\n\t   *   type:map(Name,Value)\n\t   *   type1|type2|type3\n\t   *   type1 => type2\n\t   *   int{1,2,7-9}?\n\t   *   string?[]?\n\t   *   (string => int{2,4-9}|bool|string?)?[]?\n\t   *   type1,type2 # this only applies to inheritance\n\t   * todo:\n\t   *   content-type(image/png) && signature(89 50 4E 47 0D 0A 1A 0A)\n\t   */\n\t  var tokens = type.split(/([|{}()?:,]|&&|\\[]|=>)/).map(function (t) {\n\t    return t.trim();\n\t  }).filter(function (t) {\n\t    return t !== '';\n\t  });\n\t\n\t  // expand shortcuts\n\t  for (var i = 0; i < tokens.length; i++) {\n\t    if (tokens[i] === '?') {\n\t      var previous = findPreviousTokenGroupStart(tokens, i - 1);\n\t      tokens.splice(previous, 0, '(');\n\t      tokens.splice(i + 1, 1, '|', 'null', ')');\n\t      --i;\n\t    }\n\t  }\n\t\n\t  if (!dependenciesOnly) {\n\t    return tokens;\n\t  }\n\t\n\t  /*\n\t   * remove\n\t   *   |\n\t   *   []\n\t   *   {...}\n\t   *   :func(...)\n\t   */\n\t  var dependencies = [];\n\t  for (var _i = 0; _i < tokens.length; _i++) {\n\t    if (tokens[_i] === '{') {\n\t      while (tokens[_i] !== '}') {\n\t        ++_i;\n\t      }\n\t      continue;\n\t    } else if (tokens[_i] === ':') {\n\t      while (tokens[_i] !== ')') {\n\t        ++_i;\n\t      }\n\t      continue;\n\t    } else if (['[]', '=>', '|', ',', '(', ')'].includes(tokens[_i])) {\n\t      continue;\n\t    }\n\t    dependencies.push(tokens[_i]);\n\t  }\n\t\n\t  return dependencies;\n\t}\n\t\n\tfunction buildKnownDependencies() {\n\t  return _ScalarType2.default.getScalarTypes().map(function (t) {\n\t    return {\n\t      name: t,\n\t      data: t\n\t    };\n\t  });\n\t}\n\t\n\tfunction parseChild(types) {\n\t  var dependencies = new Set();\n\t\n\t  Object.keys(types).forEach(function (key) {\n\t    var type = types[key];\n\t\n\t    if (typeof type === 'string') {\n\t      parseTokensFromType(type, true).forEach(function (t) {\n\t        return dependencies.add(t);\n\t      });\n\t    } else {\n\t      parseChild(type).forEach(function (t) {\n\t        return dependencies.add(t);\n\t      });\n\t    }\n\t  });\n\t\n\t  return dependencies;\n\t}\n\t\n\tfunction scopify(iter, scope) {\n\t  var source = iter;\n\t  if (typeof iter === 'string') {\n\t    source = [iter];\n\t  }\n\t  var result = Array.from(source, function (item) {\n\t    return item.indexOf('{') === -1 && item.indexOf('[') === -1 && item.indexOf('|') === -1 && item.indexOf('.') === -1 && !_ScalarType2.default.getScalarTypes().includes(item) ? scope + '.' + item : item;\n\t  });\n\t\n\t  return typeof iter === 'string' ? result[0] : result;\n\t}\n\t\n\tfunction parseRoot(root) {\n\t  var parsed = [];\n\t\n\t  Object.keys(root).forEach(function (scope) {\n\t    Object.keys(root[scope]).forEach(function (name) {\n\t      var type = root[scope][name];\n\t\n\t      var requires = new Set();\n\t\n\t      if (typeof type === 'string') {\n\t        parseTokensFromType(type, true).forEach(function (t) {\n\t          return requires.add(t);\n\t        });\n\t      } else {\n\t        parseChild(type).forEach(function (t) {\n\t          return requires.add(t);\n\t        });\n\t      }\n\t\n\t      parsed.push({\n\t        name: scopify(name, scope),\n\t        requires: scopify(requires, scope),\n\t        data: type\n\t      });\n\t    });\n\t  });\n\t\n\t  return parsed;\n\t}\n\t\n\tfunction createAttrFromName(name, type) {\n\t  return new _AttributeType2.default(name.replace(/\\?$/, ''), type.clone(), !name.endsWith('?'));\n\t}\n\t\n\tfunction stripOuterParens(array) {\n\t  if (array[0] === '(' && array[array.length - 1] === ')') {\n\t    array.splice(array.length - 1);\n\t    array.splice(0, 1);\n\t  }\n\t}\n\t\n\tfunction splitArray(array, split) {\n\t  stripOuterParens(array);\n\t\n\t  var chunks = [];\n\t  var chunk = [];\n\t  var stack = [];\n\t  array.forEach(function (token) {\n\t    if (token === '(') {\n\t      stack.push(true);\n\t      chunk.push(token);\n\t    } else if (token === ')') {\n\t      stack.pop();\n\t      chunk.push(token);\n\t    } else if (!stack.length && token === split) {\n\t      if (chunk.length) {\n\t        chunks.push(chunk);\n\t      }\n\t      chunk = [];\n\t    } else {\n\t      chunk.push(token);\n\t    }\n\t  });\n\t  if (chunk.length) {\n\t    chunks.push(chunk);\n\t  }\n\t\n\t  chunks.forEach(function (c) {\n\t    return stripOuterParens(c);\n\t  });\n\t\n\t  return chunks;\n\t}\n\t\n\tfunction buildType(def, scope) {\n\t  // shortcuts\n\t  if (typeof def === 'boolean') {\n\t    def = def ? 'bool{true}' : 'bool{false}'; // eslint-disable-line no-param-reassign\n\t  }\n\t\n\t  // references\n\t  if (typeof def === 'string') {\n\t    var tokens = parseTokensFromType(def);\n\t\n\t    var branches = splitArray(tokens, '|');\n\t    if (branches.length > 1) {\n\t      var _ret = function () {\n\t        var branchMap = new Map();\n\t        branches.forEach(function (branch) {\n\t          branchMap.set(branch, buildType(scopify(branch.join(''), scope)));\n\t        });\n\t        return {\n\t          v: new _BranchType2.default(branchMap)\n\t        };\n\t      }();\n\t\n\t      if ((typeof _ret === 'undefined' ? 'undefined' : _typeof(_ret)) === \"object\") return _ret.v;\n\t    }\n\t\n\t    var map = splitArray(tokens, '=>');\n\t    if (map.length > 1) {\n\t      return new _MapType2.default(buildType(map[0].join(''), scope), buildType(map[1].join(''), scope));\n\t    }\n\t\n\t    if (tokens[tokens.length - 1] === '?') {\n\t      return new _NullableType2.default(buildType(tokens.slice(0, tokens.length - 1).join(''), scope));\n\t    }\n\t\n\t    if (tokens[tokens.length - 1] === '[]') {\n\t      return new _ArrayType2.default(buildType(tokens.slice(0, tokens.length - 1).join(''), scope));\n\t    }\n\t\n\t    if (tokens[tokens.length - 1] === '}') {\n\t      return _ScalarType2.default.create(tokens[tokens.indexOf('{') - 1], tokens.slice(tokens.indexOf('{') + 1, tokens.length - 1).filter(function (t) {\n\t        return t !== ',';\n\t      }));\n\t    }\n\t\n\t    if (tokens[tokens.length - 1] === ')') {\n\t      var _ret2 = function () {\n\t        var transformStart = tokens.indexOf(':');\n\t        var transformName = tokens[transformStart + 1];\n\t        var transformArgs = tokens.slice(transformStart + 3, tokens.length - 1).filter(function (t) {\n\t          return t !== ',';\n\t        });\n\t\n\t        var transforms = {\n\t          map: function map(type) {\n\t            var branchMap = new Map();\n\t            type.attributes().forEach(function (attr) {\n\t              return branchMap.set(attr.name(), new _ObjectType2.default([new _AttributeType2.default(transformArgs[0], _ScalarType2.default.create('string', [attr.name()]), true), new _AttributeType2.default(transformArgs[1], attr.type().clone(), true)]));\n\t            });\n\t            return new _BranchType2.default(branchMap);\n\t          }\n\t        };\n\t        if (!transforms[transformName]) {\n\t          throw new Error('unsupported transform');\n\t        }\n\t        return {\n\t          v: transforms[transformName](buildType(tokens.slice(0, transformStart).join(''), scope))\n\t        };\n\t      }();\n\t\n\t      if ((typeof _ret2 === 'undefined' ? 'undefined' : _typeof(_ret2)) === \"object\") return _ret2.v;\n\t    }\n\t\n\t    var scopedName = scopify(tokens.join(''), scope);\n\t    if (registeredTypes.has(scopedName)) {\n\t      return registeredTypes.get(scopedName).clone();\n\t    }\n\t    return _ScalarType2.default.create(scopedName);\n\t  }\n\t\n\t  // check for inheritance\n\t  var attributeNames = Object.keys(def).filter(function (key) {\n\t    return key !== '^';\n\t  });\n\t  var inheritanceAttr = def['^'];\n\t  if (inheritanceAttr) {\n\t    if (typeof inheritanceAttr !== 'string') {\n\t      throw new Error('inheritance attribute must be a string');\n\t    }\n\t\n\t    var parents = parseTokensFromType(inheritanceAttr).filter(function (t) {\n\t      return t !== ',';\n\t    }).map(function (parent) {\n\t      return registeredTypes.get(scopify(parent, scope));\n\t    });\n\t\n\t    if (parents.length === 1 && parents[0] instanceof _BranchType2.default) {\n\t      var _ret3 = function () {\n\t        var parent = parents[0];\n\t        if (!Array.from(parent.types.values()).every(function (branchType) {\n\t          return branchType instanceof Object;\n\t        })) {\n\t          throw new Error('inheritance from branch with non-object');\n\t        }\n\t        // create inherited version of each object and re-aggregate\n\t        var inheritedTypes = new Map();\n\t        parent.types.forEach(function (branchType, key) {\n\t          var builder = function builder(t, k) {\n\t            // add attributes to each branch\n\t            var attributes = new Map();\n\t            t.attributes().forEach(function (attr) {\n\t              attributes.set(attr.name(), attr.clone());\n\t            });\n\t            attributeNames.forEach(function (attr) {\n\t              return attributes.set(attr.trim('?'), createAttrFromName(attr, buildType(def[attr], scope)));\n\t            });\n\t            inheritedTypes.set(k, new _ObjectType2.default(Array.from(attributes.values())));\n\t          };\n\t\n\t          if (branchType instanceof _BranchType2.default) {\n\t            branchType.types.forEach(function (t, k) {\n\t              return builder(t, key + '-' + k);\n\t            });\n\t          } else {\n\t            builder(branchType, key);\n\t          }\n\t        });\n\t        return {\n\t          v: new _BranchType2.default(inheritedTypes)\n\t        };\n\t      }();\n\t\n\t      if ((typeof _ret3 === 'undefined' ? 'undefined' : _typeof(_ret3)) === \"object\") return _ret3.v;\n\t    } else if (parents.every(function (parent) {\n\t      return parent instanceof _ObjectType2.default;\n\t    })) {\n\t      var _ret4 = function () {\n\t        // simple inheritance\n\t        var attributes = new Map();\n\t        parents.forEach(function (parent) {\n\t          parent.attributes().forEach(function (parentAttr) {\n\t            attributes.set(parentAttr, parentAttr.clone());\n\t          });\n\t        });\n\t        attributeNames.forEach(function (attr) {\n\t          return attributes.set(attr.trim('?'), createAttrFromName(attr, buildType(def[attr], scope)));\n\t        });\n\t        return {\n\t          v: new _ObjectType2.default(Array.from(attributes.values()))\n\t        };\n\t      }();\n\t\n\t      if ((typeof _ret4 === 'undefined' ? 'undefined' : _typeof(_ret4)) === \"object\") return _ret4.v;\n\t    }\n\t\n\t    throw new Error('invalid parent type');\n\t  }\n\t\n\t  // no inheritance\n\t  return new _ObjectType2.default(attributeNames.map(function (attr) {\n\t    return createAttrFromName(attr, buildType(def[attr], scope));\n\t  }));\n\t}\n\t\n\tvar Squalus = function () {\n\t  function Squalus() {\n\t    _classCallCheck(this, Squalus);\n\t  }\n\t\n\t  _createClass(Squalus, null, [{\n\t    key: 'getType',\n\t    value: function getType(name) {\n\t      return registeredTypes.get(name);\n\t    }\n\t  }, {\n\t    key: 'buildTypes',\n\t    value: function buildTypes(root) {\n\t      // check names and dependencies\n\t      var dependencies = buildKnownDependencies().concat(parseRoot(root));\n\t      var sorted = toposort(dependencies, function (d) {\n\t        return d.name;\n\t      }, function (d) {\n\t        return d.requires;\n\t      });\n\t\n\t      sorted.forEach(function (type, name) {\n\t        var scope = name.indexOf('.') ? name.substring(0, name.indexOf('.')) : null;\n\t        registeredTypes.set(name, buildType(type.data, scope));\n\t      });\n\t    }\n\t  }, {\n\t    key: 'buildTests',\n\t    value: function buildTests(tests, root) {\n\t      var ul = root.appendChild((0, _Tag2.default)('ul', { class: 'api-tests' }));\n\t\n\t      tests.forEach(function (test) {\n\t        var params = new Map();\n\t        if (test.params) {\n\t          Object.keys(test.params).forEach(function (key) {\n\t            params.set(key, buildType(test.params[key]));\n\t          });\n\t        }\n\t        var def = new _Endpoint2.default(test.url, test.method, params, test.data ? buildType(test.data) : null);\n\t        ul.appendChild((0, _Tag2.default)('li', def.build()));\n\t      });\n\t\n\t      var events = {\n\t        change: {\n\t          'select.test-option': _BranchType2.default.onChange\n\t        },\n\t        click: {\n\t          '.test-row-add': _ArrayType2.default.onClickAdd,\n\t          '.test-row-remove': _ArrayType2.default.onClickRemove,\n\t          '.test-attr-toggle': _AttributeType2.default.onClickToggle,\n\t          '.test-edit': _Endpoint2.default.onEdit,\n\t          '.test-submit': _Endpoint2.default.onSubmit\n\t        },\n\t        keypress: {\n\t          'input[type=text],input[type=checkbox],select': _Endpoint2.default.onKeyPress\n\t        }\n\t      };\n\t\n\t      // handle events\n\t      Object.keys(events).forEach(function (type) {\n\t        root.addEventListener(type, function (e) {\n\t          if (e.target) {\n\t            (function () {\n\t              var def = _Endpoint2.default.closest(e.target);\n\t              if (def) {\n\t                Object.keys(events[type]).forEach(function (selector) {\n\t                  if (e.target.matches(selector)) {\n\t                    var func = events[type][selector];\n\t                    func(e, def);\n\t                  }\n\t                });\n\t              }\n\t            })();\n\t          }\n\t        });\n\t      });\n\t\n\t      _BranchType2.default.initializeSelectionStates(root);\n\t    }\n\t  }]);\n\t\n\t  return Squalus;\n\t}();\n\t\n\texports.default = Squalus;\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (tagName) {\n\t  for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n\t    args[_key - 1] = arguments[_key];\n\t  }\n\t\n\t  var attributes = args.length && isObject(args[0]) && !args[0].nodeType ? args[0] : {};\n\t  var children = args.slice(args[0] === attributes ? 1 : 0);\n\t\n\t  var elem = document.createElement(tagName);\n\t\n\t  Object.keys(attributes).forEach(function (name) {\n\t    if (name.startsWith('data-')) {\n\t      elem.dataset[name.substr(5)] = attributes[name];\n\t    } else if (name.startsWith('_')) {\n\t      elem[name] = attributes[name];\n\t    } else {\n\t      elem.setAttribute(name, attributes[name]);\n\t    }\n\t  });\n\t\n\t  children.forEach(function (child) {\n\t    if (Array.isArray(child)) {\n\t      child.forEach(function (c) {\n\t        appendNode(elem, c);\n\t      });\n\t    } else {\n\t      appendNode(elem, child);\n\t    }\n\t  });\n\t\n\t  return elem;\n\t};\n\t\n\tfunction isObject(obj) {\n\t  return obj === Object(obj) && !Array.isArray(obj);\n\t}\n\t\n\tfunction appendNode(element, content) {\n\t  if (content && content.nodeType) {\n\t    element.appendChild(content);\n\t  } else {\n\t    var div = document.createElement('div');\n\t    div.innerHTML = content === undefined ? '' : content;\n\t\n\t    while (div.firstChild) {\n\t      element.appendChild(div.firstChild);\n\t    }\n\t  }\n\t}\n\t\n\t// (tagName, attributes?, children?, children?)\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\t\n\tvar _Tag = __webpack_require__(2);\n\t\n\tvar _Tag2 = _interopRequireDefault(_Tag);\n\t\n\tvar _Result = __webpack_require__(4);\n\t\n\tvar _Result2 = _interopRequireDefault(_Result);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction closestAncestorByClassName(elem, className) {\n\t  var e = elem.parentNode;\n\t  while (e) {\n\t    if (e.classList && e.classList.contains(className)) {\n\t      return e;\n\t    }\n\t    e = e.parentNode;\n\t  }\n\t  return null;\n\t}\n\t\n\tfunction convertValueToParam(val, key, query) {\n\t  if (Array.isArray(val)) {\n\t    val.forEach(function (item, i) {\n\t      return convertValueToParam(item, key + '[' + i + ']', query);\n\t    });\n\t  } else if ((typeof val === 'undefined' ? 'undefined' : _typeof(val)) === 'object') {\n\t    Object.keys(val).forEach(function (name) {\n\t      return convertValueToParam(val[name], key + '[' + name + ']', query);\n\t    });\n\t  } else if (typeof val === 'boolean') {\n\t    query.set(key, encodeURI(val ? 1 : 0));\n\t  } else {\n\t    query.set(key, encodeURI(val));\n\t  }\n\t}\n\t\n\tvar Endpoint = function () {\n\t  function Endpoint(url, method, params, type) {\n\t    _classCallCheck(this, Endpoint);\n\t\n\t    this._url = url;\n\t    this._method = method;\n\t    this._params = params && params.size ? params : null;\n\t    this._type = type;\n\t\n\t    this._node = null;\n\t  }\n\t\n\t  _createClass(Endpoint, [{\n\t    key: 'updateSingleParam',\n\t    value: function updateSingleParam(data) {\n\t      if (this._params) {\n\t        if (data.Id) {\n\t          this._node.querySelector('.test-param')._squalusType.populate(data.Id);\n\t        }\n\t      }\n\t    }\n\t  }, {\n\t    key: 'value',\n\t    value: function value() {\n\t      if (!this._type) {\n\t        return null;\n\t      }\n\t      return this._type.value();\n\t    }\n\t  }, {\n\t    key: 'populate',\n\t    value: function populate(data, types) {\n\t      this._type.populate(data, 'body', types);\n\t    }\n\t  }, {\n\t    key: 'clear',\n\t    value: function clear() {\n\t      this._type.clear();\n\t    }\n\t  }, {\n\t    key: 'lock',\n\t    value: function lock() {\n\t      // this causes problems with the \"edit\" populate\n\t      // this._body.find('*').prop('disabled', true);\n\t    }\n\t  }, {\n\t    key: 'unlock',\n\t    value: function unlock() {\n\t      // this._body.find('*').prop('disabled', false);\n\t    }\n\t  }, {\n\t    key: 'getPopulatedUrl',\n\t    value: function getPopulatedUrl() {\n\t      var query = new Map();\n\t      var url = this._url;\n\t      if (this._params) {\n\t        Array.from(this._node.querySelectorAll('.test-param')).forEach(function (param) {\n\t          var key = param.dataset.name;\n\t          var keyPlaceholder = '{' + key + '}';\n\t          var val = param._squalusType.value();\n\t          if (url.indexOf(keyPlaceholder) === -1) {\n\t            if (val !== null && val !== '') {\n\t              convertValueToParam(val, key, query);\n\t            }\n\t          } else {\n\t            url = url.replace(keyPlaceholder, encodeURI(val));\n\t          }\n\t        });\n\t      }\n\t\n\t      url = new URL(url, window.location.href);\n\t      query.forEach(function (value, key) {\n\t        return url.searchParams.append(key, value);\n\t      });\n\t\n\t      return url;\n\t    }\n\t  }, {\n\t    key: 'build',\n\t    value: function build() {\n\t      var _this = this;\n\t\n\t      this._node = (0, _Tag2.default)('div', { class: 'endpoint endpoint-method-' + this._method.toLowerCase(), _squalusDef: this }, (0, _Tag2.default)('div', { class: 'endpoint-header' }, (0, _Tag2.default)('span', { class: 'endpoint-method' }, this._method), (0, _Tag2.default)('span', { class: 'endpoint-url' }, this._url)));\n\t\n\t      var test = this._node.appendChild((0, _Tag2.default)('div', { class: 'endpoint-test' }));\n\t\n\t      if (this._params) {\n\t        (function () {\n\t          var names = _this._url.match(/{[^}\\s]+}/g).map(function (m) {\n\t            return m.substr(1, m.length - 2);\n\t          });\n\t\n\t          if (_this._params.size > names.length) {\n\t            names.prototype.push.apply(names, Array.from(_this._params.keys()).filter(function (p) {\n\t              return !names.includes(p);\n\t            }));\n\t          }\n\t\n\t          var params = test.appendChild((0, _Tag2.default)('div', { class: 'endpoint-test-params' }, (0, _Tag2.default)('div', { class: 'endpoint-test-label' }, 'params')));\n\t          params.appendChild((0, _Tag2.default)('table', (0, _Tag2.default)('tbody', names.map(function (param) {\n\t            var type = _this._params.get(param);\n\t            if (type === undefined) {\n\t              throw new Error('required param type not specified');\n\t            }\n\t            return (0, _Tag2.default)('tr', { class: 'test-param', 'data-name': param, _squalusType: type }, (0, _Tag2.default)('th', param), (0, _Tag2.default)('td', type.build()));\n\t          }))));\n\t          if (_this._method === 'PUT') {\n\t            test.appendChild((0, _Tag2.default)('div', { class: 'endpoint-test-controls' }, (0, _Tag2.default)('input', { type: 'button', value: 'EDIT', class: 'test-edit' }), (0, _Tag2.default)('span', { class: 'endpoint-test-status test-edit-status' })));\n\t          }\n\t        })();\n\t      }\n\t\n\t      if (this._type) {\n\t        test.appendChild((0, _Tag2.default)('div', { class: 'endpoint-test-body' }, (0, _Tag2.default)('div', { class: 'endpoint-test-label' }, 'body'), this._type.build()));\n\t      }\n\t\n\t      test.appendChild((0, _Tag2.default)('div', { class: 'endpoint-test-controls' }, (0, _Tag2.default)('input', { type: 'button', value: this._method, class: 'test-submit' }), (0, _Tag2.default)('span', { class: 'endpoint-test-status' })));\n\t\n\t      return this._node;\n\t    }\n\t  }, {\n\t    key: 'submit',\n\t    value: function submit() {\n\t      // todo: trap parse errors\n\t      var url = this.getPopulatedUrl();\n\t      var value = JSON.stringify(this.value());\n\t\n\t      var options = {\n\t        method: this._method,\n\t        headers: {\n\t          'Content-Type': 'application/json'\n\t        }\n\t      };\n\t      if (['PUT', 'POST', 'PATCH'].includes(this._method)) {\n\t        options.body = value;\n\t      }\n\t\n\t      fetch(url, options).then(function (res) {\n\t        new _Result2.default(url, res).parse();\n\t      }).catch(function (error) {\n\t        new _Result2.default(url, error).parse();\n\t      });\n\t    }\n\t  }, {\n\t    key: 'edit',\n\t    value: function edit() {\n\t      var _this2 = this;\n\t\n\t      var url = this.getPopulatedUrl();\n\t      var status = this._node.querySelector('.test-edit-status');\n\t\n\t      status.textContent = '';\n\t\n\t      this.clear();\n\t      this.lock();\n\t\n\t      fetch(url).then(function (res) {\n\t        // testing\n\t        // const json = {\n\t        //   IntervalUnit: 'monthly',\n\t        //   IntervalOffset: 15,\n\t        //   TemplateId: 4,\n\t        //   Id: 3990,\n\t        // };\n\t\n\t        if (!res.ok) {\n\t          status.textContent = 'something went wrong';\n\t          _this2.unlock();\n\t          return;\n\t        }\n\t\n\t        res.json().then(function (json) {\n\t          var data = json;\n\t          // todo: this is going to require the actual validation implementation to handle branching\n\t\n\t          // if data is array, edit the first one (for convenience, to support shared id/search path)\n\t          if (Array.isArray(data)) {\n\t            if (data.length && _this2._params && _this2._params.size === 1) {\n\t              status.textContent = 'Loaded first record (' + data.length + ' total)';\n\t              data = data[0];\n\t              _this2.updateSingleParam(data);\n\t            } else {\n\t              data = null;\n\t            }\n\t          }\n\t          if (data) {\n\t            _this2.populate(data);\n\t          } else {\n\t            status.textContent = 'No match for pattern';\n\t          }\n\t\n\t          _this2.unlock();\n\t        });\n\t      }).catch(function (error) {\n\t        status.textContent = error.message;\n\t        _this2.unlock();\n\t      });\n\t    }\n\t  }], [{\n\t    key: 'onKeyPress',\n\t    value: function onKeyPress(event, def) {\n\t      if (event.which === 13) {\n\t        event.preventDefault();\n\t        (def || this.closest(event.target)).submit();\n\t      }\n\t    }\n\t  }, {\n\t    key: 'onSubmit',\n\t    value: function onSubmit(event, def) {\n\t      (def || this.closest(event.target)).submit();\n\t    }\n\t  }, {\n\t    key: 'onEdit',\n\t    value: function onEdit(event, def) {\n\t      (def || this.closest(event.target)).edit();\n\t    }\n\t  }, {\n\t    key: 'closest',\n\t    value: function closest(elem) {\n\t      var node = closestAncestorByClassName(elem, 'endpoint');\n\t      return node ? node._squalusDef : null;\n\t    }\n\t  }]);\n\t\n\t  return Endpoint;\n\t}();\n\t\n\texports.default = Endpoint;\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Result = function () {\n\t  function Result(relativeUrl, response) {\n\t    _classCallCheck(this, Result);\n\t\n\t    this._relativeUrl = relativeUrl;\n\t    this._response = response;\n\t  }\n\t\n\t  _createClass(Result, [{\n\t    key: \"parse\",\n\t    value: function parse() {\n\t      if (this._response instanceof Response) {\n\t        if (this._response.ok) {\n\t          //\n\t        } else {\n\t            //\n\t          }\n\t      } else {\n\t          console.log(this._response.message);\n\t        }\n\t    }\n\t  }]);\n\t\n\t  return Result;\n\t}();\n\t\n\texports.default = Result;\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _Tag = __webpack_require__(2);\n\t\n\tvar _Tag2 = _interopRequireDefault(_Tag);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar BranchType = function () {\n\t  function BranchType(types) {\n\t    _classCallCheck(this, BranchType);\n\t\n\t    this._types = types;\n\t    this._node = null;\n\t\n\t    if (types.size < 2) {\n\t      throw new Error('degenerate branch type');\n\t    }\n\t  }\n\t\n\t  _createClass(BranchType, [{\n\t    key: 'clone',\n\t    value: function clone() {\n\t      var types = new Map();\n\t      this._types.forEach(function (type, key) {\n\t        return types.set(key, type.clone());\n\t      });\n\t      return new this.constructor(types);\n\t    }\n\t  }, {\n\t    key: 'build',\n\t    value: function build() {\n\t      this._node = (0, _Tag2.default)('div', { _squalusType: this }, (0, _Tag2.default)('select', { class: 'test-option' }, Array.from(this._types.keys(), function (key) {\n\t        return (0, _Tag2.default)('option', key);\n\t      })), Array.from(this._types.values(), function (value) {\n\t        return (0, _Tag2.default)('div', { class: 'test-option' }, value.build());\n\t      }));\n\t      return this._node;\n\t    }\n\t  }, {\n\t    key: 'value',\n\t    value: function value() {\n\t      return Array.from(this._types.values())[this._node.firstElementChild.selectedIndex].value();\n\t    }\n\t  }, {\n\t    key: 'populate',\n\t    value: function populate(data) {\n\t      // validate data to determine branch\n\t      var types = Array.from(this._types.values());\n\t      var i = types.findIndex(function (type) {\n\t        return type.validate(data, '', true);\n\t      });\n\t\n\t      if (i === -1) {\n\t        throw new Error('branch validation failed');\n\t      }\n\t\n\t      var select = this._node.firstElementChild;\n\t      select.selectedIndex = i;\n\t\n\t      var event = new Event('change', { bubbles: true });\n\t      select.dispatchEvent(event);\n\t\n\t      types[i].populate(data);\n\t    }\n\t  }, {\n\t    key: 'validate',\n\t    value: function validate(value, path, returnOnly) {\n\t      if (!Array.from(this._types.values()).some(function (type) {\n\t        return type.validate(value, path, true);\n\t      })) {\n\t        if (returnOnly) {\n\t          return false;\n\t        }\n\t        throw new Error(path + ' does not match any candidate');\n\t      }\n\t      return true;\n\t    }\n\t  }, {\n\t    key: 'clear',\n\t    value: function clear() {\n\t      this._types.forEach(function (type) {\n\t        return type.clear();\n\t      });\n\t    }\n\t  }, {\n\t    key: 'types',\n\t    get: function get() {\n\t      return this._types;\n\t    }\n\t  }], [{\n\t    key: 'onChange',\n\t    value: function onChange(event) {\n\t      var node = event.target;\n\t      var i = 0;\n\t      while (node.nextElementSibling) {\n\t        node = node.nextElementSibling;\n\t        node.classList.toggle('test-hidden', i++ !== event.target.selectedIndex);\n\t      }\n\t    }\n\t  }, {\n\t    key: 'initializeSelectionStates',\n\t    value: function initializeSelectionStates(root) {\n\t      Array.from(root.querySelectorAll('select')).forEach(function (elem) {\n\t        var event = new Event('change', { bubbles: true });\n\t        elem.dispatchEvent(event);\n\t      });\n\t    }\n\t  }]);\n\t\n\t  return BranchType;\n\t}();\n\t\n\texports.default = BranchType;\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _Tag = __webpack_require__(2);\n\t\n\tvar _Tag2 = _interopRequireDefault(_Tag);\n\t\n\tvar _BranchType = __webpack_require__(5);\n\t\n\tvar _BranchType2 = _interopRequireDefault(_BranchType);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar ArrayType = function () {\n\t  function ArrayType(type) {\n\t    _classCallCheck(this, ArrayType);\n\t\n\t    this._type = type;\n\t    this._rows = [];\n\t    this._node = null;\n\t    this._body = null;\n\t  }\n\t\n\t  _createClass(ArrayType, [{\n\t    key: 'name',\n\t    value: function name() {\n\t      return this._type.name() + '[]';\n\t    }\n\t  }, {\n\t    key: 'clone',\n\t    value: function clone() {\n\t      return new this.constructor(this._type.clone());\n\t    }\n\t  }, {\n\t    key: 'build',\n\t    value: function build() {\n\t      this._node = (0, _Tag2.default)('div', { _squalusType: this }, (0, _Tag2.default)('table', this._body = (0, _Tag2.default)('tbody'), (0, _Tag2.default)('tfoot', (0, _Tag2.default)('th', (0, _Tag2.default)('input', { type: 'button', class: 'test-row-add', value: '+' })), (0, _Tag2.default)('th'), (0, _Tag2.default)('td'))));\n\t      return this._node;\n\t    }\n\t  }, {\n\t    key: 'populate',\n\t    value: function populate(data, path, types) {\n\t      for (var i = 0; i < data.length; i++) {\n\t        var row = this.add();\n\t        row.populate(data[i], path + '[' + i + ']', types);\n\t      }\n\t    }\n\t  }, {\n\t    key: 'validate',\n\t    value: function validate(value, path, returnOnly) {\n\t      var _this = this;\n\t\n\t      if (!Array.isArray(value)) {\n\t        if (returnOnly) {\n\t          return false;\n\t        }\n\t        throw new Error(path + ' must be an array');\n\t      }\n\t\n\t      return value.every(function (item, i) {\n\t        return _this._type.validate(item, path + '[' + i + ']', returnOnly);\n\t      });\n\t    }\n\t  }, {\n\t    key: 'value',\n\t    value: function value() {\n\t      return this._rows.map(function (val) {\n\t        return val.value();\n\t      });\n\t    }\n\t  }, {\n\t    key: 'clear',\n\t    value: function clear() {\n\t      this._rows = [];\n\t      this._body.innerHTML = '';\n\t    }\n\t  }, {\n\t    key: 'add',\n\t    value: function add() {\n\t      var clone = this._type.clone();\n\t      this._rows.push(clone);\n\t      this._body.appendChild((0, _Tag2.default)('tr', (0, _Tag2.default)('th', (0, _Tag2.default)('input', { type: 'button', class: 'test-row-remove', value: '-' })), (0, _Tag2.default)('th', '[' + this._body.children.length + ']'), (0, _Tag2.default)('td', clone.build())));\n\t      _BranchType2.default.initializeSelectionStates(this._body.lastElementChild);\n\t      return clone;\n\t    }\n\t  }, {\n\t    key: 'remove',\n\t    value: function remove(i) {\n\t      this._rows.splice(i, 1);\n\t      this._body.children[i].remove();\n\t\n\t      for (var j = i; j < this._body.children.length; j++) {\n\t        this._body.children[j].children[1].textContent = '[' + j + ']';\n\t      }\n\t    }\n\t  }], [{\n\t    key: 'onClickAdd',\n\t    value: function onClickAdd(event) {\n\t      event.target.parentNode.parentNode.parentNode.parentNode._squalusType.add();\n\t    }\n\t  }, {\n\t    key: 'onClickRemove',\n\t    value: function onClickRemove(event) {\n\t      var row = event.target.parentNode.parentNode;\n\t      var i = Array.prototype.indexOf.call(row.parentNode.children, row);\n\t      row.parentNode.parentNode.parentNode._squalusType.remove(i);\n\t    }\n\t  }]);\n\t\n\t  return ArrayType;\n\t}();\n\t\n\texports.default = ArrayType;\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _Tag = __webpack_require__(2);\n\t\n\tvar _Tag2 = _interopRequireDefault(_Tag);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar AttributeType = function () {\n\t  function AttributeType(name, type, required) {\n\t    _classCallCheck(this, AttributeType);\n\t\n\t    this._name = name;\n\t    this._type = type;\n\t    this._required = required;\n\t    this._included = false;\n\t\n\t    if (this._name.endsWith('?')) {\n\t      console.log(this);\n\t    }\n\t  }\n\t\n\t  _createClass(AttributeType, [{\n\t    key: 'name',\n\t    value: function name() {\n\t      return this._name;\n\t    }\n\t  }, {\n\t    key: 'type',\n\t    value: function type() {\n\t      return this._type;\n\t    }\n\t  }, {\n\t    key: 'required',\n\t    value: function required() {\n\t      return this._required;\n\t    }\n\t  }, {\n\t    key: 'included',\n\t    value: function included() {\n\t      return this._included;\n\t    }\n\t  }, {\n\t    key: 'clone',\n\t    value: function clone() {\n\t      return new this.constructor(this._name, this._type.clone(), this._required);\n\t    }\n\t  }, {\n\t    key: 'build',\n\t    value: function build() {\n\t      this._node = (0, _Tag2.default)('tr', { _squalusType: this }, (0, _Tag2.default)('th'), (0, _Tag2.default)('th', this._name), (0, _Tag2.default)('td', this._type.build()));\n\t      if (!this._required) {\n\t        this._node.firstElementChild.appendChild((0, _Tag2.default)('input', { type: 'button', class: 'test-attr-toggle', value: '📎' }));\n\t      }\n\t      this.update();\n\t      return this._node;\n\t    }\n\t  }, {\n\t    key: 'value',\n\t    value: function value() {\n\t      return this._type.value();\n\t    }\n\t  }, {\n\t    key: 'populate',\n\t    value: function populate(data, path, types) {\n\t      this._type.populate(data, path + '.' + this._name, types);\n\t      this._included = true;\n\t      this.update();\n\t    }\n\t  }, {\n\t    key: 'validate',\n\t    value: function validate(value, path, returnOnly) {\n\t      return this._type.validate(value, path, returnOnly);\n\t    }\n\t  }, {\n\t    key: 'clear',\n\t    value: function clear() {\n\t      this._type.clear();\n\t      this._included = false;\n\t      this.update();\n\t    }\n\t  }, {\n\t    key: 'toggle',\n\t    value: function toggle() {\n\t      this._included = !this._included;\n\t      this.update();\n\t    }\n\t  }, {\n\t    key: 'update',\n\t    value: function update() {\n\t      if (!this._required) {\n\t        this._node.children[0].firstElementChild.classList.toggle('test-attr-included', this._included);\n\t        this._node.children[1].classList.toggle('test-attr-toggle', !this._included);\n\t        this._node.children[2].firstElementChild.classList.toggle('test-hidden', !this._included);\n\t      }\n\t    }\n\t  }], [{\n\t    key: 'onClickToggle',\n\t    value: function onClickToggle(event) {\n\t      event.target.parentNode.parentNode._squalusType.toggle();\n\t    }\n\t  }]);\n\t\n\t  return AttributeType;\n\t}();\n\t\n\texports.default = AttributeType;\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _Tag = __webpack_require__(2);\n\t\n\tvar _Tag2 = _interopRequireDefault(_Tag);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar ObjectType = function () {\n\t  function ObjectType(attributes) {\n\t    _classCallCheck(this, ObjectType);\n\t\n\t    this._attributes = attributes;\n\t    this._node = null;\n\t  }\n\t\n\t  _createClass(ObjectType, [{\n\t    key: 'attributes',\n\t    value: function attributes() {\n\t      return this._attributes;\n\t    }\n\t  }, {\n\t    key: 'clone',\n\t    value: function clone() {\n\t      return new this.constructor(this._attributes.map(function (attr) {\n\t        return attr.clone();\n\t      }));\n\t    }\n\t  }, {\n\t    key: 'build',\n\t    value: function build() {\n\t      this._node = (0, _Tag2.default)('table', { _squalusType: this }, (0, _Tag2.default)('tbody', this._attributes.map(function (type) {\n\t        return type.build();\n\t      })));\n\t      return this._node;\n\t    }\n\t  }, {\n\t    key: 'value',\n\t    value: function value() {\n\t      var data = {};\n\t      this._attributes.forEach(function (attr) {\n\t        if (attr.required() || attr.included()) {\n\t          data[attr.name()] = attr.value();\n\t        }\n\t      });\n\t      return data;\n\t    }\n\t  }, {\n\t    key: 'populate',\n\t    value: function populate(data, path, types) {\n\t      this._attributes.forEach(function (attr) {\n\t        attr.populate(data[attr.name()], path, types);\n\t      });\n\t    }\n\t  }, {\n\t    key: 'validate',\n\t    value: function validate(value, path, returnOnly) {\n\t      // todo: filter/warn on unrecognized attributes\n\t\n\t      if ((typeof value === 'undefined' ? 'undefined' : _typeof(value)) !== 'object') {\n\t        if (returnOnly) {\n\t          return false;\n\t        }\n\t        throw new Error(path + ' must be an object');\n\t      }\n\t\n\t      for (var i = 0; i < this._attributes.length; i++) {\n\t        var attr = this._attributes[i];\n\t        var key = attr.name();\n\t\n\t        if (value[key] === undefined) {\n\t          if (attr.required()) {\n\t            if (returnOnly) {\n\t              return false;\n\t            }\n\t            throw new Error(path + '.' + key + ' is required');\n\t          }\n\t        } else if (!attr.validate(value[key], path + '.' + key, returnOnly)) {\n\t          return false;\n\t        }\n\t      }\n\t\n\t      return true;\n\t    }\n\t  }, {\n\t    key: 'clear',\n\t    value: function clear() {\n\t      this._attributes.forEach(function (attr) {\n\t        return attr.clear();\n\t      });\n\t    }\n\t  }]);\n\t\n\t  return ObjectType;\n\t}();\n\t\n\texports.default = ObjectType;\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _Tag = __webpack_require__(2);\n\t\n\tvar _Tag2 = _interopRequireDefault(_Tag);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar implementations = new Map();\n\t['null', 'int', 'uint', 'float', 'string', 'bool', 'date', 'datetime', 'timestamp', 'guid'].forEach(function (type) {\n\t  return implementations.set(type, null);\n\t});\n\t\n\tvar ScalarType = function () {\n\t  function ScalarType(type, values) {\n\t    _classCallCheck(this, ScalarType);\n\t\n\t    this._type = type;\n\t    this._values = this._parse(values);\n\t    this._node = null;\n\t  }\n\t\n\t  _createClass(ScalarType, [{\n\t    key: 'clone',\n\t    value: function clone() {\n\t      return new this.constructor(this._type, this._values);\n\t    }\n\t  }, {\n\t    key: 'supportsValues',\n\t    value: function supportsValues() {\n\t      return true;\n\t    }\n\t  }, {\n\t    key: '_parse',\n\t    value: function _parse(values) {\n\t      return values;\n\t    }\n\t  }, {\n\t    key: '_build',\n\t    value: function _build() {\n\t      if (this._values) {\n\t        if (this._values.length === 1) {\n\t          return (0, _Tag2.default)('input', { type: 'text', disabled: true, value: this._values[0] });\n\t        }\n\t        return (0, _Tag2.default)('select', this._values.map(function (v) {\n\t          return (0, _Tag2.default)('option', v);\n\t        }));\n\t      }\n\t      return (0, _Tag2.default)('input', { type: 'text', placeholder: this._type });\n\t    }\n\t  }, {\n\t    key: 'build',\n\t    value: function build() {\n\t      this._node = this._build();\n\t      this._node._squalusType = this;\n\t      return this._node;\n\t    }\n\t  }, {\n\t    key: 'value',\n\t    value: function value() {\n\t      return this._node.value;\n\t    }\n\t  }, {\n\t    key: 'populate',\n\t    value: function populate(data) {\n\t      this._node.value = data;\n\t    }\n\t  }, {\n\t    key: '_validate',\n\t    value: function _validate(value) {\n\t      return typeof value === 'string';\n\t    }\n\t  }, {\n\t    key: 'validate',\n\t    value: function validate(value, path, silent) {\n\t      if (!this._validate(value, path, silent)) {\n\t        if (silent) {\n\t          return false;\n\t        }\n\t        throw new Error(path + ' must be of type ' + this._type);\n\t      }\n\t\n\t      if (this._values && !this._values.includes(value)) {\n\t        if (silent) {\n\t          return false;\n\t        }\n\t        throw new Error(path + ': \\'' + value + '\\' must be in [' + this._values.join(', ') + ']');\n\t      }\n\t\n\t      return true;\n\t    }\n\t  }, {\n\t    key: 'clear',\n\t    value: function clear() {\n\t      if (this._values) {\n\t        if (this._node.selectedIndex !== undefined) {\n\t          this._node.selectedIndex = 0;\n\t        }\n\t      } else {\n\t        this._node.value = '';\n\t      }\n\t    }\n\t  }, {\n\t    key: 'name',\n\t    get: function get() {\n\t      return this._type;\n\t    }\n\t  }], [{\n\t    key: 'register',\n\t    value: function register(type, implementation) {\n\t      if (Array.isArray(type)) {\n\t        type.forEach(function (t) {\n\t          return implementations.set(t, implementation);\n\t        });\n\t      } else {\n\t        implementations.set(type, implementation);\n\t      }\n\t    }\n\t  }, {\n\t    key: 'create',\n\t    value: function create(type, values) {\n\t      return new (implementations.get(type) || ScalarType)(type, values);\n\t    }\n\t  }, {\n\t    key: 'getScalarTypes',\n\t    value: function getScalarTypes() {\n\t      return Array.from(implementations.keys());\n\t    }\n\t  }]);\n\t\n\t  return ScalarType;\n\t}();\n\t\n\texports.default = ScalarType;\n\n/***/ },\n/* 10 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar NullableType = function () {\n\t  function NullableType(type) {\n\t    _classCallCheck(this, NullableType);\n\t\n\t    this._type = type;\n\t  }\n\t\n\t  _createClass(NullableType, [{\n\t    key: 'name',\n\t    value: function name() {\n\t      return this._type.name();\n\t    }\n\t  }, {\n\t    key: 'build',\n\t    value: function build() {\n\t      return this._type.build();\n\t    }\n\t  }, {\n\t    key: 'clone',\n\t    value: function clone() {\n\t      return new this.constructor(this._type.clone());\n\t    }\n\t  }, {\n\t    key: 'value',\n\t    value: function value() {\n\t      var val = this._type.value();\n\t      if (val === '') {\n\t        val = null;\n\t      }\n\t      return val;\n\t    }\n\t  }, {\n\t    key: 'validate',\n\t    value: function validate(value, path, returnOnly) {\n\t      return value === null || this._type.validate(value, path, returnOnly);\n\t    }\n\t  }, {\n\t    key: 'populate',\n\t    value: function populate(data, path, types) {\n\t      this._type.populate(data, path, types);\n\t    }\n\t  }, {\n\t    key: 'clear',\n\t    value: function clear() {\n\t      this._type.clear();\n\t    }\n\t  }]);\n\t\n\t  return NullableType;\n\t}();\n\t\n\texports.default = NullableType;\n\n/***/ },\n/* 11 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _Tag = __webpack_require__(2);\n\t\n\tvar _Tag2 = _interopRequireDefault(_Tag);\n\t\n\tvar _BranchType = __webpack_require__(5);\n\t\n\tvar _BranchType2 = _interopRequireDefault(_BranchType);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar MapType = function () {\n\t  function MapType(key, type, required) {\n\t    _classCallCheck(this, MapType);\n\t\n\t    this._type = type;\n\t    this._key = key;\n\t    this._required = required;\n\t    this._rows = [];\n\t    this._node = null;\n\t    this._body = null;\n\t  }\n\t\n\t  _createClass(MapType, [{\n\t    key: 'name',\n\t    value: function name() {\n\t      return this._type.name() + '{}';\n\t    }\n\t  }, {\n\t    key: 'clone',\n\t    value: function clone() {\n\t      return new this.constructor(this._key.clone(), this._type.clone(), this._required ? this._required.clone() : null);\n\t    }\n\t  }, {\n\t    key: 'build',\n\t    value: function build() {\n\t      var _this = this;\n\t\n\t      this._node = (0, _Tag2.default)('div', { _squalusType: this }, (0, _Tag2.default)('table', this._body = (0, _Tag2.default)('tbody'), (0, _Tag2.default)('tfoot', (0, _Tag2.default)('th', (0, _Tag2.default)('input', { type: 'button', class: 'test-row-add', value: '+' })), (0, _Tag2.default)('th'), (0, _Tag2.default)('td'))));\n\t      if (this._required) {\n\t        this._required.attributes().forEach(function (attr) {\n\t          _this.add(attr.type(), attr.name());\n\t        });\n\t      }\n\t      return this._node;\n\t    }\n\t  }, {\n\t    key: 'populate',\n\t    value: function populate(data, path, types) {\n\t      var _this2 = this;\n\t\n\t      Object.keys(data).forEach(function (key, i) {\n\t        var row = _this2.add();\n\t        _this2._body.children[i].firstElementChild.textContent = key;\n\t        row.populate(data[key], path + '[' + key + ']', types);\n\t      });\n\t    }\n\t  }, {\n\t    key: 'validate',\n\t    value: function validate(value, path, returnOnly) {\n\t      if ((typeof value === 'undefined' ? 'undefined' : _typeof(value)) !== 'object') {\n\t        if (returnOnly) {\n\t          return false;\n\t        }\n\t        throw new Error(path + ' must be an object');\n\t      }\n\t\n\t      var keys = Object.keys(value);\n\t      for (var i = 0; i < keys.length; i++) {\n\t        var key = keys[i];\n\t\n\t        if (!this._key.validate(key, path + '[' + key + ']*', returnOnly)) {\n\t          return false;\n\t        }\n\t\n\t        if (!this._type.validate(value[key], path + '[' + key + ']', returnOnly)) {\n\t          return false;\n\t        }\n\t      }\n\t\n\t      if (this._required) {\n\t        if (!this._type.validate(value, path, returnOnly)) {\n\t          return false;\n\t        }\n\t      }\n\t\n\t      return true;\n\t    }\n\t  }, {\n\t    key: 'value',\n\t    value: function value() {\n\t      var _this3 = this;\n\t\n\t      var obj = {};\n\t      this._rows.forEach(function (row, i) {\n\t        var key = _this3._body.children[i].children[1].firstElementChild.value;\n\t        obj[key] = row.value();\n\t      });\n\t      return obj;\n\t    }\n\t  }, {\n\t    key: 'clear',\n\t    value: function clear() {\n\t      this._rows = [];\n\t      this._body.innerHTML = '';\n\t    }\n\t  }, {\n\t    key: 'add',\n\t    value: function add(type, key) {\n\t      var clone = type || this._type.clone();\n\t      this._rows.push(clone);\n\t      var keyField = this._key ? this._key.build() : (0, _Tag2.default)('input', { type: 'text', placeholder: 'key' });\n\t      if (key) {\n\t        keyField.value = key;\n\t      }\n\t      this._body.appendChild((0, _Tag2.default)('tr', (0, _Tag2.default)('th', (0, _Tag2.default)('input', { type: 'button', class: 'test-row-remove', value: '-' })), (0, _Tag2.default)('th', keyField), (0, _Tag2.default)('td', clone.build())));\n\t      _BranchType2.default.initializeSelectionStates(this._body.lastElementChild);\n\t      return clone;\n\t    }\n\t  }, {\n\t    key: 'remove',\n\t    value: function remove(i) {\n\t      this._rows.splice(i, 1);\n\t      this._body.children[i].remove();\n\t    }\n\t  }]);\n\t\n\t  return MapType;\n\t}();\n\t\n\texports.default = MapType;\n\n/***/ },\n/* 12 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _Tag = __webpack_require__(2);\n\t\n\tvar _Tag2 = _interopRequireDefault(_Tag);\n\t\n\tvar _ScalarType2 = __webpack_require__(9);\n\t\n\tvar _ScalarType3 = _interopRequireDefault(_ScalarType2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar BoolScalarType = function (_ScalarType) {\n\t  _inherits(BoolScalarType, _ScalarType);\n\t\n\t  function BoolScalarType() {\n\t    _classCallCheck(this, BoolScalarType);\n\t\n\t    return _possibleConstructorReturn(this, Object.getPrototypeOf(BoolScalarType).apply(this, arguments));\n\t  }\n\t\n\t  _createClass(BoolScalarType, [{\n\t    key: '_parse',\n\t    value: function _parse(values) {\n\t      return values ? values.map(function (v) {\n\t        return v === true || v === 'true';\n\t      }) : null;\n\t    }\n\t  }, {\n\t    key: '_build',\n\t    value: function _build() {\n\t      return (0, _Tag2.default)('input', { type: 'checkbox' });\n\t    }\n\t  }, {\n\t    key: '_validate',\n\t    value: function _validate(value) {\n\t      return typeof value === 'boolean';\n\t    }\n\t  }, {\n\t    key: 'value',\n\t    value: function value() {\n\t      return this._node.checked;\n\t    }\n\t  }, {\n\t    key: 'populate',\n\t    value: function populate(data) {\n\t      this._node.checked = data;\n\t    }\n\t  }, {\n\t    key: 'clear',\n\t    value: function clear() {\n\t      this._node.checked = false;\n\t    }\n\t  }]);\n\t\n\t  return BoolScalarType;\n\t}(_ScalarType3.default);\n\t\n\texports.default = BoolScalarType;\n\n/***/ },\n/* 13 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _ScalarType2 = __webpack_require__(9);\n\t\n\tvar _ScalarType3 = _interopRequireDefault(_ScalarType2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar FloatScalarType = function (_ScalarType) {\n\t  _inherits(FloatScalarType, _ScalarType);\n\t\n\t  function FloatScalarType() {\n\t    _classCallCheck(this, FloatScalarType);\n\t\n\t    return _possibleConstructorReturn(this, Object.getPrototypeOf(FloatScalarType).apply(this, arguments));\n\t  }\n\t\n\t  _createClass(FloatScalarType, [{\n\t    key: '_parse',\n\t    value: function _parse(values) {\n\t      return values ? values.map(function (v) {\n\t        return parseFloat(v);\n\t      }) : null;\n\t    }\n\t  }, {\n\t    key: '_validate',\n\t    value: function _validate(value) {\n\t      return typeof value === 'number';\n\t    }\n\t  }, {\n\t    key: 'value',\n\t    value: function value() {\n\t      return parseFloat(this._node.value);\n\t    }\n\t  }]);\n\t\n\t  return FloatScalarType;\n\t}(_ScalarType3.default);\n\t\n\texports.default = FloatScalarType;\n\n/***/ },\n/* 14 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _ScalarType2 = __webpack_require__(9);\n\t\n\tvar _ScalarType3 = _interopRequireDefault(_ScalarType2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar IntScalarType = function (_ScalarType) {\n\t  _inherits(IntScalarType, _ScalarType);\n\t\n\t  function IntScalarType(type, values) {\n\t    _classCallCheck(this, IntScalarType);\n\t\n\t    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(IntScalarType).call(this, type, values));\n\t\n\t    _this._validator = null;\n\t    return _this;\n\t  }\n\t\n\t  _createClass(IntScalarType, [{\n\t    key: '_parse',\n\t    value: function _parse(values) {\n\t      if (!values) {\n\t        return null;\n\t      }\n\t\n\t      var parsed = values.reduce(function (previous, current) {\n\t        if (typeof current === 'number') {\n\t          if ((current | 0) !== current) {\n\t            throw new Error('not an int');\n\t          }\n\t          previous.push(current);\n\t        } else if (current.indexOf('-') !== -1) {\n\t          var parts = current.split('-');\n\t          var start = parseInt(parts[0], 10);\n\t          var end = parseInt(parts[1], 10);\n\t          previous.push([start, end]);\n\t        } else {\n\t          previous.push(parseInt(current, 10));\n\t        }\n\t        return previous;\n\t      }, []);\n\t\n\t      var ranges = parsed.filter(function (p) {\n\t        return Array.isArray(p);\n\t      });\n\t\n\t      if (!ranges.length) {\n\t        return parsed.sort(function (a, b) {\n\t          return a - b;\n\t        });\n\t      }\n\t\n\t      var fixed = parsed.filter(function (p) {\n\t        return !Array.isArray(p);\n\t      });\n\t\n\t      var rangeSize = ranges.reduce(function (previous, current) {\n\t        return previous + (current[1] - current[0]);\n\t      }, 0);\n\t\n\t      // if the ranges are small enough, just enumerate them\n\t      if (rangeSize + fixed.length <= 100) {\n\t        ranges.forEach(function (r) {\n\t          for (var i = r[0]; i <= r[1]; i++) {\n\t            fixed.push(i);\n\t          }\n\t        });\n\t        return fixed.sort(function (a, b) {\n\t          return a - b;\n\t        });\n\t      }\n\t\n\t      this._validator = function (value) {\n\t        return fixed.includes(value) || ranges.some(function (r) {\n\t          return r[0] <= value && value >= r[1];\n\t        });\n\t      };\n\t\n\t      return null;\n\t    }\n\t  }, {\n\t    key: '_validate',\n\t    value: function _validate(value) {\n\t      return typeof value === 'number' && (value | 0) === value;\n\t    }\n\t  }, {\n\t    key: 'value',\n\t    value: function value() {\n\t      return parseInt(this._node.value, 10);\n\t    }\n\t  }]);\n\t\n\t  return IntScalarType;\n\t}(_ScalarType3.default);\n\t\n\texports.default = IntScalarType;\n\n/***/ },\n/* 15 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _ScalarType2 = __webpack_require__(9);\n\t\n\tvar _ScalarType3 = _interopRequireDefault(_ScalarType2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar NullScalarType = function (_ScalarType) {\n\t  _inherits(NullScalarType, _ScalarType);\n\t\n\t  function NullScalarType() {\n\t    _classCallCheck(this, NullScalarType);\n\t\n\t    return _possibleConstructorReturn(this, Object.getPrototypeOf(NullScalarType).apply(this, arguments));\n\t  }\n\t\n\t  _createClass(NullScalarType, [{\n\t    key: 'supportsValues',\n\t    value: function supportsValues() {\n\t      return false;\n\t    }\n\t  }, {\n\t    key: '_build',\n\t    value: function _build() {\n\t      return document.createTextNode('');\n\t    }\n\t  }, {\n\t    key: '_validate',\n\t    value: function _validate(value) {\n\t      return value === null;\n\t    }\n\t  }, {\n\t    key: 'value',\n\t    value: function value() {\n\t      return null;\n\t    }\n\t  }]);\n\t\n\t  return NullScalarType;\n\t}(_ScalarType3.default);\n\t\n\texports.default = NullScalarType;\n\n/***/ },\n/* 16 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"^colors$\" }] */\n\t\n\tvar _colors = __webpack_require__(17);\n\t\n\tvar _colors2 = _interopRequireDefault(_colors);\n\t\n\tvar _http = __webpack_require__(18);\n\t\n\tvar _http2 = _interopRequireDefault(_http);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar TestCollection = function () {\n\t  function TestCollection(name, options) {\n\t    _classCallCheck(this, TestCollection);\n\t\n\t    this._name = name;\n\t    this._groups = null;\n\t    this._cancel = false;\n\t    this._pool = new _http2.default.Agent();\n\t\n\t    if (options) {\n\t      if (options.maxSockets) {\n\t        this._pool.maxSockets = options.maxSockets;\n\t      }\n\t    }\n\t  }\n\t\n\t  _createClass(TestCollection, [{\n\t    key: 'groups',\n\t    value: function groups(_groups) {\n\t      this._groups = _groups;\n\t      return this;\n\t    }\n\t  }, {\n\t    key: 'getMaxGroupNameLength',\n\t    value: function getMaxGroupNameLength() {\n\t      if (this._groups && !this._maxGroupNameLength) {\n\t        this._maxGroupNameLength = this._groups.reduce(function (a, b) {\n\t          return a._name.length > b._name.length ? a : b;\n\t        })._name.length;\n\t      }\n\t      return this._maxGroupNameLength;\n\t    }\n\t  }, {\n\t    key: 'execute',\n\t    value: function execute(initial) {\n\t      var _this = this;\n\t\n\t      var root = Promise.resolve();\n\t      var context = new Map();\n\t      if (initial) {\n\t        Object.keys(initial).forEach(function (k) {\n\t          return context.set(k, initial[k]);\n\t        });\n\t      }\n\t\n\t      var testCount = this._groups.reduce(function (a, b) {\n\t        return a + b._tests.length;\n\t      }, 0);\n\t\n\t      console.log();\n\t      console.log('  collection [' + this._name.green + ']');\n\t      console.log();\n\t\n\t      return Promise.all(this._groups.map(function (g) {\n\t        return g.execute(context, _this, root);\n\t      })).then(function () {\n\t        console.log();\n\t        console.log(('  ' + testCount + ' passing').green);\n\t        console.log();\n\t      }).catch(function (error) {\n\t        if (_this._cancel) {\n\t          return;\n\t        }\n\t\n\t        _this._cancel = true;\n\t\n\t        if (!error._test) {\n\t          console.log(error);\n\t          return;\n\t        }\n\t\n\t        var body = error._response.body;\n\t\n\t        if (error._response.statusCode === 500) {\n\t          var contentType = error._response.headers['content-type'];\n\t          if (contentType && contentType.split(';')[0].trim() === 'text/html') {\n\t            if (/<span><H1>Server Error in/i.test(body)) {\n\t              // ASP.NET unhandled error trace\n\t              body = body.replace(/^[\\s\\S]*<!--([\\s\\S]*)-->\\s*$/, '$1');\n\t            }\n\t          }\n\t        }\n\t\n\t        var info = {\n\t          reason: error._reason,\n\t          group: error._group._name,\n\t          test: error._test._name,\n\t          href: error._response.request.uri.href,\n\t          method: error._response.request.method.toUpperCase(),\n\t          body: error._response.request.body,\n\t          response: body,\n\t          context: JSON.stringify(context)\n\t        };\n\t        var maxInfoNameLength = Object.keys(info).reduce(function (a, b) {\n\t          return Math.max(a, b.length);\n\t        }, 0);\n\t\n\t        console.log();\n\t        console.log('  failed'.red);\n\t        console.log();\n\t        Object.keys(info).forEach(function (k) {\n\t          return console.log('    %s%s : %s', k.yellow, ' '.repeat(maxInfoNameLength - k.length), info[k]);\n\t        });\n\t        console.log();\n\t      });\n\t    }\n\t  }]);\n\t\n\t  return TestCollection;\n\t}();\n\t\n\texports.default = TestCollection;\n\n/***/ },\n/* 17 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"colors\");\n\n/***/ },\n/* 18 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"http\");\n\n/***/ },\n/* 19 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar TestGroup = function () {\n\t  function TestGroup(name) {\n\t    _classCallCheck(this, TestGroup);\n\t\n\t    this._name = name;\n\t    this._requires = null;\n\t    this._parallel = false;\n\t    this._session = null;\n\t    this._tests = null;\n\t    this._promise = null;\n\t  }\n\t\n\t  _createClass(TestGroup, [{\n\t    key: \"requires\",\n\t    value: function requires(groups) {\n\t      this._requires = Array.isArray(groups) ? groups : [groups];\n\t      return this;\n\t    }\n\t  }, {\n\t    key: \"parallel\",\n\t    value: function parallel() {\n\t      this._parallel = true;\n\t      return this;\n\t    }\n\t  }, {\n\t    key: \"session\",\n\t    value: function session(name) {\n\t      this._session = name;\n\t      return this;\n\t    }\n\t  }, {\n\t    key: \"tests\",\n\t    value: function tests(_tests) {\n\t      this._tests = _tests;\n\t      return this;\n\t    }\n\t  }, {\n\t    key: \"execute\",\n\t    value: function execute(context, collection, root) {\n\t      var _this = this;\n\t\n\t      if (!this._promise) {\n\t        (function () {\n\t          var when = root;\n\t          if (_this._requires) {\n\t            when = Promise.all(_this._requires.map(function (g) {\n\t              return g.execute(root, context);\n\t            }));\n\t          }\n\t          _this._promise = new Promise(function (resolve, reject) {\n\t            if (_this._parallel) {\n\t              when.then(function () {\n\t                Promise.all(_this._tests.map(function (t) {\n\t                  return t.execute(context, _this, collection);\n\t                })).then(resolve, reject);\n\t              });\n\t            } else {\n\t              (function () {\n\t                var tests = _this._tests.slice().reverse();\n\t\n\t                var onResolve = function onResolve() {\n\t                  if (tests.length) {\n\t                    tests.pop().execute(context, _this, collection).then(onResolve, reject);\n\t                  } else {\n\t                    resolve();\n\t                  }\n\t                };\n\t\n\t                when.then(onResolve, reject);\n\t              })();\n\t            }\n\t          });\n\t        })();\n\t      }\n\t      return this._promise;\n\t    }\n\t  }]);\n\t\n\t  return TestGroup;\n\t}();\n\t\n\texports.default = TestGroup;\n\n/***/ },\n/* 20 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"^colors$\" }] */\n\t\n\tvar _Squalus = __webpack_require__(1);\n\t\n\tvar _Squalus2 = _interopRequireDefault(_Squalus);\n\t\n\tvar _requestPromise = __webpack_require__(21);\n\t\n\tvar _requestPromise2 = _interopRequireDefault(_requestPromise);\n\t\n\tvar _colors = __webpack_require__(17);\n\t\n\tvar _colors2 = _interopRequireDefault(_colors);\n\t\n\tvar _TestError = __webpack_require__(22);\n\t\n\tvar _TestError2 = _interopRequireDefault(_TestError);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction padRight(str, width) {\n\t  var char = arguments.length <= 2 || arguments[2] === undefined ? ' ' : arguments[2];\n\t\n\t  if (str.length < width) {\n\t    return str + char.repeat(width - str.length);\n\t  }\n\t  return str;\n\t}\n\t\n\tvar STRIP_COMMENTS = /((\\/\\/.*$)|(\\/\\*[\\s\\S]*?\\*\\/))/mg;\n\tvar ARGUMENT_NAMES = /([^\\s,]+)/g;\n\tfunction getParamNames(func) {\n\t  var fnStr = func.toString().replace(STRIP_COMMENTS, '');\n\t  var result = fnStr.slice(fnStr.indexOf('(') + 1, fnStr.indexOf(')')).match(ARGUMENT_NAMES);\n\t  if (result === null) {\n\t    result = [];\n\t  }\n\t  return result;\n\t}\n\t\n\tfunction callFuncWithParamInjection(func, response, body, context) {\n\t  var sourceParams = new Map();\n\t  sourceParams.set('response', response);\n\t  sourceParams.set('body', body);\n\t  sourceParams.set('context', context);\n\t  var maps = [sourceParams];\n\t  Array.from(sourceParams.values()).filter(function (p) {\n\t    return p instanceof Map;\n\t  }).forEach(function (map) {\n\t    return maps.push(map);\n\t  });\n\t\n\t  return func.apply(null, getParamNames(func).map(function (name) {\n\t    var map = maps.find(function (m) {\n\t      return m.has(name);\n\t    });\n\t    if (map) {\n\t      return map.get(name);\n\t    }\n\t    return undefined;\n\t  }));\n\t}\n\t\n\tvar Test = function () {\n\t  function Test(name) {\n\t    _classCallCheck(this, Test);\n\t\n\t    this._name = name;\n\t    this._method = null;\n\t    this._url = null;\n\t    this._contentType = null;\n\t    this._responseContentType = null;\n\t    this._body = null;\n\t    this._status = null;\n\t    this._type = null;\n\t    this._save = null;\n\t    this._expect = null;\n\t    this._promise = null;\n\t  }\n\t\n\t  _createClass(Test, [{\n\t    key: 'execute',\n\t    value: function execute(context, group, collection) {\n\t      var _this = this;\n\t\n\t      if (!this._promise) {\n\t        (function () {\n\t          var url = _this._url;\n\t          if (typeof url === 'function') {\n\t            url = url(context);\n\t          }\n\t\n\t          var populateVariables = function populateVariables(m, name) {\n\t            return context.has(name) ? context.get(name) : m;\n\t          };\n\t\n\t          url = url.replace(/[@:]([a-z0-9_]+)/gi, populateVariables);\n\t          url = url.replace(/{([a-z0-9_]+)}/gi, populateVariables);\n\t\n\t          var absUrl = context.get('baseUrl') + url;\n\t\n\t          var body = _this._body;\n\t          if (typeof body === 'function') {\n\t            body = body(context);\n\t          }\n\t\n\t          var reject = function reject(reason, response) {\n\t            return Promise.reject(new _TestError2.default(_this, group, collection, reason, response));\n\t          };\n\t\n\t          var status = function status(response) {\n\t            if (!_this._status || typeof _this._status !== 'number') {\n\t              return reject('invalid response status', response);\n\t            }\n\t            if (response.statusCode !== _this._status) {\n\t              return reject('response status ' + response.statusCode + ' does not match expected ' + _this._status, response);\n\t            }\n\t            if (_this._responseContentType) {\n\t              var contentType = (response.headers['content-type'] || '').split(';', 2)[0];\n\t              if (contentType !== _this._responseContentType) {\n\t                return reject('response content type ' + contentType + ' does not match expected ' + _this._responseContentType, response);\n\t              }\n\t            }\n\t            return Promise.resolve(response);\n\t          };\n\t\n\t          var type = function type(response) {\n\t            if (_this._type) {\n\t              var responseType = _Squalus2.default.getType(_this._type);\n\t              if (!responseType) {\n\t                return reject('failed to create response type ' + _this._type, response);\n\t              }\n\t              try {\n\t                var json = JSON.parse(response.body);\n\t                response.bodyJson = json; // eslint-disable-line no-param-reassign\n\t                responseType.validate(json, 'body');\n\t              } catch (e) {\n\t                console.log(e);\n\t                return reject(e, response);\n\t              }\n\t              return Promise.resolve(response);\n\t            }\n\t            return Promise.resolve(response);\n\t          };\n\t\n\t          var expect = function expect(response) {\n\t            if (_this._expect) {\n\t              return Promise.all(_this._expect.map(function (func, i) {\n\t                return Promise.resolve(callFuncWithParamInjection(func, response, response.bodyJson !== undefined ? response.bodyJson : response.body, context)).then(function (passed) {\n\t                  if (!passed) {\n\t                    return reject('expect test \\'' + i + '\\' failed', response);\n\t                  }\n\t                  return Promise.resolve(response);\n\t                });\n\t              })).then(function () {\n\t                return Promise.resolve(response);\n\t              });\n\t            }\n\t            return Promise.resolve(response);\n\t          };\n\t\n\t          var save = function save(response) {\n\t            if (_this._save) {\n\t              return Promise.all(Array.from(_this._save.keys()).map(function (key) {\n\t                return Promise.resolve(callFuncWithParamInjection(_this._save.get(key), response, response.bodyJson !== undefined ? response.bodyJson : response.body, context)).then(function (v) {\n\t                  if (context.has(key)) {\n\t                    throw new Error('The context already contains key \\'' + key + '\\'');\n\t                  }\n\t                  context.set(key, v);\n\t                  // console.log(`  [${key}] = ${v}`);\n\t                });\n\t              })).then(function () {\n\t                return Promise.resolve(response);\n\t              });\n\t            }\n\t            return Promise.resolve(response);\n\t          };\n\t\n\t          var options = {\n\t            uri: absUrl,\n\t            method: _this._method,\n\t            headers: {\n\t              'Content-Type': _this._contentType || 'application/json',\n\t              Cookie: context.get(group._session)\n\t            },\n\t            resolveWithFullResponse: true,\n\t            simple: false\n\t          };\n\t\n\t          if (_this._contentType === 'application/x-www-form-urlencoded') {\n\t            options.form = body;\n\t          } else if (_this._contentType === 'multipart/form-data') {\n\t            options.formData = body;\n\t          } else {\n\t            options.body = body;\n\t          }\n\t\n\t          _this._promise = (0, _requestPromise2.default)(options).then(function (res) {\n\t            return status(res);\n\t          }).then(function (res) {\n\t            return type(res);\n\t          }).then(function (res) {\n\t            return expect(res);\n\t          }).then(function (res) {\n\t            return save(res);\n\t          }).then(function () {\n\t            if (collection._cancel) {\n\t              return Promise.reject();\n\t            }\n\t            console.log('    %s %s %s %s', padRight(group._name, collection.getMaxGroupNameLength()).gray, padRight(_this._method.toUpperCase(), 6).magenta, url, _this._name.cyan);\n\t            return Promise.resolve();\n\t          });\n\t        })();\n\t      }\n\t      return this._promise;\n\t    }\n\t  }, {\n\t    key: 'get',\n\t    value: function get(url) {\n\t      this._method = 'get';\n\t      this._url = url;\n\t      this._status = this._status || 200;\n\t      return this;\n\t    }\n\t  }, {\n\t    key: 'post',\n\t    value: function post(url) {\n\t      this._method = 'post';\n\t      this._url = url;\n\t      this._status = this._status || 200;\n\t      return this;\n\t    }\n\t  }, {\n\t    key: 'put',\n\t    value: function put(url) {\n\t      this._method = 'put';\n\t      this._url = url;\n\t      this._status = this._status || 204;\n\t      return this;\n\t    }\n\t  }, {\n\t    key: 'delete',\n\t    value: function _delete(url) {\n\t      this._method = 'delete';\n\t      this._url = url;\n\t      this._status = this._status || 204;\n\t      return this;\n\t    }\n\t  }, {\n\t    key: 'json',\n\t    value: function json(data) {\n\t      this._contentType = 'application/json';\n\t      if (typeof data === 'function') {\n\t        this._body = function (context) {\n\t          return JSON.stringify(data(context));\n\t        };\n\t      } else {\n\t        this._body = JSON.stringify(data);\n\t      }\n\t      return this;\n\t    }\n\t  }, {\n\t    key: 'form',\n\t    value: function form(data) {\n\t      this._contentType = 'application/x-www-form-urlencoded';\n\t      this._body = data;\n\t      return this;\n\t    }\n\t  }, {\n\t    key: 'formData',\n\t    value: function formData(data) {\n\t      this._contentType = 'multipart/form-data';\n\t      var form = new FormData();\n\t      Object.keys(data).forEach(function (key) {\n\t        return form.set(key, data[key]);\n\t      });\n\t      this._body = form;\n\t      return this;\n\t    }\n\t  }, {\n\t    key: 'save',\n\t    value: function save(name, func) {\n\t      if (!this._save) {\n\t        this._save = new Map();\n\t      }\n\t      this._save.set(name, func);\n\t      return this;\n\t    }\n\t  }, {\n\t    key: 'expect',\n\t    value: function expect(type) {\n\t      if (typeof type === 'function') {\n\t        if (!this._expect) {\n\t          this._expect = [];\n\t        }\n\t        this._expect.push(type);\n\t      } else if (typeof type === 'number') {\n\t        this._status = type;\n\t      } else if (type.indexOf('/') !== -1) {\n\t        this._responseContentType = type;\n\t      } else {\n\t        this._type = type;\n\t      }\n\t      return this;\n\t    }\n\t  }]);\n\t\n\t  return Test;\n\t}();\n\t\n\texports.default = Test;\n\n/***/ },\n/* 21 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"request-promise\");\n\n/***/ },\n/* 22 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar TestError = function TestError(test, group, collection, reason, response) {\n\t  _classCallCheck(this, TestError);\n\t\n\t  this._test = test;\n\t  this._group = group;\n\t  this._collection = collection;\n\t  this._reason = reason;\n\t  this._response = response;\n\t};\n\t\n\texports.default = TestError;\n\n/***/ },\n/* 23 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"path\");\n\n/***/ },\n/* 24 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"fs\");\n\n/***/ },\n/* 25 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"js-yaml\");\n\n/***/ }\n/******/ ]);\n\n\n/** WEBPACK FOOTER **\n ** squalus-node.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"lib/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 87dba465514bd2c53da3\n **/","import Squalus from './Squalus';\nimport TestCollection from './Automation/TestCollection';\nimport TestGroup from './Automation/TestGroup';\nimport Test from './Automation/Test';\nimport path from 'path';\nimport fs from 'fs';\nimport yaml from 'js-yaml';\n\nfunction getFiles(source, regex) {\n  const files = [];\n\n  const findChildren = (dir) =>\n    fs.readdirSync(dir).forEach(f => {\n      const child = path.join(dir, f);\n      if (fs.statSync(child).isDirectory()) {\n        findChildren(child);\n      } else if (regex.test(f)) {\n        files.push(child);\n      }\n    });\n\n  if (fs.statSync(source).isDirectory()) {\n    findChildren(source);\n  } else {\n    files.push(source);\n  }\n\n  return files;\n}\n\nclass SqualusNode extends Squalus {\n\n  static execute(typePath, collectionInstance, initialContextPath) {\n    const files = getFiles(typePath, /\\.yaml$/);\n\n    if (files.length) {\n      const types = Object.assign.apply(null,\n        files.map(file => yaml.safeLoad(fs.readFileSync(file, { encoding: 'utf8' })))\n      );\n\n      Squalus.buildTypes(types);\n    }\n\n    let context = undefined;\n    if (initialContextPath) {\n      context = JSON.parse(fs.readFileSync(initialContextPath, { encoding: 'utf8' }));\n    }\n\n    return collectionInstance.execute(context);\n  }\n}\n\nfunction collection(name, options) {\n  return new TestCollection(name, options);\n}\n\nfunction group(name) {\n  return new TestGroup(name);\n}\n\nfunction test(name) {\n  return new Test(name);\n}\n\nexport { SqualusNode as squalus, collection, group, test };\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/SqualusNode.js\n **/","import { default as $ } from './Tag';\nimport Endpoint from './Endpoint';\n\nimport BranchType from './Type/BranchType';\nimport ArrayType from './Type/ArrayType';\nimport AttributeType from './Type/AttributeType';\nimport ObjectType from './Type/ObjectType';\nimport ScalarType from './Type/ScalarType';\nimport NullableType from './Type/NullableType';\nimport MapType from './Type/MapType';\n\nimport BoolScalarType from './Type/Scalar/BoolScalarType';\nimport FloatScalarType from './Type/Scalar/FloatScalarType';\nimport IntScalarType from './Type/Scalar/IntScalarType';\nimport NullScalarType from './Type/Scalar/NullScalarType';\n\nScalarType.register('null', NullScalarType);\nScalarType.register(['int', 'uint'], IntScalarType);\nScalarType.register('float', FloatScalarType);\nScalarType.register('bool', BoolScalarType);\n\nconst registeredTypes = new Map();\n\nfunction toposort(elements, getName, getRequires) {\n  const edges = new Map();\n  const s = [];\n\n  const sources = new Map();\n  elements.forEach(elem => sources.set(getName(elem), elem));\n\n  sources.forEach(source => {\n    const requires = getRequires(source);\n    if (requires && requires.length) {\n      requires.forEach(dependency => {\n        if (!sources.has(dependency)) {\n          throw new Error(`Unknown dependency ${dependency}`);\n        }\n        if (!edges.has(dependency)) {\n          edges.set(dependency, []);\n        }\n        edges.get(dependency).push(getName(source));\n      });\n    } else {\n      s.push(source);\n    }\n  });\n\n  let parents;\n  const sorted = new Map();\n  while (s.length > 0) {\n    const nSource = s.pop();\n    const n = getName(nSource);\n    sorted.set(n, nSource);\n    if (edges.has(n)) {\n      parents = edges.get(n);\n      while (parents.length > 0) {\n        const m = parents.pop();\n        const mSource = sources.get(m);\n        const requires = getRequires(mSource);\n        if (!requires || !requires.find(d => !sorted.has(d))) {\n          s.push(mSource);\n        }\n      }\n    }\n  }\n\n  edges.forEach(value => {\n    if (value.size > 0) {\n      throw new Error('Graph cycle; unable to sort');\n    }\n  });\n\n  return sorted;\n}\n\nfunction findPreviousTokenGroupStart(tokens, i) {\n  if (tokens[i] === ')') {\n    let depth = 0;\n    for (let j = i - 1; j >= 0; j--) {\n      if (tokens[j] === ')') {\n        ++depth;\n      } else if (tokens[j] === '(') {\n        if (depth === 0) {\n          return findPreviousTokenGroupStart(tokens, j - 1);\n        }\n        --depth;\n      }\n    }\n  } else if (tokens[i] === '}') {\n    for (let j = i - 1; j >= 0; j--) {\n      if (tokens[j] === '{') {\n        return findPreviousTokenGroupStart(tokens, j - 1);\n      }\n    }\n  } else if (tokens[i] === '[]') {\n    return findPreviousTokenGroupStart(tokens, i - 1);\n  }\n\n  return i >= 0 ? i : 0;\n}\n\nfunction parseTokensFromType(type, dependenciesOnly) {\n  /*\n   * e.g.\n   *   type\n   *   type:map(Name,Value)\n   *   type1|type2|type3\n   *   type1 => type2\n   *   int{1,2,7-9}?\n   *   string?[]?\n   *   (string => int{2,4-9}|bool|string?)?[]?\n   *   type1,type2 # this only applies to inheritance\n   * todo:\n   *   content-type(image/png) && signature(89 50 4E 47 0D 0A 1A 0A)\n   */\n  const tokens = type.split(/([|{}()?:,]|&&|\\[]|=>)/).map(t => t.trim()).filter(t => t !== '');\n\n  // expand shortcuts\n  for (let i = 0; i < tokens.length; i++) {\n    if (tokens[i] === '?') {\n      const previous = findPreviousTokenGroupStart(tokens, i - 1);\n      tokens.splice(previous, 0, '(');\n      tokens.splice(i + 1, 1, '|', 'null', ')');\n      --i;\n    }\n  }\n\n  if (!dependenciesOnly) {\n    return tokens;\n  }\n\n  /*\n   * remove\n   *   |\n   *   []\n   *   {...}\n   *   :func(...)\n   */\n  const dependencies = [];\n  for (let i = 0; i < tokens.length; i++) {\n    if (tokens[i] === '{') {\n      while (tokens[i] !== '}') {\n        ++i;\n      }\n      continue;\n    } else if (tokens[i] === ':') {\n      while (tokens[i] !== ')') {\n        ++i;\n      }\n      continue;\n    } else if (['[]', '=>', '|', ',', '(', ')'].includes(tokens[i])) {\n      continue;\n    }\n    dependencies.push(tokens[i]);\n  }\n\n  return dependencies;\n}\n\nfunction buildKnownDependencies() {\n  return ScalarType.getScalarTypes().map(t => ({\n    name: t,\n    data: t,\n  }));\n}\n\nfunction parseChild(types) {\n  const dependencies = new Set();\n\n  Object.keys(types).forEach(key => {\n    const type = types[key];\n\n    if (typeof type === 'string') {\n      parseTokensFromType(type, true).forEach(t => dependencies.add(t));\n    } else {\n      parseChild(type).forEach(t => dependencies.add(t));\n    }\n  });\n\n  return dependencies;\n}\n\nfunction scopify(iter, scope) {\n  let source = iter;\n  if (typeof iter === 'string') {\n    source = [iter];\n  }\n  const result = Array.from(source, item => ((\n    item.indexOf('{') === -1 && item.indexOf('[') === -1 && item.indexOf('|') === -1 &&\n    item.indexOf('.') === -1 && !ScalarType.getScalarTypes().includes(item))\n      ? `${scope}.${item}`\n      : item)\n  );\n\n  return (typeof iter === 'string') ? result[0] : result;\n}\n\nfunction parseRoot(root) {\n  const parsed = [];\n\n  Object.keys(root).forEach(scope => {\n    Object.keys(root[scope]).forEach(name => {\n      const type = root[scope][name];\n\n      const requires = new Set();\n\n      if (typeof type === 'string') {\n        parseTokensFromType(type, true).forEach(t => requires.add(t));\n      } else {\n        parseChild(type).forEach(t => requires.add(t));\n      }\n\n      parsed.push({\n        name: scopify(name, scope),\n        requires: scopify(requires, scope),\n        data: type,\n      });\n    });\n  });\n\n  return parsed;\n}\n\nfunction createAttrFromName(name, type) {\n  return new AttributeType(name.replace(/\\?$/, ''), type.clone(), !name.endsWith('?'));\n}\n\nfunction stripOuterParens(array) {\n  if (array[0] === '(' && array[array.length - 1] === ')') {\n    array.splice(array.length - 1);\n    array.splice(0, 1);\n  }\n}\n\nfunction splitArray(array, split) {\n  stripOuterParens(array);\n\n  const chunks = [];\n  let chunk = [];\n  const stack = [];\n  array.forEach(token => {\n    if (token === '(') {\n      stack.push(true);\n      chunk.push(token);\n    } else if (token === ')') {\n      stack.pop();\n      chunk.push(token);\n    } else if (!stack.length && token === split) {\n      if (chunk.length) {\n        chunks.push(chunk);\n      }\n      chunk = [];\n    } else {\n      chunk.push(token);\n    }\n  });\n  if (chunk.length) {\n    chunks.push(chunk);\n  }\n\n  chunks.forEach(c => stripOuterParens(c));\n\n  return chunks;\n}\n\nfunction buildType(def, scope) {\n  // shortcuts\n  if (typeof def === 'boolean') {\n    def = def ? 'bool{true}' : 'bool{false}'; // eslint-disable-line no-param-reassign\n  }\n\n  // references\n  if (typeof def === 'string') {\n    const tokens = parseTokensFromType(def);\n\n    const branches = splitArray(tokens, '|');\n    if (branches.length > 1) {\n      const branchMap = new Map();\n      branches.forEach(branch => {\n        branchMap.set(branch, buildType(scopify(branch.join(''), scope)));\n      });\n      return new BranchType(branchMap);\n    }\n\n    const map = splitArray(tokens, '=>');\n    if (map.length > 1) {\n      return new MapType(buildType(map[0].join(''), scope), buildType(map[1].join(''), scope));\n    }\n\n    if (tokens[tokens.length - 1] === '?') {\n      return new NullableType(buildType(tokens.slice(0, tokens.length - 1).join(''), scope));\n    }\n\n    if (tokens[tokens.length - 1] === '[]') {\n      return new ArrayType(buildType(tokens.slice(0, tokens.length - 1).join(''), scope));\n    }\n\n    if (tokens[tokens.length - 1] === '}') {\n      return ScalarType.create(\n        tokens[tokens.indexOf('{') - 1],\n        tokens.slice(tokens.indexOf('{') + 1, tokens.length - 1).filter(t => t !== ',')\n      );\n    }\n\n    if (tokens[tokens.length - 1] === ')') {\n      const transformStart = tokens.indexOf(':');\n      const transformName = tokens[transformStart + 1];\n      const transformArgs = tokens.slice(transformStart + 3, tokens.length - 1).filter(t => t !== ',');\n\n      const transforms = {\n        map: type => {\n          const branchMap = new Map();\n          type.attributes().forEach(attr =>\n            branchMap.set(attr.name(), new ObjectType([\n              new AttributeType(transformArgs[0], ScalarType.create('string', [attr.name()]), true),\n              new AttributeType(transformArgs[1], attr.type().clone(), true),\n            ]))\n          );\n          return new BranchType(branchMap);\n        },\n      };\n      if (!transforms[transformName]) {\n        throw new Error('unsupported transform');\n      }\n      return transforms[transformName](buildType(tokens.slice(0, transformStart).join(''), scope));\n    }\n\n    const scopedName = scopify(tokens.join(''), scope);\n    if (registeredTypes.has(scopedName)) {\n      return registeredTypes.get(scopedName).clone();\n    }\n    return ScalarType.create(scopedName);\n  }\n\n  // check for inheritance\n  const attributeNames = Object.keys(def).filter(key => key !== '^');\n  const inheritanceAttr = def['^'];\n  if (inheritanceAttr) {\n    if (typeof inheritanceAttr !== 'string') {\n      throw new Error('inheritance attribute must be a string');\n    }\n\n    const parents = parseTokensFromType(inheritanceAttr).filter(t => t !== ',').map(parent =>\n      registeredTypes.get(scopify(parent, scope))\n    );\n\n    if (parents.length === 1 && parents[0] instanceof BranchType) {\n      const parent = parents[0];\n      if (!Array.from(parent.types.values()).every(branchType => branchType instanceof Object)) {\n        throw new Error('inheritance from branch with non-object');\n      }\n      // create inherited version of each object and re-aggregate\n      const inheritedTypes = new Map();\n      parent.types.forEach((branchType, key) => {\n        const builder = (t, k) => {\n          // add attributes to each branch\n          const attributes = new Map();\n          t.attributes().forEach(attr => {\n            attributes.set(attr.name(), attr.clone());\n          });\n          attributeNames.forEach(attr =>\n            attributes.set(attr.trim('?'), createAttrFromName(attr, buildType(def[attr], scope)))\n          );\n          inheritedTypes.set(k, new ObjectType(Array.from(attributes.values())));\n        };\n\n        if (branchType instanceof BranchType) {\n          branchType.types.forEach((t, k) => builder(t, `${key}-${k}`));\n        } else {\n          builder(branchType, key);\n        }\n      });\n      return new BranchType(inheritedTypes);\n    } else if (parents.every(parent => parent instanceof ObjectType)) {\n      // simple inheritance\n      const attributes = new Map();\n      parents.forEach(parent => {\n        parent.attributes().forEach(parentAttr => {\n          attributes.set(parentAttr, parentAttr.clone());\n        });\n      });\n      attributeNames.forEach(attr =>\n        attributes.set(attr.trim('?'), createAttrFromName(attr, buildType(def[attr], scope)))\n      );\n      return new ObjectType(Array.from(attributes.values()));\n    }\n\n    throw new Error('invalid parent type');\n  }\n\n  // no inheritance\n  return new ObjectType(attributeNames.map(attr => createAttrFromName(attr, buildType(def[attr], scope))));\n}\n\nexport default class Squalus {\n\n  static getType(name) {\n    return registeredTypes.get(name);\n  }\n\n  static buildTypes(root) {\n    // check names and dependencies\n    const dependencies = buildKnownDependencies().concat(parseRoot(root));\n    const sorted = toposort(dependencies, d => d.name, d => d.requires);\n\n    sorted.forEach((type, name) => {\n      const scope = name.indexOf('.') ? name.substring(0, name.indexOf('.')) : null;\n      registeredTypes.set(name, buildType(type.data, scope));\n    });\n  }\n\n  static buildTests(tests, root) {\n    const ul = root.appendChild($('ul', { class: 'api-tests' }));\n\n    tests.forEach(test => {\n      const params = new Map();\n      if (test.params) {\n        Object.keys(test.params).forEach(key => {\n          params.set(key, buildType(test.params[key]));\n        });\n      }\n      const def = new Endpoint(test.url, test.method, params, test.data ? buildType(test.data) : null);\n      ul.appendChild($('li', def.build()));\n    });\n\n    const events = {\n      change: {\n        'select.test-option': BranchType.onChange,\n      },\n      click: {\n        '.test-row-add': ArrayType.onClickAdd,\n        '.test-row-remove': ArrayType.onClickRemove,\n        '.test-attr-toggle': AttributeType.onClickToggle,\n        '.test-edit': Endpoint.onEdit,\n        '.test-submit': Endpoint.onSubmit,\n      },\n      keypress: {\n        'input[type=text],input[type=checkbox],select': Endpoint.onKeyPress,\n      },\n    };\n\n    // handle events\n    Object.keys(events).forEach(type => {\n      root.addEventListener(type, e => {\n        if (e.target) {\n          const def = Endpoint.closest(e.target);\n          if (def) {\n            Object.keys(events[type]).forEach(selector => {\n              if (e.target.matches(selector)) {\n                const func = events[type][selector];\n                func(e, def);\n              }\n            });\n          }\n        }\n      });\n    });\n\n    BranchType.initializeSelectionStates(root);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Squalus.js\n **/","\r\nfunction isObject(obj) {\r\n  return obj === Object(obj) && !Array.isArray(obj);\r\n}\r\n\r\nfunction appendNode(element, content) {\r\n  if (content && content.nodeType) {\r\n    element.appendChild(content);\r\n  } else {\r\n    const div = document.createElement('div');\r\n    div.innerHTML = (content === undefined) ? '' : content;\r\n\r\n    while (div.firstChild) {\r\n      element.appendChild(div.firstChild);\r\n    }\r\n  }\r\n}\r\n\r\n// (tagName, attributes?, children?, children?)\r\nexport default function (tagName, ...args) {\r\n  const attributes = (args.length && isObject(args[0]) && !args[0].nodeType) ? args[0] : {};\r\n  const children = args.slice((args[0] === attributes) ? 1 : 0);\r\n\r\n  const elem = document.createElement(tagName);\r\n\r\n  Object.keys(attributes).forEach(name => {\r\n    if (name.startsWith('data-')) {\r\n      elem.dataset[name.substr(5)] = attributes[name];\r\n    } else if (name.startsWith('_')) {\r\n      elem[name] = attributes[name];\r\n    } else {\r\n      elem.setAttribute(name, attributes[name]);\r\n    }\r\n  });\r\n\r\n  children.forEach((child) => {\r\n    if (Array.isArray(child)) {\r\n      child.forEach((c) => {\r\n        appendNode(elem, c);\r\n      });\r\n    } else {\r\n      appendNode(elem, child);\r\n    }\r\n  });\r\n\r\n  return elem;\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Tag.js\n **/","import { default as $ } from './Tag';\r\nimport Result from './Result';\r\n\r\nfunction closestAncestorByClassName(elem, className) {\r\n  let e = elem.parentNode;\r\n  while (e) {\r\n    if (e.classList && e.classList.contains(className)) {\r\n      return e;\r\n    }\r\n    e = e.parentNode;\r\n  }\r\n  return null;\r\n}\r\n\r\nfunction convertValueToParam(val, key, query) {\r\n  if (Array.isArray(val)) {\r\n    val.forEach((item, i) =>\r\n      convertValueToParam(item, `${key}[${i}]`, query)\r\n    );\r\n  } else if (typeof val === 'object') {\r\n    Object.keys(val).forEach((name) =>\r\n      convertValueToParam(val[name], `${key}[${name}]`, query)\r\n    );\r\n  } else if (typeof val === 'boolean') {\r\n    query.set(key, encodeURI(val ? 1 : 0));\r\n  } else {\r\n    query.set(key, encodeURI(val));\r\n  }\r\n}\r\n\r\nexport default class Endpoint {\r\n\r\n  constructor(url, method, params, type) {\r\n    this._url = url;\r\n    this._method = method;\r\n    this._params = (params && params.size) ? params : null;\r\n    this._type = type;\r\n\r\n    this._node = null;\r\n  }\r\n\r\n  updateSingleParam(data) {\r\n    if (this._params) {\r\n      if (data.Id) {\r\n        this._node.querySelector('.test-param')._squalusType.populate(data.Id);\r\n      }\r\n    }\r\n  }\r\n\r\n  value() {\r\n    if (!this._type) {\r\n      return null;\r\n    }\r\n    return this._type.value();\r\n  }\r\n\r\n  populate(data, types) {\r\n    this._type.populate(data, 'body', types);\r\n  }\r\n\r\n  clear() {\r\n    this._type.clear();\r\n  }\r\n\r\n  lock() {\r\n    // this causes problems with the \"edit\" populate\r\n    // this._body.find('*').prop('disabled', true);\r\n  }\r\n\r\n  unlock() {\r\n    // this._body.find('*').prop('disabled', false);\r\n  }\r\n\r\n  getPopulatedUrl() {\r\n    const query = new Map();\r\n    let url = this._url;\r\n    if (this._params) {\r\n      Array.from(this._node.querySelectorAll('.test-param')).forEach(param => {\r\n        const key = param.dataset.name;\r\n        const keyPlaceholder = `{${key}}`;\r\n        const val = param._squalusType.value();\r\n        if (url.indexOf(keyPlaceholder) === -1) {\r\n          if (val !== null && val !== '') {\r\n            convertValueToParam(val, key, query);\r\n          }\r\n        } else {\r\n          url = url.replace(keyPlaceholder, encodeURI(val));\r\n        }\r\n      });\r\n    }\r\n\r\n    url = new URL(url, window.location.href);\r\n    query.forEach((value, key) => url.searchParams.append(key, value));\r\n\r\n    return url;\r\n  }\r\n\r\n  build() {\r\n    this._node = $('div', { class: `endpoint endpoint-method-${this._method.toLowerCase()}`, _squalusDef: this },\r\n      $('div', { class: 'endpoint-header' },\r\n        $('span', { class: 'endpoint-method' }, this._method),\r\n        $('span', { class: 'endpoint-url' }, this._url)\r\n      )\r\n    );\r\n\r\n    const test = this._node.appendChild($('div', { class: 'endpoint-test' }));\r\n\r\n    if (this._params) {\r\n      const names = this._url.match(/{[^}\\s]+}/g).map(m => m.substr(1, m.length - 2));\r\n\r\n      if (this._params.size > names.length) {\r\n        names.prototype.push.apply(names, Array.from(this._params.keys()).filter(p => !names.includes(p)));\r\n      }\r\n\r\n      const params = test.appendChild($('div', { class: 'endpoint-test-params' },\r\n        $('div', { class: 'endpoint-test-label' }, 'params')\r\n      ));\r\n      params.appendChild($('table',\r\n        $('tbody',\r\n          names.map(param => {\r\n            const type = this._params.get(param);\r\n            if (type === undefined) {\r\n              throw new Error('required param type not specified');\r\n            }\r\n            return $('tr', { class: 'test-param', 'data-name': param, _squalusType: type },\r\n              $('th', param),\r\n              $('td', type.build())\r\n            );\r\n          })\r\n        )\r\n      ));\r\n      if (this._method === 'PUT') {\r\n        test.appendChild($('div', { class: 'endpoint-test-controls' },\r\n          $('input', { type: 'button', value: 'EDIT', class: 'test-edit' }),\r\n          $('span', { class: 'endpoint-test-status test-edit-status' })\r\n        ));\r\n      }\r\n    }\r\n\r\n    if (this._type) {\r\n      test.appendChild($('div', { class: 'endpoint-test-body' },\r\n        $('div', { class: 'endpoint-test-label' }, 'body'),\r\n        this._type.build())\r\n      );\r\n    }\r\n\r\n    test.appendChild($('div', { class: 'endpoint-test-controls' },\r\n      $('input', { type: 'button', value: this._method, class: 'test-submit' }),\r\n      $('span', { class: 'endpoint-test-status' })\r\n    ));\r\n\r\n    return this._node;\r\n  }\r\n\r\n  submit() {\r\n    // todo: trap parse errors\r\n    const url = this.getPopulatedUrl();\r\n    const value = JSON.stringify(this.value());\r\n\r\n    const options = {\r\n      method: this._method,\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n    };\r\n    if (['PUT', 'POST', 'PATCH'].includes(this._method)) {\r\n      options.body = value;\r\n    }\r\n\r\n    fetch(url, options).then(res => {\r\n      new Result(url, res).parse();\r\n    }).catch(error => {\r\n      new Result(url, error).parse();\r\n    });\r\n  }\r\n\r\n  edit() {\r\n    const url = this.getPopulatedUrl();\r\n    const status = this._node.querySelector('.test-edit-status');\r\n\r\n    status.textContent = '';\r\n\r\n    this.clear();\r\n    this.lock();\r\n\r\n    fetch(url).then(res => {\r\n      // testing\r\n      // const json = {\r\n      //   IntervalUnit: 'monthly',\r\n      //   IntervalOffset: 15,\r\n      //   TemplateId: 4,\r\n      //   Id: 3990,\r\n      // };\r\n\r\n      if (!res.ok) {\r\n        status.textContent = 'something went wrong';\r\n        this.unlock();\r\n        return;\r\n      }\r\n\r\n      res.json().then(json => {\r\n        let data = json;\r\n        // todo: this is going to require the actual validation implementation to handle branching\r\n\r\n        // if data is array, edit the first one (for convenience, to support shared id/search path)\r\n        if (Array.isArray(data)) {\r\n          if (data.length && this._params && this._params.size === 1) {\r\n            status.textContent = `Loaded first record (${data.length} total)`;\r\n            data = data[0];\r\n            this.updateSingleParam(data);\r\n          } else {\r\n            data = null;\r\n          }\r\n        }\r\n        if (data) {\r\n          this.populate(data);\r\n        } else {\r\n          status.textContent = 'No match for pattern';\r\n        }\r\n\r\n        this.unlock();\r\n      });\r\n    }).catch(error => {\r\n      status.textContent = error.message;\r\n      this.unlock();\r\n    });\r\n  }\r\n\r\n  static onKeyPress(event, def) {\r\n    if (event.which === 13) {\r\n      event.preventDefault();\r\n      (def || this.closest(event.target)).submit();\r\n    }\r\n  }\r\n\r\n  static onSubmit(event, def) {\r\n    (def || this.closest(event.target)).submit();\r\n  }\r\n\r\n  static onEdit(event, def) {\r\n    (def || this.closest(event.target)).edit();\r\n  }\r\n\r\n  static closest(elem) {\r\n    const node = closestAncestorByClassName(elem, 'endpoint');\r\n    return node ? node._squalusDef : null;\r\n  }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Endpoint.js\n **/","\r\nexport default class Result {\r\n\r\n  constructor(relativeUrl, response) {\r\n    this._relativeUrl = relativeUrl;\r\n    this._response = response;\r\n  }\r\n\r\n  parse() {\r\n    if (this._response instanceof Response) {\r\n      if (this._response.ok) {\r\n        //\r\n      } else {\r\n        //\r\n      }\r\n    } else {\r\n      console.log(this._response.message);\r\n    }\r\n  }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Result.js\n **/","import { default as $ } from './../Tag';\r\n\r\nexport default class BranchType {\r\n\r\n  constructor(types) {\r\n    this._types = types;\r\n    this._node = null;\r\n\r\n    if (types.size < 2) {\r\n      throw new Error('degenerate branch type');\r\n    }\r\n  }\r\n\r\n  get types() {\r\n    return this._types;\r\n  }\r\n\r\n  clone() {\r\n    const types = new Map();\r\n    this._types.forEach((type, key) => types.set(key, type.clone()));\r\n    return new this.constructor(types);\r\n  }\r\n\r\n  build() {\r\n    this._node = $('div', { _squalusType: this },\r\n      $('select', { class: 'test-option' },\r\n        Array.from(this._types.keys(), key => $('option', key))\r\n      ),\r\n      Array.from(this._types.values(), value => $('div', { class: 'test-option' }, value.build()))\r\n    );\r\n    return this._node;\r\n  }\r\n\r\n  value() {\r\n    return Array.from(this._types.values())[this._node.firstElementChild.selectedIndex].value();\r\n  }\r\n\r\n  populate(data) {\r\n    // validate data to determine branch\r\n    const types = Array.from(this._types.values());\r\n    const i = types.findIndex(type =>\r\n      type.validate(data, '', true)\r\n    );\r\n\r\n    if (i === -1) {\r\n      throw new Error('branch validation failed');\r\n    }\r\n\r\n    const select = this._node.firstElementChild;\r\n    select.selectedIndex = i;\r\n\r\n    const event = new Event('change', { bubbles: true });\r\n    select.dispatchEvent(event);\r\n\r\n    types[i].populate(data);\r\n  }\r\n\r\n  validate(value, path, returnOnly) {\r\n    if (!Array.from(this._types.values()).some(type => type.validate(value, path, true))) {\r\n      if (returnOnly) {\r\n        return false;\r\n      }\r\n      throw new Error(`${path} does not match any candidate`);\r\n    }\r\n    return true;\r\n  }\r\n\r\n  clear() {\r\n    this._types.forEach(type => type.clear());\r\n  }\r\n\r\n  static onChange(event) {\r\n    let node = event.target;\r\n    let i = 0;\r\n    while (node.nextElementSibling) {\r\n      node = node.nextElementSibling;\r\n      node.classList.toggle('test-hidden', i++ !== event.target.selectedIndex);\r\n    }\r\n  }\r\n\r\n  static initializeSelectionStates(root) {\r\n    Array.from(root.querySelectorAll('select')).forEach(elem => {\r\n      const event = new Event('change', { bubbles: true });\r\n      elem.dispatchEvent(event);\r\n    });\r\n  }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Type/BranchType.js\n **/","import { default as $ } from './../Tag';\nimport BranchType from './BranchType';\n\nexport default class ArrayType {\n\n  constructor(type) {\n    this._type = type;\n    this._rows = [];\n    this._node = null;\n    this._body = null;\n  }\n\n  name() {\n    return `${this._type.name()}[]`;\n  }\n\n  clone() {\n    return new this.constructor(this._type.clone());\n  }\n\n  build() {\n    this._node = $('div', { _squalusType: this },\n      $('table',\n        this._body = $('tbody'),\n        $('tfoot',\n          $('th', $('input', { type: 'button', class: 'test-row-add', value: '+' })),\n          $('th'),\n          $('td')\n        )\n      )\n    );\n    return this._node;\n  }\n\n  populate(data, path, types) {\n    for (let i = 0; i < data.length; i++) {\n      const row = this.add();\n      row.populate(data[i], `${path}[${i}]`, types);\n    }\n  }\n\n  validate(value, path, returnOnly) {\n    if (!Array.isArray(value)) {\n      if (returnOnly) {\n        return false;\n      }\n      throw new Error(`${path} must be an array`);\n    }\n\n    return value.every((item, i) => this._type.validate(item, `${path}[${i}]`, returnOnly));\n  }\n\n  value() {\n    return this._rows.map((val) => val.value());\n  }\n\n  clear() {\n    this._rows = [];\n    this._body.innerHTML = '';\n  }\n\n  add() {\n    const clone = this._type.clone();\n    this._rows.push(clone);\n    this._body.appendChild($('tr',\n      $('th', $('input', { type: 'button', class: 'test-row-remove', value: '-' })),\n      $('th', `[${this._body.children.length}]`),\n      $('td', clone.build())\n    ));\n    BranchType.initializeSelectionStates(this._body.lastElementChild);\n    return clone;\n  }\n\n  remove(i) {\n    this._rows.splice(i, 1);\n    this._body.children[i].remove();\n\n    for (let j = i; j < this._body.children.length; j++) {\n      this._body.children[j].children[1].textContent = `[${j}]`;\n    }\n  }\n\n  static onClickAdd(event) {\n    event.target.parentNode.parentNode.parentNode.parentNode._squalusType.add();\n  }\n\n  static onClickRemove(event) {\n    const row = event.target.parentNode.parentNode;\n    const i = Array.prototype.indexOf.call(row.parentNode.children, row);\n    row.parentNode.parentNode.parentNode._squalusType.remove(i);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Type/ArrayType.js\n **/","import { default as $ } from './../Tag';\n\nexport default class AttributeType {\n\n  constructor(name, type, required) {\n    this._name = name;\n    this._type = type;\n    this._required = required;\n    this._included = false;\n\n    if (this._name.endsWith('?')) {\n      console.log(this);\n    }\n  }\n\n  name() {\n    return this._name;\n  }\n\n  type() {\n    return this._type;\n  }\n\n  required() {\n    return this._required;\n  }\n\n  included() {\n    return this._included;\n  }\n\n  clone() {\n    return new this.constructor(this._name, this._type.clone(), this._required);\n  }\n\n  build() {\n    this._node = $('tr', { _squalusType: this },\n      $('th'),\n      $('th', this._name),\n      $('td', this._type.build())\n    );\n    if (!this._required) {\n      this._node.firstElementChild.appendChild(\n        $('input', { type: 'button', class: 'test-attr-toggle', value: '\\uD83D\\uDCCE' })\n      );\n    }\n    this.update();\n    return this._node;\n  }\n\n  value() {\n    return this._type.value();\n  }\n\n  populate(data, path, types) {\n    this._type.populate(data, `${path}.${this._name}`, types);\n    this._included = true;\n    this.update();\n  }\n\n  validate(value, path, returnOnly) {\n    return this._type.validate(value, path, returnOnly);\n  }\n\n  clear() {\n    this._type.clear();\n    this._included = false;\n    this.update();\n  }\n\n  toggle() {\n    this._included = !this._included;\n    this.update();\n  }\n\n  update() {\n    if (!this._required) {\n      this._node.children[0].firstElementChild.classList.toggle('test-attr-included', this._included);\n      this._node.children[1].classList.toggle('test-attr-toggle', !this._included);\n      this._node.children[2].firstElementChild.classList.toggle('test-hidden', !this._included);\n    }\n  }\n\n  static onClickToggle(event) {\n    event.target.parentNode.parentNode._squalusType.toggle();\n  }\n}\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Type/AttributeType.js\n **/","import { default as $ } from './../Tag';\n\nexport default class ObjectType {\n\n  constructor(attributes) {\n    this._attributes = attributes;\n    this._node = null;\n  }\n\n  attributes() {\n    return this._attributes;\n  }\n\n  clone() {\n    return new this.constructor(this._attributes.map(attr => attr.clone()));\n  }\n\n  build() {\n    this._node = $('table', { _squalusType: this },\n      $('tbody',\n        this._attributes.map(type => type.build())\n      )\n    );\n    return this._node;\n  }\n\n  value() {\n    const data = {};\n    this._attributes.forEach((attr) => {\n      if (attr.required() || attr.included()) {\n        data[attr.name()] = attr.value();\n      }\n    });\n    return data;\n  }\n\n  populate(data, path, types) {\n    this._attributes.forEach(attr => {\n      attr.populate(data[attr.name()], path, types);\n    });\n  }\n\n  validate(value, path, returnOnly) {\n    // todo: filter/warn on unrecognized attributes\n\n    if (typeof value !== 'object') {\n      if (returnOnly) {\n        return false;\n      }\n      throw new Error(`${path} must be an object`);\n    }\n\n    for (let i = 0; i < this._attributes.length; i++) {\n      const attr = this._attributes[i];\n      const key = attr.name();\n\n      if (value[key] === undefined) {\n        if (attr.required()) {\n          if (returnOnly) {\n            return false;\n          }\n          throw new Error(`${path}.${key} is required`);\n        }\n      } else if (!attr.validate(value[key], `${path}.${key}`, returnOnly)) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  clear() {\n    this._attributes.forEach(attr => attr.clear());\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Type/ObjectType.js\n **/","import { default as $ } from './../Tag';\n\nconst implementations = new Map();\n[\n  'null',\n  'int',\n  'uint',\n  'float',\n  'string',\n  'bool',\n  'date',\n  'datetime',\n  'timestamp',\n  'guid',\n].forEach(type => implementations.set(type, null));\n\nexport default class ScalarType {\n\n  constructor(type, values) {\n    this._type = type;\n    this._values = this._parse(values);\n    this._node = null;\n  }\n\n  get name() {\n    return this._type;\n  }\n\n  clone() {\n    return new this.constructor(this._type, this._values);\n  }\n\n  supportsValues() {\n    return true;\n  }\n\n  _parse(values) {\n    return values;\n  }\n\n  _build() {\n    if (this._values) {\n      if (this._values.length === 1) {\n        return $('input', { type: 'text', disabled: true, value: this._values[0] });\n      }\n      return $('select',\n        this._values.map(v => $('option', v))\n      );\n    }\n    return $('input', { type: 'text', placeholder: this._type });\n  }\n\n  build() {\n    this._node = this._build();\n    this._node._squalusType = this;\n    return this._node;\n  }\n\n  value() {\n    return this._node.value;\n  }\n\n  populate(data) {\n    this._node.value = data;\n  }\n\n  _validate(value) {\n    return typeof value === 'string';\n  }\n\n  validate(value, path, silent) {\n    if (!this._validate(value, path, silent)) {\n      if (silent) {\n        return false;\n      }\n      throw new Error(`${path} must be of type ${this._type}`);\n    }\n\n    if (this._values && !this._values.includes(value)) {\n      if (silent) {\n        return false;\n      }\n      throw new Error(`${path}: '${value}' must be in [${this._values.join(', ')}]`);\n    }\n\n    return true;\n  }\n\n  clear() {\n    if (this._values) {\n      if (this._node.selectedIndex !== undefined) {\n        this._node.selectedIndex = 0;\n      }\n    } else {\n      this._node.value = '';\n    }\n  }\n\n  static register(type, implementation) {\n    if (Array.isArray(type)) {\n      type.forEach(t => implementations.set(t, implementation));\n    } else {\n      implementations.set(type, implementation);\n    }\n  }\n\n  static create(type, values) {\n    return new (implementations.get(type) || ScalarType)(type, values);\n  }\n\n  static getScalarTypes() {\n    return Array.from(implementations.keys());\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Type/ScalarType.js\n **/","export default class NullableType {\r\n\r\n  constructor(type) {\r\n    this._type = type;\r\n  }\r\n\r\n  name() {\r\n    return this._type.name();\r\n  }\r\n\r\n  build() {\r\n    return this._type.build();\r\n  }\r\n\r\n  clone() {\r\n    return new this.constructor(this._type.clone());\r\n  }\r\n\r\n  value() {\r\n    let val = this._type.value();\r\n    if (val === '') {\r\n      val = null;\r\n    }\r\n    return val;\r\n  }\r\n\r\n  validate(value, path, returnOnly) {\r\n    return (value === null) || this._type.validate(value, path, returnOnly);\r\n  }\r\n\r\n  populate(data, path, types) {\r\n    this._type.populate(data, path, types);\r\n  }\r\n\r\n  clear() {\r\n    this._type.clear();\r\n  }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Type/NullableType.js\n **/","import { default as $ } from './../Tag';\r\nimport BranchType from './BranchType';\r\n\r\nexport default class MapType {\r\n\r\n  constructor(key, type, required) {\r\n    this._type = type;\r\n    this._key = key;\r\n    this._required = required;\r\n    this._rows = [];\r\n    this._node = null;\r\n    this._body = null;\r\n  }\r\n\r\n  name() {\r\n    return `${this._type.name()}{}`;\r\n  }\r\n\r\n  clone() {\r\n    return new this.constructor(this._key.clone(), this._type.clone(), this._required ? this._required.clone() : null);\r\n  }\r\n\r\n  build() {\r\n    this._node = $('div', { _squalusType: this },\r\n      $('table',\r\n        this._body = $('tbody'),\r\n        $('tfoot',\r\n          $('th', $('input', { type: 'button', class: 'test-row-add', value: '+' })),\r\n          $('th'),\r\n          $('td')\r\n        )\r\n      )\r\n    );\r\n    if (this._required) {\r\n      this._required.attributes().forEach((attr) => {\r\n        this.add(attr.type(), attr.name());\r\n      });\r\n    }\r\n    return this._node;\r\n  }\r\n\r\n  populate(data, path, types) {\r\n    Object.keys(data).forEach((key, i) => {\r\n      const row = this.add();\r\n      this._body.children[i].firstElementChild.textContent = key;\r\n      row.populate(data[key], `${path}[${key}]`, types);\r\n    });\r\n  }\r\n\r\n  validate(value, path, returnOnly) {\r\n    if (typeof value !== 'object') {\r\n      if (returnOnly) {\r\n        return false;\r\n      }\r\n      throw new Error(`${path} must be an object`);\r\n    }\r\n\r\n    const keys = Object.keys(value);\r\n    for (let i = 0; i < keys.length; i++) {\r\n      const key = keys[i];\r\n\r\n      if (!this._key.validate(key, `${path}[${key}]*`, returnOnly)) {\r\n        return false;\r\n      }\r\n\r\n      if (!this._type.validate(value[key], `${path}[${key}]`, returnOnly)) {\r\n        return false;\r\n      }\r\n    }\r\n\r\n    if (this._required) {\r\n      if (!this._type.validate(value, path, returnOnly)) {\r\n        return false;\r\n      }\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  value() {\r\n    const obj = {};\r\n    this._rows.forEach((row, i) => {\r\n      const key = this._body.children[i].children[1].firstElementChild.value;\r\n      obj[key] = row.value();\r\n    });\r\n    return obj;\r\n  }\r\n\r\n  clear() {\r\n    this._rows = [];\r\n    this._body.innerHTML = '';\r\n  }\r\n\r\n  add(type, key) {\r\n    const clone = type || this._type.clone();\r\n    this._rows.push(clone);\r\n    const keyField = this._key ? this._key.build() : $('input', { type: 'text', placeholder: 'key' });\r\n    if (key) {\r\n      keyField.value = key;\r\n    }\r\n    this._body.appendChild($('tr',\r\n        $('th', $('input', { type: 'button', class: 'test-row-remove', value: '-' })),\r\n        $('th', keyField),\r\n        $('td', clone.build())\r\n      ));\r\n    BranchType.initializeSelectionStates(this._body.lastElementChild);\r\n    return clone;\r\n  }\r\n\r\n  remove(i) {\r\n    this._rows.splice(i, 1);\r\n    this._body.children[i].remove();\r\n  }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Type/MapType.js\n **/","import { default as $ } from './../../Tag';\r\nimport ScalarType from './../ScalarType';\r\n\r\nexport default class BoolScalarType extends ScalarType {\r\n\r\n  _parse(values) {\r\n    return values ? values.map(v => v === true || v === 'true') : null;\r\n  }\r\n\r\n  _build() {\r\n    return $('input', { type: 'checkbox' });\r\n  }\r\n\r\n  _validate(value) {\r\n    return typeof value === 'boolean';\r\n  }\r\n\r\n  value() {\r\n    return this._node.checked;\r\n  }\r\n\r\n  populate(data) {\r\n    this._node.checked = data;\r\n  }\r\n\r\n  clear() {\r\n    this._node.checked = false;\r\n  }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Type/Scalar/BoolScalarType.js\n **/","import ScalarType from './../ScalarType';\r\n\r\nexport default class FloatScalarType extends ScalarType {\r\n\r\n  _parse(values) {\r\n    return values ? values.map(v => parseFloat(v)) : null;\r\n  }\r\n\r\n  _validate(value) {\r\n    return typeof value === 'number';\r\n  }\r\n\r\n  value() {\r\n    return parseFloat(this._node.value);\r\n  }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Type/Scalar/FloatScalarType.js\n **/","import ScalarType from './../ScalarType';\r\n\r\nexport default class IntScalarType extends ScalarType {\r\n\r\n  constructor(type, values) {\r\n    super(type, values);\r\n    this._validator = null;\r\n  }\r\n\r\n  _parse(values) {\r\n    if (!values) {\r\n      return null;\r\n    }\r\n\r\n    const parsed = values.reduce((previous, current) => {\r\n      if (typeof current === 'number') {\r\n        if ((current | 0) !== current) {\r\n          throw new Error('not an int');\r\n        }\r\n        previous.push(current);\r\n      } else if (current.indexOf('-') !== -1) {\r\n        const parts = current.split('-');\r\n        const start = parseInt(parts[0], 10);\r\n        const end = parseInt(parts[1], 10);\r\n        previous.push([start, end]);\r\n      } else {\r\n        previous.push(parseInt(current, 10));\r\n      }\r\n      return previous;\r\n    }, []);\r\n\r\n    const ranges = parsed.filter(p => Array.isArray(p));\r\n\r\n    if (!ranges.length) {\r\n      return parsed.sort((a, b) => a - b);\r\n    }\r\n\r\n    const fixed = parsed.filter(p => !Array.isArray(p));\r\n\r\n    const rangeSize = ranges.reduce((previous, current) => previous + (current[1] - current[0]), 0);\r\n\r\n    // if the ranges are small enough, just enumerate them\r\n    if (rangeSize + fixed.length <= 100) {\r\n      ranges.forEach(r => {\r\n        for (let i = r[0]; i <= r[1]; i++) {\r\n          fixed.push(i);\r\n        }\r\n      });\r\n      return fixed.sort((a, b) => a - b);\r\n    }\r\n\r\n    this._validator = (value) => fixed.includes(value) || ranges.some(r => r[0] <= value && value >= r[1]);\r\n\r\n    return null;\r\n  }\r\n\r\n  _validate(value) {\r\n    return typeof value === 'number' && (value | 0) === value;\r\n  }\r\n\r\n  value() {\r\n    return parseInt(this._node.value, 10);\r\n  }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Type/Scalar/IntScalarType.js\n **/","import ScalarType from './../ScalarType';\r\n\r\nexport default class NullScalarType extends ScalarType {\r\n\r\n  supportsValues() {\r\n    return false;\r\n  }\r\n\r\n  _build() {\r\n    return document.createTextNode('');\r\n  }\r\n\r\n  _validate(value) {\r\n    return value === null;\r\n  }\r\n\r\n  value() {\r\n    return null;\r\n  }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Type/Scalar/NullScalarType.js\n **/","/* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"^colors$\" }] */\n\nimport colors from 'colors';\nimport http from 'http';\n\nexport default class TestCollection {\n\n  constructor(name, options) {\n    this._name = name;\n    this._groups = null;\n    this._cancel = false;\n    this._pool = new http.Agent();\n\n    if (options) {\n      if (options.maxSockets) {\n        this._pool.maxSockets = options.maxSockets;\n      }\n    }\n  }\n\n  groups(groups) {\n    this._groups = groups;\n    return this;\n  }\n\n  getMaxGroupNameLength() {\n    if (this._groups && !this._maxGroupNameLength) {\n      this._maxGroupNameLength = this._groups.reduce((a, b) => (a._name.length > b._name.length ? a : b))._name.length;\n    }\n    return this._maxGroupNameLength;\n  }\n\n  execute(initial) {\n    const root = Promise.resolve();\n    const context = new Map();\n    if (initial) {\n      Object.keys(initial).forEach(k => context.set(k, initial[k]));\n    }\n\n    const testCount = this._groups.reduce((a, b) => a + b._tests.length, 0);\n\n    console.log();\n    console.log(`  collection [${this._name.green}]`);\n    console.log();\n\n    return Promise.all(this._groups.map(g => g.execute(context, this, root))).then(() => {\n      console.log();\n      console.log(`  ${testCount} passing`.green);\n      console.log();\n    }).catch(error => {\n      if (this._cancel) {\n        return;\n      }\n\n      this._cancel = true;\n\n      if (!error._test) {\n        console.log(error);\n        return;\n      }\n\n      let body = error._response.body;\n\n      if (error._response.statusCode === 500) {\n        const contentType = error._response.headers['content-type'];\n        if (contentType && contentType.split(';')[0].trim() === 'text/html') {\n          if (/<span><H1>Server Error in/i.test(body)) {\n            // ASP.NET unhandled error trace\n            body = body.replace(/^[\\s\\S]*<!--([\\s\\S]*)-->\\s*$/, '$1');\n          }\n        }\n      }\n\n      const info = {\n        reason: error._reason,\n        group: error._group._name,\n        test: error._test._name,\n        href: error._response.request.uri.href,\n        method: error._response.request.method.toUpperCase(),\n        body: error._response.request.body,\n        response: body,\n        context: JSON.stringify(context),\n      };\n      const maxInfoNameLength = Object.keys(info).reduce((a, b) => (Math.max(a, b.length)), 0);\n\n      console.log();\n      console.log('  failed'.red);\n      console.log();\n      Object.keys(info).forEach(k => console.log('    %s%s : %s',\n        k.yellow,\n        ' '.repeat(maxInfoNameLength - k.length),\n        info[k])\n      );\n      console.log();\n    });\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Automation/TestCollection.js\n **/","module.exports = require(\"colors\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"colors\"\n ** module id = 17\n ** module chunks = 0\n **/","module.exports = require(\"http\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"http\"\n ** module id = 18\n ** module chunks = 0\n **/","\r\nexport default class TestGroup {\r\n\r\n  constructor(name) {\r\n    this._name = name;\r\n    this._requires = null;\r\n    this._parallel = false;\r\n    this._session = null;\r\n    this._tests = null;\r\n    this._promise = null;\r\n  }\r\n\r\n  requires(groups) {\r\n    this._requires = Array.isArray(groups) ? groups : [groups];\r\n    return this;\r\n  }\r\n\r\n  parallel() {\r\n    this._parallel = true;\r\n    return this;\r\n  }\r\n\r\n  session(name) {\r\n    this._session = name;\r\n    return this;\r\n  }\r\n\r\n  tests(tests) {\r\n    this._tests = tests;\r\n    return this;\r\n  }\r\n\r\n  execute(context, collection, root) {\r\n    if (!this._promise) {\r\n      let when = root;\r\n      if (this._requires) {\r\n        when = Promise.all(this._requires.map(g => g.execute(root, context)));\r\n      }\r\n      this._promise = new Promise((resolve, reject) => {\r\n        if (this._parallel) {\r\n          when.then(() => {\r\n            Promise.all(this._tests.map(t => t.execute(context, this, collection))).then(resolve, reject);\r\n          });\r\n        } else {\r\n          const tests = this._tests.slice().reverse();\r\n\r\n          const onResolve = () => {\r\n            if (tests.length) {\r\n              tests.pop().execute(context, this, collection).then(onResolve, reject);\r\n            } else {\r\n              resolve();\r\n            }\r\n          };\r\n\r\n          when.then(onResolve, reject);\r\n        }\r\n      });\r\n    }\r\n    return this._promise;\r\n  }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Automation/TestGroup.js\n **/","/* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"^colors$\" }] */\n\nimport Squalus from '../Squalus';\nimport rp from 'request-promise';\nimport colors from 'colors';\nimport TestError from './TestError';\n\nfunction padRight(str, width, char = ' ') {\n  if (str.length < width) {\n    return str + char.repeat(width - str.length);\n  }\n  return str;\n}\n\nconst STRIP_COMMENTS = /((\\/\\/.*$)|(\\/\\*[\\s\\S]*?\\*\\/))/mg;\nconst ARGUMENT_NAMES = /([^\\s,]+)/g;\nfunction getParamNames(func) {\n  const fnStr = func.toString().replace(STRIP_COMMENTS, '');\n  let result = fnStr.slice(fnStr.indexOf('(') + 1, fnStr.indexOf(')')).match(ARGUMENT_NAMES);\n  if (result === null) {\n    result = [];\n  }\n  return result;\n}\n\nfunction callFuncWithParamInjection(func, response, body, context) {\n  const sourceParams = new Map();\n  sourceParams.set('response', response);\n  sourceParams.set('body', body);\n  sourceParams.set('context', context);\n  const maps = [sourceParams];\n  Array.from(sourceParams.values()).filter(p => p instanceof Map).forEach(map => maps.push(map));\n\n  return func.apply(null, getParamNames(func).map(name => {\n    const map = maps.find(m => m.has(name));\n    if (map) {\n      return map.get(name);\n    }\n    return undefined;\n  }));\n}\n\nexport default class Test {\n\n  constructor(name) {\n    this._name = name;\n    this._method = null;\n    this._url = null;\n    this._contentType = null;\n    this._responseContentType = null;\n    this._body = null;\n    this._status = null;\n    this._type = null;\n    this._save = null;\n    this._expect = null;\n    this._promise = null;\n  }\n\n  execute(context, group, collection) {\n    if (!this._promise) {\n      let url = this._url;\n      if (typeof url === 'function') {\n        url = url(context);\n      }\n\n      const populateVariables = (m, name) => (context.has(name) ? context.get(name) : m);\n\n      url = url.replace(/[@:]([a-z0-9_]+)/gi, populateVariables);\n      url = url.replace(/{([a-z0-9_]+)}/gi, populateVariables);\n\n      const absUrl = context.get('baseUrl') + url;\n\n      let body = this._body;\n      if (typeof body === 'function') {\n        body = body(context);\n      }\n\n      const reject = (reason, response) =>\n        Promise.reject(new TestError(this, group, collection, reason, response));\n\n      const status = (response) => {\n        if (!this._status || typeof this._status !== 'number') {\n          return reject('invalid response status', response);\n        }\n        if (response.statusCode !== this._status) {\n          return reject(`response status ${response.statusCode} does not match expected ${this._status}`, response);\n        }\n        if (this._responseContentType) {\n          const contentType = (response.headers['content-type'] || '').split(';', 2)[0];\n          if (contentType !== this._responseContentType) {\n            return reject(`response content type ${contentType} does not match expected ${this._responseContentType}`,\n              response);\n          }\n        }\n        return Promise.resolve(response);\n      };\n\n      const type = (response) => {\n        if (this._type) {\n          const responseType = Squalus.getType(this._type);\n          if (!responseType) {\n            return reject(`failed to create response type ${this._type}`, response);\n          }\n          try {\n            const json = JSON.parse(response.body);\n            response.bodyJson = json;// eslint-disable-line no-param-reassign\n            responseType.validate(json, 'body');\n          } catch (e) {\n            console.log(e);\n            return reject(e, response);\n          }\n          return Promise.resolve(response);\n        }\n        return Promise.resolve(response);\n      };\n\n      const expect = (response) => {\n        if (this._expect) {\n          return Promise.all(this._expect.map((func, i) =>\n            Promise.resolve(callFuncWithParamInjection(\n              func,\n              response,\n              response.bodyJson !== undefined ? response.bodyJson : response.body,\n              context\n            )).then(passed => {\n              if (!passed) {\n                return reject(`expect test '${i}' failed`, response);\n              }\n              return Promise.resolve(response);\n            })\n          )).then(() => Promise.resolve(response));\n        }\n        return Promise.resolve(response);\n      };\n\n      const save = (response) => {\n        if (this._save) {\n          return Promise.all(Array.from(this._save.keys()).map(key =>\n            Promise.resolve(\n              callFuncWithParamInjection(\n                this._save.get(key),\n                response,\n                response.bodyJson !== undefined ? response.bodyJson : response.body,\n                context\n              )\n            ).then(v => {\n              if (context.has(key)) {\n                throw new Error(`The context already contains key '${key}'`);\n              }\n              context.set(key, v);\n              // console.log(`  [${key}] = ${v}`);\n            })\n          )).then(() => Promise.resolve(response));\n        }\n        return Promise.resolve(response);\n      };\n\n      const options = {\n        uri: absUrl,\n        method: this._method,\n        headers: {\n          'Content-Type': this._contentType || 'application/json',\n          Cookie: context.get(group._session),\n        },\n        resolveWithFullResponse: true,\n        simple: false,\n      };\n\n      if (this._contentType === 'application/x-www-form-urlencoded') {\n        options.form = body;\n      } else if (this._contentType === 'multipart/form-data') {\n        options.formData = body;\n      } else {\n        options.body = body;\n      }\n\n      this._promise = rp(options)\n        .then(res => status(res))\n        .then(res => type(res))\n        .then(res => expect(res))\n        .then(res => save(res))\n        .then(() => {\n          if (collection._cancel) {\n            return Promise.reject();\n          }\n          console.log('    %s %s %s %s',\n            padRight(group._name, collection.getMaxGroupNameLength()).gray,\n            padRight(this._method.toUpperCase(), 6).magenta,\n            url,\n            this._name.cyan\n          );\n          return Promise.resolve();\n        });\n    }\n    return this._promise;\n  }\n\n  get(url) {\n    this._method = 'get';\n    this._url = url;\n    this._status = this._status || 200;\n    return this;\n  }\n\n  post(url) {\n    this._method = 'post';\n    this._url = url;\n    this._status = this._status || 200;\n    return this;\n  }\n\n  put(url) {\n    this._method = 'put';\n    this._url = url;\n    this._status = this._status || 204;\n    return this;\n  }\n\n  delete(url) {\n    this._method = 'delete';\n    this._url = url;\n    this._status = this._status || 204;\n    return this;\n  }\n\n  json(data) {\n    this._contentType = 'application/json';\n    if (typeof data === 'function') {\n      this._body = context => JSON.stringify(data(context));\n    } else {\n      this._body = JSON.stringify(data);\n    }\n    return this;\n  }\n\n  form(data) {\n    this._contentType = 'application/x-www-form-urlencoded';\n    this._body = data;\n    return this;\n  }\n\n  formData(data) {\n    this._contentType = 'multipart/form-data';\n    const form = new FormData();\n    Object.keys(data).forEach(key => form.set(key, data[key]));\n    this._body = form;\n    return this;\n  }\n\n  save(name, func) {\n    if (!this._save) {\n      this._save = new Map();\n    }\n    this._save.set(name, func);\n    return this;\n  }\n\n  expect(type) {\n    if (typeof type === 'function') {\n      if (!this._expect) {\n        this._expect = [];\n      }\n      this._expect.push(type);\n    } else if (typeof type === 'number') {\n      this._status = type;\n    } else if (type.indexOf('/') !== -1) {\n      this._responseContentType = type;\n    } else {\n      this._type = type;\n    }\n    return this;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Automation/Test.js\n **/","module.exports = require(\"request-promise\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"request-promise\"\n ** module id = 21\n ** module chunks = 0\n **/","\r\nexport default class TestError {\r\n\r\n  constructor(test, group, collection, reason, response) {\r\n    this._test = test;\r\n    this._group = group;\r\n    this._collection = collection;\r\n    this._reason = reason;\r\n    this._response = response;\r\n  }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Automation/TestError.js\n **/","module.exports = require(\"path\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"path\"\n ** module id = 23\n ** module chunks = 0\n **/","module.exports = require(\"fs\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"fs\"\n ** module id = 24\n ** module chunks = 0\n **/","module.exports = require(\"js-yaml\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"js-yaml\"\n ** module id = 25\n ** module chunks = 0\n **/"],"sourceRoot":""}