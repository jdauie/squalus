{"version":3,"sources":["webpack:///squalus-node.js","webpack:///webpack/bootstrap 575924b533d1af05d1f2","webpack:///./src/SqualusNode.js","webpack:///./src/Squalus.js","webpack:///./src/Tag.js","webpack:///./src/Endpoint.js","webpack:///./src/RequestInstance.js","webpack:///./src/TopoSort.js","webpack:///./src/Type/BranchType.js","webpack:///./src/Type/NullableType.js","webpack:///./src/Type/Scalar/NullScalarType.js","webpack:///./src/Type/ScalarType.js","webpack:///./src/Type/Scalar/ValueCollection.js","webpack:///./src/Type/ArrayType.js","webpack:///./src/Type/AttributeType.js","webpack:///./src/Type/ObjectType.js","webpack:///./src/Type/MapType.js","webpack:///./src/Type/Scalar/BoolScalarType.js","webpack:///./src/Type/Scalar/EmailScalarType.js","webpack:///./src/Type/Scalar/GuidScalarType.js","webpack:///./src/Type/Scalar/IntScalarType.js","webpack:///./src/Type/Scalar/NumericScalarType.js","webpack:///./src/Type/Scalar/NumericValueCollection.js","webpack:///./src/Type/Scalar/IntValueCollection.js","webpack:///./src/Type/Scalar/PasswordScalarType.js","webpack:///./src/Automation/TestCollection.js","webpack:///external \"colors\"","webpack:///./src/Automation/TestError.js","webpack:///./src/ValidationContext.js","webpack:///./src/Automation/TestGroup.js","webpack:///./src/Automation/Test.js","webpack:///external \"form-data\"","webpack:///external \"request-promise\"","webpack:///external \"path\"","webpack:///external \"fs\"","webpack:///external \"js-yaml\""],"names":["module","exports","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","getFiles","source","regex","files","findChildren","dir","_fs2","readdirSync","forEach","f","child","_path2","join","statSync","isDirectory","test","push","collection","name","options","_TestCollection2","group","_TestGroup2","_Test2","defineProperty","squalus","undefined","_createClass","defineProperties","target","props","i","length","descriptor","key","protoProps","staticProps","_Squalus2","_Squalus3","_TestCollection","_TestGroup","_Test","_path","_fs","_jsYaml","_jsYaml2","SqualusNode","_Squalus","this","getPrototypeOf","apply","arguments","typePath","collectionInstance","initialContextPath","typePaths","Array","isArray","concat","map","types","assign","file","safeLoad","readFileSync","encoding","buildTypes","context","JSON","parse","execute","findPreviousTokenGroupStart","tokens","depth","j","parseTokensFromType","type","dependenciesOnly","split","t","trim","filter","previous","splice","dependencies","includes","buildKnownDependencies","_ScalarType2","getScalarTypes","data","parseChild","Set","keys","add","scopify","iter","scope","result","from","item","indexOf","parseRoot","root","parsed","requires","createAttrFromName","_AttributeType2","replace","clone","endsWith","stripOuterParens","array","splitArray","chunks","chunk","stack","token","pop","buildType","def","branches","_ret","size","Error","branchMap","Map","branch","set","v","_BranchType2","_typeof","_MapType2","_ArrayType2","slice","_ret2","transformStart","transformName","transformArgs","transforms","attributes","attr","_ObjectType2","scopedName","registeredTypes","has","get","attributeNames","inheritanceAttr","parents","parent","_ret3","values","every","branchType","inheritedTypes","builder","k","_ret4","parentAttr","Symbol","iterator","_Tag","_Tag2","_Endpoint","_Endpoint2","_TopoSort","_TopoSort2","_BranchType","_ArrayType","_AttributeType","_ObjectType","_ScalarType","_MapType","_BoolScalarType","_BoolScalarType2","_EmailScalarType","_EmailScalarType2","_GuidScalarType","_GuidScalarType2","_IntScalarType","_IntScalarType2","_NullScalarType","_NullScalarType2","_NumericScalarType","_NumericScalarType2","_PasswordScalarType","_PasswordScalarType2","register","Squalus","sorted","d","substring","tests","baseUrl","document","body","appendChild","api","ul","class","supportedMethods","providedMethods","x","toUpperCase","headers","urlParams","queryParams","build","load","events","change","select.test-option","onChange","click",".test-row-add","onClickAdd",".test-row-remove","onClickRemove",".test-attr-toggle","onClickToggle",".test-submit","onSubmit","keypress","input[type=text],input[type=checkbox],select","onKeyPress","window","addEventListener","onBeforeUnload","e","closest","selector","matches","func","initializeSelectionStates","initializeIncludedStates","isObject","appendNode","element","content","nodeType","div","createElement","innerHTML","firstChild","tagName","_len","args","_key","children","elem","startsWith","dataset","substr","setAttribute","closestAncestorByClassName","className","parentNode","classList","contains","convertValueToParam","val","query","encodeURI","_RequestInstance","_RequestInstance2","sections","Endpoint","url","method","_baseUrl","_url","_method","_headers","_urlParams","_queryParams","_body","_node","clear","find","prop","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","next","done","err","return","URL","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","searchParams","append","toLowerCase","_squalusDef","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","section","getPopulatedUrl","credentials","Content-Type","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","header","stringify","then","req","dump","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","localStorage","getItem","storageKey","populate","_iteratorNormalCompletion6","_didIteratorError6","_iteratorError6","_step6","_iterator6","setItem","getElementsByClassName","node","unload","event","which","preventDefault","submit","getOutputContainer","getElementById","RequestInstance","_options","_sendTime","Date","getTime","_responseTime","_responseUrl","_responseStatus","_responseHeaders","_responseBody","output","responseBody","contentType","textContent","status","time","entries","dumpSections","fetch","res","text","catch","error","console","log","message","elements","getName","getRequires","edges","s","sources","dependency","nSource","n","mSource","_NullableType","_NullableType2","BranchType","_types","_squalusType","firstElementChild","selectedIndex","findIndex","validate","select","Event","bubbles","dispatchEvent","path","silent","some","nextElementSibling","toggle","querySelectorAll","nonNullTypes","NullableType","_type","_ScalarType3","NullScalarType","createTextNode","_ValueCollection","_ValueCollection2","implementations","ScalarType","_values","_parse","disabled","placeholder","_build","_validate","toString","supports","ValueCollection","ArrayType","_rows","row","_this","lastElementChild","remove","AttributeType","required","_name","_required","_included","update","ObjectType","_attributes","included","_throwUnknownObjectAttributes","allowedKeys","a","diff","MapType","_this2","_this3","keyField","BoolScalarType","checked","EmailScalarType","match","GuidScalarType","_NumericScalarType3","_IntValueCollection","_IntValueCollection2","IntScalarType","unsigned","charAt","positive","parseInt","_NumericValueCollection","_NumericValueCollection2","NumericScalarType","parseFloat","_get","object","property","receiver","Function","desc","getOwnPropertyDescriptor","getter","_ValueCollection3","NumericValueCollection","_ranges","discrete","parts","start","end","isNaN","r","maxRangeExpansion","IntValueCollection","_NumericValueCollecti","rangeSize","reduce","current","sort","b","PasswordScalarType","_TestError","_TestError2","_ValidationContext","_ValidationContext2","TestCollection","_groups","_cancel","_sequential","sequential","_validationContext","throwUnknownObjectAttributes","groups","_maxGroupNameLength","initial","startTime","now","Promise","resolve","testCount","_tests","green","g","_requires","all","magenta","require","_defineProperty","TestError","reason","response","_test","_group","_collection","_reason","_response","info","request","uri","href","statusCode","responseContentType","responseNote","maxInfoNameLength","Math","max","red","infoVal","yellow","repeat","ValidationContext","TestGroup","_parallel","_session","_promise","when","reject","reverse","onResolve","padRight","str","width","char","getParamNames","fnStr","STRIP_COMMENTS","ARGUMENT_NAMES","callFuncWithParamInjection","sourceParams","maps","_formData","_formData2","_requestPromise","_requestPromise2","Test","_contentType","_responseContentType","_status","_save","_expect","populateVariables","absUrl","responseType","getType","json","bodyJson","expect","passed","save","resolveWithFullResponse","simple","sessionCookie","Cookie","sessionAuthorization","Authorization","form","formData","getMaxGroupNameLength","gray","cyan"],"mappings":"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","file":"squalus-node.js","sourcesContent":["module.exports =\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"lib/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.test = exports.group = exports.collection = exports.squalus = undefined;\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _Squalus2 = __webpack_require__(1);\n\t\n\tvar _Squalus3 = _interopRequireDefault(_Squalus2);\n\t\n\tvar _TestCollection = __webpack_require__(23);\n\t\n\tvar _TestCollection2 = _interopRequireDefault(_TestCollection);\n\t\n\tvar _TestGroup = __webpack_require__(27);\n\t\n\tvar _TestGroup2 = _interopRequireDefault(_TestGroup);\n\t\n\tvar _Test = __webpack_require__(28);\n\t\n\tvar _Test2 = _interopRequireDefault(_Test);\n\t\n\tvar _path = __webpack_require__(31);\n\t\n\tvar _path2 = _interopRequireDefault(_path);\n\t\n\tvar _fs = __webpack_require__(32);\n\t\n\tvar _fs2 = _interopRequireDefault(_fs);\n\t\n\tvar _jsYaml = __webpack_require__(33);\n\t\n\tvar _jsYaml2 = _interopRequireDefault(_jsYaml);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tfunction getFiles(source, regex) {\n\t  var files = [];\n\t\n\t  var findChildren = function findChildren(dir) {\n\t    return _fs2.default.readdirSync(dir).forEach(function (f) {\n\t      var child = _path2.default.join(dir, f);\n\t      if (_fs2.default.statSync(child).isDirectory()) {\n\t        findChildren(child);\n\t      } else if (regex.test(f)) {\n\t        files.push(child);\n\t      }\n\t    });\n\t  };\n\t\n\t  if (_fs2.default.statSync(source).isDirectory()) {\n\t    findChildren(source);\n\t  } else {\n\t    files.push(source);\n\t  }\n\t\n\t  return files;\n\t}\n\t\n\tvar SqualusNode = function (_Squalus) {\n\t  _inherits(SqualusNode, _Squalus);\n\t\n\t  function SqualusNode() {\n\t    _classCallCheck(this, SqualusNode);\n\t\n\t    return _possibleConstructorReturn(this, (SqualusNode.__proto__ || Object.getPrototypeOf(SqualusNode)).apply(this, arguments));\n\t  }\n\t\n\t  _createClass(SqualusNode, null, [{\n\t    key: 'execute',\n\t    value: function execute(typePath, collectionInstance, initialContextPath) {\n\t      var typePaths = Array.isArray(typePath) ? typePath : [typePath];\n\t      var files = [].concat.apply([], typePaths.map(function (p) {\n\t        return getFiles(p, /\\.yaml$/);\n\t      }));\n\t\n\t      if (files.length) {\n\t        var types = Object.assign.apply(null, files.map(function (file) {\n\t          return _jsYaml2.default.safeLoad(_fs2.default.readFileSync(file, { encoding: 'utf8' }));\n\t        }));\n\t\n\t        _Squalus3.default.buildTypes(types);\n\t      }\n\t\n\t      var context = undefined;\n\t      if (initialContextPath) {\n\t        context = JSON.parse(_fs2.default.readFileSync(initialContextPath, { encoding: 'utf8' }));\n\t      }\n\t\n\t      return collectionInstance.execute(context);\n\t    }\n\t  }]);\n\t\n\t  return SqualusNode;\n\t}(_Squalus3.default);\n\t\n\tfunction collection(name, options) {\n\t  return new _TestCollection2.default(name, options);\n\t}\n\t\n\tfunction group(name) {\n\t  return new _TestGroup2.default(name);\n\t}\n\t\n\tfunction test(name) {\n\t  return new _Test2.default(name);\n\t}\n\t\n\texports.squalus = SqualusNode;\n\texports.collection = collection;\n\texports.group = group;\n\texports.test = test;\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\tvar _Tag = __webpack_require__(2);\n\t\n\tvar _Tag2 = _interopRequireDefault(_Tag);\n\t\n\tvar _Endpoint = __webpack_require__(3);\n\t\n\tvar _Endpoint2 = _interopRequireDefault(_Endpoint);\n\t\n\tvar _TopoSort = __webpack_require__(5);\n\t\n\tvar _TopoSort2 = _interopRequireDefault(_TopoSort);\n\t\n\tvar _BranchType = __webpack_require__(6);\n\t\n\tvar _BranchType2 = _interopRequireDefault(_BranchType);\n\t\n\tvar _ArrayType = __webpack_require__(11);\n\t\n\tvar _ArrayType2 = _interopRequireDefault(_ArrayType);\n\t\n\tvar _AttributeType = __webpack_require__(12);\n\t\n\tvar _AttributeType2 = _interopRequireDefault(_AttributeType);\n\t\n\tvar _ObjectType = __webpack_require__(13);\n\t\n\tvar _ObjectType2 = _interopRequireDefault(_ObjectType);\n\t\n\tvar _ScalarType = __webpack_require__(9);\n\t\n\tvar _ScalarType2 = _interopRequireDefault(_ScalarType);\n\t\n\tvar _MapType = __webpack_require__(14);\n\t\n\tvar _MapType2 = _interopRequireDefault(_MapType);\n\t\n\tvar _BoolScalarType = __webpack_require__(15);\n\t\n\tvar _BoolScalarType2 = _interopRequireDefault(_BoolScalarType);\n\t\n\tvar _EmailScalarType = __webpack_require__(16);\n\t\n\tvar _EmailScalarType2 = _interopRequireDefault(_EmailScalarType);\n\t\n\tvar _GuidScalarType = __webpack_require__(17);\n\t\n\tvar _GuidScalarType2 = _interopRequireDefault(_GuidScalarType);\n\t\n\tvar _IntScalarType = __webpack_require__(18);\n\t\n\tvar _IntScalarType2 = _interopRequireDefault(_IntScalarType);\n\t\n\tvar _NullScalarType = __webpack_require__(8);\n\t\n\tvar _NullScalarType2 = _interopRequireDefault(_NullScalarType);\n\t\n\tvar _NumericScalarType = __webpack_require__(19);\n\t\n\tvar _NumericScalarType2 = _interopRequireDefault(_NumericScalarType);\n\t\n\tvar _PasswordScalarType = __webpack_require__(22);\n\t\n\tvar _PasswordScalarType2 = _interopRequireDefault(_PasswordScalarType);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\t_ScalarType2.default.register([_BoolScalarType2.default, _EmailScalarType2.default, _GuidScalarType2.default, _IntScalarType2.default, _NullScalarType2.default, _NumericScalarType2.default, _PasswordScalarType2.default]);\n\t\n\tvar registeredTypes = new Map();\n\t\n\tfunction findPreviousTokenGroupStart(tokens, i) {\n\t  if (tokens[i] === ')') {\n\t    var depth = 0;\n\t    for (var j = i - 1; j >= 0; j--) {\n\t      if (tokens[j] === ')') {\n\t        ++depth;\n\t      } else if (tokens[j] === '(') {\n\t        if (depth === 0) {\n\t          return findPreviousTokenGroupStart(tokens, j - 1);\n\t        }\n\t        --depth;\n\t      }\n\t    }\n\t  } else if (tokens[i] === '}') {\n\t    for (var _j = i - 1; _j >= 0; _j--) {\n\t      if (tokens[_j] === '{') {\n\t        return findPreviousTokenGroupStart(tokens, _j - 1);\n\t      }\n\t    }\n\t  } else if (tokens[i] === '[]') {\n\t    return findPreviousTokenGroupStart(tokens, i - 1);\n\t  }\n\t\n\t  return i >= 0 ? i : 0;\n\t}\n\t\n\tfunction parseTokensFromType(type, dependenciesOnly) {\n\t  /*\n\t   * e.g.\n\t   *   type\n\t   *   type:map(Name,Value)\n\t   *   type1|type2|type3\n\t   *   type1 => type2\n\t   *   int{1,2,7-9}?\n\t   *   string?[]?\n\t   *   (string => int{2,4-9}|bool|string?)?[]?\n\t   *   type1,type2 # this only applies to inheritance\n\t   * todo:\n\t   *   content-type(image/png) && signature(89 50 4E 47 0D 0A 1A 0A)\n\t   */\n\t  var tokens = type.split(/([|{}()?:,]|&&|\\[]|=>)/).map(function (t) {\n\t    return t.trim();\n\t  }).filter(function (t) {\n\t    return t !== '';\n\t  });\n\t\n\t  // expand shortcuts\n\t  for (var i = 0; i < tokens.length; i++) {\n\t    if (tokens[i] === '?') {\n\t      var previous = findPreviousTokenGroupStart(tokens, i - 1);\n\t      tokens.splice(previous, 0, '(');\n\t      tokens.splice(i + 1, 1, '|', 'null', ')');\n\t      --i;\n\t    }\n\t  }\n\t\n\t  if (!dependenciesOnly) {\n\t    return tokens;\n\t  }\n\t\n\t  /*\n\t   * remove\n\t   *   |\n\t   *   []\n\t   *   {...}\n\t   *   :func(...)\n\t   */\n\t  var dependencies = [];\n\t  for (var _i = 0; _i < tokens.length; _i++) {\n\t    if (tokens[_i] === '{') {\n\t      while (tokens[_i] !== '}') {\n\t        ++_i;\n\t      }\n\t      continue;\n\t    } else if (tokens[_i] === ':') {\n\t      while (tokens[_i] !== ')') {\n\t        ++_i;\n\t      }\n\t      continue;\n\t    } else if (['[]', '=>', '|', ',', '(', ')'].includes(tokens[_i])) {\n\t      continue;\n\t    }\n\t    dependencies.push(tokens[_i]);\n\t  }\n\t\n\t  return dependencies;\n\t}\n\t\n\tfunction buildKnownDependencies() {\n\t  return _ScalarType2.default.getScalarTypes().map(function (t) {\n\t    return {\n\t      name: t,\n\t      data: t\n\t    };\n\t  });\n\t}\n\t\n\tfunction parseChild(types) {\n\t  var dependencies = new Set();\n\t\n\t  Object.keys(types).forEach(function (key) {\n\t    var type = types[key];\n\t\n\t    if (typeof type === 'string') {\n\t      parseTokensFromType(type, true).forEach(function (t) {\n\t        return dependencies.add(t);\n\t      });\n\t    } else {\n\t      parseChild(type).forEach(function (t) {\n\t        return dependencies.add(t);\n\t      });\n\t    }\n\t  });\n\t\n\t  return dependencies;\n\t}\n\t\n\tfunction scopify(iter, scope) {\n\t  var source = iter;\n\t  if (typeof iter === 'string') {\n\t    source = [iter];\n\t  }\n\t  var result = Array.from(source, function (item) {\n\t    return item.indexOf('{') === -1 && item.indexOf('[') === -1 && item.indexOf('|') === -1 && item.indexOf('.') === -1 && !_ScalarType2.default.getScalarTypes().includes(item) ? scope + '.' + item : item;\n\t  });\n\t\n\t  return typeof iter === 'string' ? result[0] : result;\n\t}\n\t\n\tfunction parseRoot(root) {\n\t  var parsed = [];\n\t\n\t  Object.keys(root).forEach(function (scope) {\n\t    Object.keys(root[scope]).forEach(function (name) {\n\t      var type = root[scope][name];\n\t\n\t      var requires = new Set();\n\t\n\t      if (typeof type === 'string') {\n\t        parseTokensFromType(type, true).forEach(function (t) {\n\t          return requires.add(t);\n\t        });\n\t      } else {\n\t        parseChild(type).forEach(function (t) {\n\t          return requires.add(t);\n\t        });\n\t      }\n\t\n\t      parsed.push({\n\t        name: scopify(name, scope),\n\t        requires: scopify(requires, scope),\n\t        data: type\n\t      });\n\t    });\n\t  });\n\t\n\t  return parsed;\n\t}\n\t\n\tfunction createAttrFromName(name, type) {\n\t  return new _AttributeType2.default(name.replace(/\\?$/, ''), type.clone(), !name.endsWith('?'));\n\t}\n\t\n\tfunction stripOuterParens(array) {\n\t  if (array[0] === '(' && array[array.length - 1] === ')') {\n\t    array.splice(array.length - 1);\n\t    array.splice(0, 1);\n\t  }\n\t}\n\t\n\tfunction splitArray(array, split) {\n\t  stripOuterParens(array);\n\t\n\t  var chunks = [];\n\t  var chunk = [];\n\t  var stack = [];\n\t  array.forEach(function (token) {\n\t    if (token === '(') {\n\t      stack.push(true);\n\t      chunk.push(token);\n\t    } else if (token === ')') {\n\t      stack.pop();\n\t      chunk.push(token);\n\t    } else if (!stack.length && token === split) {\n\t      if (chunk.length) {\n\t        chunks.push(chunk);\n\t      }\n\t      chunk = [];\n\t    } else {\n\t      chunk.push(token);\n\t    }\n\t  });\n\t  if (chunk.length) {\n\t    chunks.push(chunk);\n\t  }\n\t\n\t  chunks.forEach(function (c) {\n\t    return stripOuterParens(c);\n\t  });\n\t\n\t  return chunks;\n\t}\n\t\n\tfunction buildType(def, scope) {\n\t  // shortcuts\n\t  if (typeof def === 'boolean') {\n\t    def = def ? 'bool{true}' : 'bool{false}'; // eslint-disable-line no-param-reassign\n\t  }\n\t\n\t  // references\n\t  if (typeof def === 'string') {\n\t    var tokens = parseTokensFromType(def);\n\t\n\t    var branches = splitArray(tokens, '|');\n\t    if (branches.length > 1) {\n\t      var _ret = function () {\n\t        if (branches.length !== new Set(branches).size) {\n\t          throw new Error('duplicate types in branch list');\n\t        }\n\t        var branchMap = new Map();\n\t        branches.forEach(function (branch) {\n\t          branchMap.set(branch, buildType(scopify(branch.join(''), scope)));\n\t        });\n\t        return {\n\t          v: _BranchType2.default.create(branchMap)\n\t        };\n\t      }();\n\t\n\t      if ((typeof _ret === 'undefined' ? 'undefined' : _typeof(_ret)) === \"object\") return _ret.v;\n\t    }\n\t\n\t    var map = splitArray(tokens, '=>');\n\t    if (map.length > 1) {\n\t      return new _MapType2.default(buildType(map[0].join(''), scope), buildType(map[1].join(''), scope));\n\t    }\n\t\n\t    if (tokens[tokens.length - 1] === '[]') {\n\t      return new _ArrayType2.default(buildType(tokens.slice(0, tokens.length - 1).join(''), scope));\n\t    }\n\t\n\t    if (tokens[tokens.length - 1] === '}') {\n\t      return _ScalarType2.default.create(tokens[tokens.indexOf('{') - 1], tokens.slice(tokens.indexOf('{') + 1, tokens.length - 1).filter(function (t) {\n\t        return t !== ',';\n\t      }));\n\t    }\n\t\n\t    if (tokens[tokens.length - 1] === ')') {\n\t      var _ret2 = function () {\n\t        var transformStart = tokens.indexOf(':');\n\t        var transformName = tokens[transformStart + 1];\n\t        var transformArgs = tokens.slice(transformStart + 3, tokens.length - 1).filter(function (t) {\n\t          return t !== ',';\n\t        });\n\t\n\t        var transforms = {\n\t          map: function map(type) {\n\t            var branchMap = new Map();\n\t            type.attributes().forEach(function (attr) {\n\t              return branchMap.set(attr.name(), new _ObjectType2.default([new _AttributeType2.default(transformArgs[0], _ScalarType2.default.create('string', [attr.name()]), true), new _AttributeType2.default(transformArgs[1], attr.type().clone(), true)]));\n\t            });\n\t            return new _BranchType2.default(branchMap);\n\t          }\n\t        };\n\t        if (!transforms[transformName]) {\n\t          throw new Error('unsupported transform');\n\t        }\n\t        return {\n\t          v: transforms[transformName](buildType(tokens.slice(0, transformStart).join(''), scope))\n\t        };\n\t      }();\n\t\n\t      if ((typeof _ret2 === 'undefined' ? 'undefined' : _typeof(_ret2)) === \"object\") return _ret2.v;\n\t    }\n\t\n\t    var scopedName = scopify(tokens.join(''), scope);\n\t    if (registeredTypes.has(scopedName)) {\n\t      return registeredTypes.get(scopedName).clone();\n\t    }\n\t    return _ScalarType2.default.create(scopedName);\n\t  }\n\t\n\t  // check for inheritance\n\t  var attributeNames = Object.keys(def).filter(function (key) {\n\t    return key !== '^';\n\t  });\n\t  var inheritanceAttr = def['^'];\n\t  if (inheritanceAttr) {\n\t    if (typeof inheritanceAttr !== 'string') {\n\t      throw new Error('inheritance attribute must be a string');\n\t    }\n\t\n\t    var parents = parseTokensFromType(inheritanceAttr).filter(function (t) {\n\t      return t !== ',';\n\t    }).map(function (parent) {\n\t      return registeredTypes.get(scopify(parent, scope));\n\t    });\n\t\n\t    if (parents.length === 1 && parents[0] instanceof _BranchType2.default) {\n\t      var _ret3 = function () {\n\t        var parent = parents[0];\n\t        if (!Array.from(parent.types.values()).every(function (branchType) {\n\t          return branchType instanceof Object;\n\t        })) {\n\t          throw new Error('inheritance from branch with non-object');\n\t        }\n\t        // create inherited version of each object and re-aggregate\n\t        var inheritedTypes = new Map();\n\t        parent.types.forEach(function (branchType, key) {\n\t          var builder = function builder(t, k) {\n\t            // add attributes to each branch\n\t            var attributes = new Map();\n\t            t.attributes().forEach(function (attr) {\n\t              attributes.set(attr.name(), attr.clone());\n\t            });\n\t            attributeNames.forEach(function (attr) {\n\t              return attributes.set(attr.trim('?'), createAttrFromName(attr, buildType(def[attr], scope)));\n\t            });\n\t            inheritedTypes.set(k, new _ObjectType2.default(Array.from(attributes.values())));\n\t          };\n\t\n\t          if (branchType instanceof _BranchType2.default) {\n\t            branchType.types.forEach(function (t, k) {\n\t              return builder(t, key + '-' + k);\n\t            });\n\t          } else {\n\t            builder(branchType, key);\n\t          }\n\t        });\n\t        return {\n\t          v: new _BranchType2.default(inheritedTypes)\n\t        };\n\t      }();\n\t\n\t      if ((typeof _ret3 === 'undefined' ? 'undefined' : _typeof(_ret3)) === \"object\") return _ret3.v;\n\t    } else if (parents.every(function (parent) {\n\t      return parent instanceof _ObjectType2.default;\n\t    })) {\n\t      var _ret4 = function () {\n\t        // simple inheritance\n\t        var attributes = new Map();\n\t        parents.forEach(function (parent) {\n\t          parent.attributes().forEach(function (parentAttr) {\n\t            attributes.set(parentAttr, parentAttr.clone());\n\t          });\n\t        });\n\t        attributeNames.forEach(function (attr) {\n\t          return attributes.set(attr.trim('?'), createAttrFromName(attr, buildType(def[attr], scope)));\n\t        });\n\t        return {\n\t          v: new _ObjectType2.default(Array.from(attributes.values()))\n\t        };\n\t      }();\n\t\n\t      if ((typeof _ret4 === 'undefined' ? 'undefined' : _typeof(_ret4)) === \"object\") return _ret4.v;\n\t    }\n\t\n\t    throw new Error('invalid parent type');\n\t  }\n\t\n\t  // no inheritance\n\t  return new _ObjectType2.default(attributeNames.map(function (attr) {\n\t    return createAttrFromName(attr, buildType(def[attr], scope));\n\t  }));\n\t}\n\t\n\tvar Squalus = function () {\n\t  function Squalus() {\n\t    _classCallCheck(this, Squalus);\n\t  }\n\t\n\t  _createClass(Squalus, null, [{\n\t    key: 'getType',\n\t    value: function getType(name) {\n\t      return registeredTypes.get(name);\n\t    }\n\t  }, {\n\t    key: 'buildTypes',\n\t    value: function buildTypes(root) {\n\t      // check names and dependencies\n\t      var dependencies = buildKnownDependencies().concat(parseRoot(root || {}));\n\t      var sorted = (0, _TopoSort2.default)(dependencies, function (d) {\n\t        return d.name;\n\t      }, function (d) {\n\t        return d.requires;\n\t      });\n\t\n\t      sorted.forEach(function (type, name) {\n\t        var scope = name.indexOf('.') ? name.substring(0, name.indexOf('.')) : null;\n\t        registeredTypes.set(name, buildType(type.data, scope));\n\t      });\n\t    }\n\t  }, {\n\t    key: 'buildTests',\n\t    value: function buildTests(tests, baseUrl) {\n\t      var root = document.body.appendChild((0, _Tag2.default)('div', { id: 'api-root' }));\n\t      var api = root.appendChild((0, _Tag2.default)('div', { id: 'api-container' }));\n\t      root.appendChild((0, _Tag2.default)('div', { id: 'output-container' }));\n\t      var ul = api.appendChild((0, _Tag2.default)('ul', { class: 'api-tests' }));\n\t\n\t      tests.forEach(function (test) {\n\t        var supportedMethods = ['get', 'put', 'post', 'delete'];\n\t\n\t        var providedMethods = supportedMethods.filter(function (x) {\n\t          return test[x];\n\t        });\n\t\n\t        if (providedMethods.length !== 1) {\n\t          throw new Error('missing or invalid method');\n\t        }\n\t\n\t        var def = new _Endpoint2.default(baseUrl, test[providedMethods[0]], providedMethods[0].toUpperCase(), test.headers ? buildType(test.headers) : null, test.urlParams ? buildType(test.urlParams) : null, test.queryParams ? buildType(test.queryParams) : null, test.body ? buildType(test.body) : null);\n\t        ul.appendChild((0, _Tag2.default)('li', def.build()));\n\t\n\t        def.load();\n\t      });\n\t\n\t      var events = {\n\t        change: {\n\t          'select.test-option': _BranchType2.default.onChange\n\t        },\n\t        click: {\n\t          '.test-row-add': _ArrayType2.default.onClickAdd,\n\t          '.test-row-remove': _ArrayType2.default.onClickRemove,\n\t          '.test-attr-toggle': _AttributeType2.default.onClickToggle,\n\t          '.test-submit': _Endpoint2.default.onSubmit\n\t        },\n\t        keypress: {\n\t          'input[type=text],input[type=checkbox],select': _Endpoint2.default.onKeyPress\n\t        }\n\t      };\n\t\n\t      window.addEventListener('beforeunload', _Endpoint2.default.onBeforeUnload);\n\t\n\t      // handle events\n\t      Object.keys(events).forEach(function (type) {\n\t        root.addEventListener(type, function (e) {\n\t          if (e.target) {\n\t            (function () {\n\t              var def = _Endpoint2.default.closest(e.target);\n\t              if (def) {\n\t                Object.keys(events[type]).forEach(function (selector) {\n\t                  if (e.target.matches(selector)) {\n\t                    var func = events[type][selector];\n\t                    func(e, def);\n\t                  }\n\t                });\n\t              }\n\t            })();\n\t          }\n\t        });\n\t      });\n\t\n\t      _BranchType2.default.initializeSelectionStates(root);\n\t      _AttributeType2.default.initializeIncludedStates(root);\n\t    }\n\t  }]);\n\t\n\t  return Squalus;\n\t}();\n\t\n\texports.default = Squalus;\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (tagName) {\n\t  for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n\t    args[_key - 1] = arguments[_key];\n\t  }\n\t\n\t  var attributes = args.length && isObject(args[0]) && !args[0].nodeType ? args[0] : {};\n\t  var children = args.slice(args[0] === attributes ? 1 : 0);\n\t\n\t  var elem = document.createElement(tagName);\n\t\n\t  Object.keys(attributes).forEach(function (name) {\n\t    if (name.startsWith('data-')) {\n\t      elem.dataset[name.substr(5)] = attributes[name];\n\t    } else if (name.startsWith('_')) {\n\t      elem[name] = attributes[name];\n\t    } else {\n\t      elem.setAttribute(name, attributes[name]);\n\t    }\n\t  });\n\t\n\t  children.forEach(function (child) {\n\t    if (Array.isArray(child)) {\n\t      child.forEach(function (c) {\n\t        appendNode(elem, c);\n\t      });\n\t    } else {\n\t      appendNode(elem, child);\n\t    }\n\t  });\n\t\n\t  return elem;\n\t};\n\t\n\tfunction isObject(obj) {\n\t  return obj === Object(obj) && !Array.isArray(obj);\n\t}\n\t\n\tfunction appendNode(element, content) {\n\t  if (content && content.nodeType) {\n\t    element.appendChild(content);\n\t  } else {\n\t    var div = document.createElement('div');\n\t    div.innerHTML = content === undefined ? '' : content;\n\t\n\t    while (div.firstChild) {\n\t      element.appendChild(div.firstChild);\n\t    }\n\t  }\n\t}\n\t\n\t// (tagName, attributes?, children?, children?)\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\tvar _Tag = __webpack_require__(2);\n\t\n\tvar _Tag2 = _interopRequireDefault(_Tag);\n\t\n\tvar _RequestInstance = __webpack_require__(4);\n\t\n\tvar _RequestInstance2 = _interopRequireDefault(_RequestInstance);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction closestAncestorByClassName(elem, className) {\n\t  var e = elem.parentNode;\n\t  while (e) {\n\t    if (e.classList && e.classList.contains(className)) {\n\t      return e;\n\t    }\n\t    e = e.parentNode;\n\t  }\n\t  return null;\n\t}\n\t\n\tfunction convertValueToParam(val, key, query) {\n\t  if (Array.isArray(val)) {\n\t    val.forEach(function (item, i) {\n\t      return convertValueToParam(item, key + '[' + i + ']', query);\n\t    });\n\t  } else if ((typeof val === 'undefined' ? 'undefined' : _typeof(val)) === 'object') {\n\t    Object.keys(val).forEach(function (name) {\n\t      return convertValueToParam(val[name], key + '[' + name + ']', query);\n\t    });\n\t  } else if (typeof val === 'boolean') {\n\t    query.set(key, encodeURI(val ? 1 : 0));\n\t  } else {\n\t    query.set(key, encodeURI(val));\n\t  }\n\t}\n\t\n\tvar sections = {\n\t  headers: 'http-headers',\n\t  urlParams: 'url-params',\n\t  queryParams: 'query-params',\n\t  body: 'body'\n\t};\n\t\n\tvar Endpoint = function () {\n\t  function Endpoint(baseUrl, url, method, headers, urlParams, queryParams, body) {\n\t    _classCallCheck(this, Endpoint);\n\t\n\t    this._baseUrl = baseUrl;\n\t    this._url = url;\n\t    this._method = method;\n\t    this._headers = headers;\n\t    this._urlParams = urlParams;\n\t    this._queryParams = queryParams;\n\t    this._body = body;\n\t\n\t    // todo: verify that url params is object and that there is a 1:1 correspondence with attributes and placeholders\n\t    // query params can be object, map, or scalar?\n\t    // headers can be object or map\n\t\n\t    // const names = this._url.match(/{[^}\\s]+}/g).map(m => m.substr(1, m.length - 2));\n\t\n\t    this._node = null;\n\t  }\n\t\n\t  _createClass(Endpoint, [{\n\t    key: 'section',\n\t    value: function section(name) {\n\t      return this['_' + name];\n\t    }\n\t  }, {\n\t    key: 'headers',\n\t    value: function headers() {\n\t      return this._headers ? this._headers.value() : null;\n\t    }\n\t  }, {\n\t    key: 'urlParams',\n\t    value: function urlParams() {\n\t      return this._urlParams ? this._urlParams.value() : null;\n\t    }\n\t  }, {\n\t    key: 'queryParams',\n\t    value: function queryParams() {\n\t      return this._queryParams ? this._queryParams.value() : null;\n\t    }\n\t  }, {\n\t    key: 'body',\n\t    value: function body() {\n\t      return this._body ? this._body.value() : null;\n\t    }\n\t  }, {\n\t    key: 'clear',\n\t    value: function clear() {\n\t      this._body.clear();\n\t    }\n\t  }, {\n\t    key: 'lock',\n\t    value: function lock() {\n\t      this._body.find('*').prop('disabled', true);\n\t    }\n\t  }, {\n\t    key: 'unlock',\n\t    value: function unlock() {\n\t      this._body.find('*').prop('disabled', false);\n\t    }\n\t  }, {\n\t    key: 'getPopulatedUrl',\n\t    value: function getPopulatedUrl() {\n\t      var url = this._url;\n\t\n\t      var urlParams = this.urlParams();\n\t      if (urlParams) {\n\t        var _iteratorNormalCompletion = true;\n\t        var _didIteratorError = false;\n\t        var _iteratorError = undefined;\n\t\n\t        try {\n\t          for (var _iterator = Object.keys(urlParams)[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t            var key = _step.value;\n\t\n\t            url = url.replace('{' + key + '}', encodeURI(urlParams[key]));\n\t          }\n\t        } catch (err) {\n\t          _didIteratorError = true;\n\t          _iteratorError = err;\n\t        } finally {\n\t          try {\n\t            if (!_iteratorNormalCompletion && _iterator.return) {\n\t              _iterator.return();\n\t            }\n\t          } finally {\n\t            if (_didIteratorError) {\n\t              throw _iteratorError;\n\t            }\n\t          }\n\t        }\n\t      }\n\t\n\t      url = new URL(url, this._baseUrl);\n\t\n\t      var queryParams = this.queryParams();\n\t      if (queryParams) {\n\t        var query = new Map();\n\t        var _iteratorNormalCompletion2 = true;\n\t        var _didIteratorError2 = false;\n\t        var _iteratorError2 = undefined;\n\t\n\t        try {\n\t          for (var _iterator2 = Object.keys(queryParams)[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n\t            var _key = _step2.value;\n\t\n\t            var val = queryParams[_key];\n\t            if (val !== null && val !== '') {\n\t              convertValueToParam(val, _key, query);\n\t            }\n\t          }\n\t        } catch (err) {\n\t          _didIteratorError2 = true;\n\t          _iteratorError2 = err;\n\t        } finally {\n\t          try {\n\t            if (!_iteratorNormalCompletion2 && _iterator2.return) {\n\t              _iterator2.return();\n\t            }\n\t          } finally {\n\t            if (_didIteratorError2) {\n\t              throw _iteratorError2;\n\t            }\n\t          }\n\t        }\n\t\n\t        query.forEach(function (value, key) {\n\t          return url.searchParams.append(key, value);\n\t        });\n\t      }\n\t\n\t      return url;\n\t    }\n\t  }, {\n\t    key: 'build',\n\t    value: function build() {\n\t      this._node = (0, _Tag2.default)('div', { class: 'endpoint endpoint-method-' + this._method.toLowerCase(), _squalusDef: this }, (0, _Tag2.default)('div', { class: 'endpoint-header' }, (0, _Tag2.default)('span', { class: 'endpoint-method' }, this._method), (0, _Tag2.default)('span', { class: 'endpoint-url' }, this._url)));\n\t\n\t      var test = this._node.appendChild((0, _Tag2.default)('div', { class: 'endpoint-test' }));\n\t\n\t      var _iteratorNormalCompletion3 = true;\n\t      var _didIteratorError3 = false;\n\t      var _iteratorError3 = undefined;\n\t\n\t      try {\n\t        for (var _iterator3 = Object.keys(sections)[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n\t          var key = _step3.value;\n\t\n\t          var section = this.section(key);\n\t          if (section) {\n\t            test.appendChild((0, _Tag2.default)('div', { class: 'endpoint-test-' + (key === 'body' ? 'body' : 'params') }, (0, _Tag2.default)('div', { class: 'endpoint-test-label' }, sections[key]), section.build()));\n\t          }\n\t        }\n\t      } catch (err) {\n\t        _didIteratorError3 = true;\n\t        _iteratorError3 = err;\n\t      } finally {\n\t        try {\n\t          if (!_iteratorNormalCompletion3 && _iterator3.return) {\n\t            _iterator3.return();\n\t          }\n\t        } finally {\n\t          if (_didIteratorError3) {\n\t            throw _iteratorError3;\n\t          }\n\t        }\n\t      }\n\t\n\t      test.appendChild((0, _Tag2.default)('div', { class: 'endpoint-test-controls' }, (0, _Tag2.default)('input', { type: 'button', value: this._method, class: 'test-submit' }), (0, _Tag2.default)('span', { class: 'endpoint-test-status' })));\n\t\n\t      return this._node;\n\t    }\n\t  }, {\n\t    key: 'submit',\n\t    value: function submit() {\n\t      // todo: trap parse errors\n\t      var url = this.getPopulatedUrl();\n\t      var headers = this.headers();\n\t      var body = this.body();\n\t\n\t      var options = {\n\t        method: this._method,\n\t        credentials: 'same-origin',\n\t        headers: {\n\t          'Content-Type': 'application/json'\n\t        }\n\t      };\n\t\n\t      if (headers) {\n\t        var _iteratorNormalCompletion4 = true;\n\t        var _didIteratorError4 = false;\n\t        var _iteratorError4 = undefined;\n\t\n\t        try {\n\t          for (var _iterator4 = Object.keys(headers)[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n\t            var header = _step4.value;\n\t\n\t            options.headers[header] = headers[header];\n\t          }\n\t        } catch (err) {\n\t          _didIteratorError4 = true;\n\t          _iteratorError4 = err;\n\t        } finally {\n\t          try {\n\t            if (!_iteratorNormalCompletion4 && _iterator4.return) {\n\t              _iterator4.return();\n\t            }\n\t          } finally {\n\t            if (_didIteratorError4) {\n\t              throw _iteratorError4;\n\t            }\n\t          }\n\t        }\n\t      }\n\t\n\t      if (['PUT', 'POST', 'PATCH'].includes(this._method)) {\n\t        options.body = JSON.stringify(body);\n\t      }\n\t\n\t      _RequestInstance2.default.execute(url, options).then(function (req) {\n\t        req.dump();\n\t      });\n\t    }\n\t  }, {\n\t    key: 'storageKey',\n\t    value: function storageKey() {\n\t      return 'squalus:' + this._method.toLowerCase() + '-' + this._url;\n\t    }\n\t  }, {\n\t    key: 'load',\n\t    value: function load() {\n\t      // todo: load from storage if the endpoint hasn't changed\n\t\n\t      var _iteratorNormalCompletion5 = true;\n\t      var _didIteratorError5 = false;\n\t      var _iteratorError5 = undefined;\n\t\n\t      try {\n\t        for (var _iterator5 = Object.keys(sections)[Symbol.iterator](), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {\n\t          var key = _step5.value;\n\t\n\t          var section = this.section(key);\n\t          if (section) {\n\t            var value = localStorage.getItem(this.storageKey() + '-' + key);\n\t            if (value != null) {\n\t              try {\n\t                value = JSON.parse(value);\n\t              } catch (e) {\n\t                continue;\n\t              }\n\t              try {\n\t                section.populate(value);\n\t              } catch (e) {\n\t                // todo: sort this out\n\t              }\n\t            }\n\t          }\n\t        }\n\t      } catch (err) {\n\t        _didIteratorError5 = true;\n\t        _iteratorError5 = err;\n\t      } finally {\n\t        try {\n\t          if (!_iteratorNormalCompletion5 && _iterator5.return) {\n\t            _iterator5.return();\n\t          }\n\t        } finally {\n\t          if (_didIteratorError5) {\n\t            throw _iteratorError5;\n\t          }\n\t        }\n\t      }\n\t    }\n\t  }, {\n\t    key: 'unload',\n\t    value: function unload() {\n\t      // todo: save values, ignoring parse errors? not sure, it needs to be able to recreate branches, etc.\n\t\n\t      var _iteratorNormalCompletion6 = true;\n\t      var _didIteratorError6 = false;\n\t      var _iteratorError6 = undefined;\n\t\n\t      try {\n\t        for (var _iterator6 = Object.keys(sections)[Symbol.iterator](), _step6; !(_iteratorNormalCompletion6 = (_step6 = _iterator6.next()).done); _iteratorNormalCompletion6 = true) {\n\t          var key = _step6.value;\n\t\n\t          var section = this.section(key);\n\t          if (section) {\n\t            localStorage.setItem(this.storageKey() + '-' + key, JSON.stringify(section.value()));\n\t          }\n\t        }\n\t      } catch (err) {\n\t        _didIteratorError6 = true;\n\t        _iteratorError6 = err;\n\t      } finally {\n\t        try {\n\t          if (!_iteratorNormalCompletion6 && _iterator6.return) {\n\t            _iterator6.return();\n\t          }\n\t        } finally {\n\t          if (_didIteratorError6) {\n\t            throw _iteratorError6;\n\t          }\n\t        }\n\t      }\n\t    }\n\t  }], [{\n\t    key: 'onBeforeUnload',\n\t    value: function onBeforeUnload() {\n\t      Array.from(document.getElementsByClassName('endpoint')).forEach(function (node) {\n\t        return node._squalusDef.unload();\n\t      });\n\t    }\n\t  }, {\n\t    key: 'onKeyPress',\n\t    value: function onKeyPress(event, def) {\n\t      if (event.which === 13) {\n\t        event.preventDefault();\n\t        (def || this.closest(event.target)).submit();\n\t      }\n\t    }\n\t  }, {\n\t    key: 'onSubmit',\n\t    value: function onSubmit(event, def) {\n\t      (def || this.closest(event.target)).submit();\n\t    }\n\t  }, {\n\t    key: 'closest',\n\t    value: function closest(elem) {\n\t      var node = closestAncestorByClassName(elem, 'endpoint');\n\t      return node ? node._squalusDef : null;\n\t    }\n\t  }]);\n\t\n\t  return Endpoint;\n\t}();\n\t\n\texports.default = Endpoint;\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _Tag = __webpack_require__(2);\n\t\n\tvar _Tag2 = _interopRequireDefault(_Tag);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction getOutputContainer() {\n\t  return document.getElementById('output-container');\n\t}\n\t\n\tvar RequestInstance = function () {\n\t  function RequestInstance(url, options) {\n\t    _classCallCheck(this, RequestInstance);\n\t\n\t    this._url = url;\n\t    this._options = options;\n\t    this._sendTime = new Date().getTime();\n\t    this._responseTime = null;\n\t    this._responseUrl = null;\n\t    this._responseStatus = null;\n\t    this._responseHeaders = null;\n\t    this._responseBody = null;\n\t  }\n\t\n\t  _createClass(RequestInstance, [{\n\t    key: 'dump',\n\t    value: function dump() {\n\t      var output = getOutputContainer();\n\t      output.innerHTML = '';\n\t\n\t      var responseBody = this._responseBody;\n\t      var contentType = this._responseHeaders.get('content-type');\n\t      if (contentType && contentType.indexOf('application/json') !== -1) {\n\t        try {\n\t          responseBody = JSON.stringify(JSON.parse(responseBody), null, 2);\n\t        } catch (e) {\n\t          // html comes back for some errors\n\t        }\n\t      }\n\t\n\t      var body = (0, _Tag2.default)('pre');\n\t      body.textContent = responseBody;\n\t\n\t      var sections = {\n\t        url: this._responseUrl,\n\t        method: this._options.method,\n\t        status: this._responseStatus,\n\t        time: this._responseTime - this._sendTime + ' ms',\n\t        headers: (0, _Tag2.default)('table', Array.from(this._responseHeaders.entries()).map(function (x) {\n\t          return (0, _Tag2.default)('tr', (0, _Tag2.default)('th', x[0]), (0, _Tag2.default)('td', x[1]));\n\t        }))\n\t      };\n\t\n\t      if (this._responseHeaders.get('content-type')) {\n\t        sections.body = body;\n\t      }\n\t\n\t      RequestInstance.dumpSections(sections);\n\t    }\n\t  }], [{\n\t    key: 'execute',\n\t    value: function execute(url, options) {\n\t      var result = new RequestInstance(url, options);\n\t\n\t      var output = getOutputContainer();\n\t      output.innerHTML = '';\n\t\n\t      var sections = {\n\t        url: result._url,\n\t        method: result._options.method,\n\t        status: 'fetching...'\n\t      };\n\t\n\t      RequestInstance.dumpSections(sections);\n\t\n\t      return fetch(url, options).then(function (res) {\n\t        return res.text().then(function (body) {\n\t          result._responseTime = new Date().getTime();\n\t          result._responseUrl = res.url;\n\t          result._responseStatus = res.status;\n\t          result._responseHeaders = res.headers;\n\t          result._responseBody = body;\n\t          return result;\n\t        });\n\t      }).catch(function (error) {\n\t        console.log(error.message);\n\t      });\n\t    }\n\t  }, {\n\t    key: 'dumpSections',\n\t    value: function dumpSections(sections) {\n\t      var output = getOutputContainer();\n\t      var _iteratorNormalCompletion = true;\n\t      var _didIteratorError = false;\n\t      var _iteratorError = undefined;\n\t\n\t      try {\n\t        for (var _iterator = Object.keys(sections)[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t          var key = _step.value;\n\t\n\t          output.appendChild((0, _Tag2.default)('div', { class: 'output-section' }, (0, _Tag2.default)('div', { class: 'output-section-label' }, key), (0, _Tag2.default)('div', { class: 'output-section-content' }, sections[key])));\n\t        }\n\t      } catch (err) {\n\t        _didIteratorError = true;\n\t        _iteratorError = err;\n\t      } finally {\n\t        try {\n\t          if (!_iteratorNormalCompletion && _iterator.return) {\n\t            _iterator.return();\n\t          }\n\t        } finally {\n\t          if (_didIteratorError) {\n\t            throw _iteratorError;\n\t          }\n\t        }\n\t      }\n\t    }\n\t  }]);\n\t\n\t  return RequestInstance;\n\t}();\n\t\n\texports.default = RequestInstance;\n\n/***/ },\n/* 5 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (elements, getName, getRequires) {\n\t  var edges = new Map();\n\t  var s = [];\n\t\n\t  var sources = new Map();\n\t  elements.forEach(function (elem) {\n\t    return sources.set(getName(elem), elem);\n\t  });\n\t\n\t  sources.forEach(function (source) {\n\t    var requires = getRequires(source);\n\t    if (requires && requires.length) {\n\t      requires.forEach(function (dependency) {\n\t        if (!sources.has(dependency)) {\n\t          throw new Error('Unknown dependency ' + dependency);\n\t        }\n\t        if (!edges.has(dependency)) {\n\t          edges.set(dependency, []);\n\t        }\n\t        edges.get(dependency).push(getName(source));\n\t      });\n\t    } else {\n\t      s.push(source);\n\t    }\n\t  });\n\t\n\t  var parents = void 0;\n\t  var sorted = new Map();\n\t  while (s.length > 0) {\n\t    var nSource = s.pop();\n\t    var n = getName(nSource);\n\t    sorted.set(n, nSource);\n\t    if (edges.has(n)) {\n\t      parents = edges.get(n);\n\t      while (parents.length > 0) {\n\t        var m = parents.pop();\n\t        var mSource = sources.get(m);\n\t        var requires = getRequires(mSource);\n\t        if (!requires || !requires.find(function (d) {\n\t          return !sorted.has(d);\n\t        })) {\n\t          s.push(mSource);\n\t        }\n\t      }\n\t    }\n\t  }\n\t\n\t  edges.forEach(function (value) {\n\t    if (value.size > 0) {\n\t      throw new Error('Graph cycle; unable to sort');\n\t    }\n\t  });\n\t\n\t  return sorted;\n\t};\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _Tag = __webpack_require__(2);\n\t\n\tvar _Tag2 = _interopRequireDefault(_Tag);\n\t\n\tvar _NullableType = __webpack_require__(7);\n\t\n\tvar _NullableType2 = _interopRequireDefault(_NullableType);\n\t\n\tvar _NullScalarType = __webpack_require__(8);\n\t\n\tvar _NullScalarType2 = _interopRequireDefault(_NullScalarType);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar BranchType = function () {\n\t  function BranchType(types) {\n\t    _classCallCheck(this, BranchType);\n\t\n\t    if (types.size < 2) {\n\t      throw new Error('degenerate branch type');\n\t    }\n\t\n\t    this._types = types;\n\t    this._node = null;\n\t  }\n\t\n\t  _createClass(BranchType, [{\n\t    key: 'clone',\n\t    value: function clone() {\n\t      var types = new Map();\n\t      this._types.forEach(function (type, key) {\n\t        return types.set(key, type.clone());\n\t      });\n\t      return new this.constructor(types);\n\t    }\n\t  }, {\n\t    key: 'build',\n\t    value: function build() {\n\t      this._node = (0, _Tag2.default)('div', { _squalusType: this }, (0, _Tag2.default)('select', { class: 'test-option' }, Array.from(this._types.keys(), function (key) {\n\t        return (0, _Tag2.default)('option', key);\n\t      })), Array.from(this._types.values(), function (value) {\n\t        return (0, _Tag2.default)('div', { class: 'test-option' }, value.build());\n\t      }));\n\t      return this._node;\n\t    }\n\t  }, {\n\t    key: 'value',\n\t    value: function value() {\n\t      return Array.from(this._types.values())[this._node.firstElementChild.selectedIndex].value();\n\t    }\n\t  }, {\n\t    key: 'populate',\n\t    value: function populate(data) {\n\t      // validate data to determine branch\n\t      var types = Array.from(this._types.values());\n\t      var i = types.findIndex(function (type) {\n\t        return type.validate(data, '', true);\n\t      });\n\t\n\t      if (i === -1) {\n\t        throw new Error('branch validation failed');\n\t      }\n\t\n\t      var select = this._node.firstElementChild;\n\t      select.selectedIndex = i;\n\t\n\t      var event = new Event('change', { bubbles: true });\n\t      select.dispatchEvent(event);\n\t\n\t      types[i].populate(data);\n\t    }\n\t  }, {\n\t    key: 'validate',\n\t    value: function validate(value, path, silent, context) {\n\t      if (!Array.from(this._types.values()).some(function (type) {\n\t        return type.validate(value, path, true, context);\n\t      })) {\n\t        if (silent) {\n\t          return false;\n\t        }\n\t        throw new Error(path + ' does not match any candidate');\n\t      }\n\t      return true;\n\t    }\n\t  }, {\n\t    key: 'clear',\n\t    value: function clear() {\n\t      this._types.forEach(function (type) {\n\t        return type.clear();\n\t      });\n\t    }\n\t  }, {\n\t    key: 'types',\n\t    get: function get() {\n\t      return this._types;\n\t    }\n\t  }], [{\n\t    key: 'onChange',\n\t    value: function onChange(event) {\n\t      var node = event.target;\n\t      var i = 0;\n\t      while (node.nextElementSibling) {\n\t        node = node.nextElementSibling;\n\t        node.classList.toggle('test-hidden', i++ !== event.target.selectedIndex);\n\t      }\n\t    }\n\t  }, {\n\t    key: 'initializeSelectionStates',\n\t    value: function initializeSelectionStates(root) {\n\t      Array.from(root.querySelectorAll('select')).forEach(function (elem) {\n\t        var event = new Event('change', { bubbles: true });\n\t        elem.dispatchEvent(event);\n\t      });\n\t    }\n\t  }, {\n\t    key: 'create',\n\t    value: function create(types) {\n\t      if (types.size === 2) {\n\t        var nonNullTypes = Array.from(types.values()).filter(function (t) {\n\t          return !(t instanceof _NullScalarType2.default);\n\t        });\n\t        if (nonNullTypes.length === 1) {\n\t          return new _NullableType2.default(nonNullTypes[0]);\n\t        }\n\t      }\n\t      return new BranchType(types);\n\t    }\n\t  }]);\n\t\n\t  return BranchType;\n\t}();\n\t\n\texports.default = BranchType;\n\n/***/ },\n/* 7 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar NullableType = function () {\n\t  function NullableType(type) {\n\t    _classCallCheck(this, NullableType);\n\t\n\t    this._type = type;\n\t  }\n\t\n\t  _createClass(NullableType, [{\n\t    key: 'name',\n\t    value: function name() {\n\t      return this._type.name();\n\t    }\n\t  }, {\n\t    key: 'build',\n\t    value: function build() {\n\t      return this._type.build();\n\t    }\n\t  }, {\n\t    key: 'clone',\n\t    value: function clone() {\n\t      return new this.constructor(this._type.clone());\n\t    }\n\t  }, {\n\t    key: 'value',\n\t    value: function value() {\n\t      var val = this._type.value();\n\t      if (val === '') {\n\t        val = null;\n\t      }\n\t      return val;\n\t    }\n\t  }, {\n\t    key: 'validate',\n\t    value: function validate(value, path, silent, context) {\n\t      return value === null || this._type.validate(value, path, silent, context);\n\t    }\n\t  }, {\n\t    key: 'populate',\n\t    value: function populate(data) {\n\t      this._type.populate(data);\n\t    }\n\t  }, {\n\t    key: 'clear',\n\t    value: function clear() {\n\t      this._type.clear();\n\t    }\n\t  }]);\n\t\n\t  return NullableType;\n\t}();\n\t\n\texports.default = NullableType;\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _ScalarType2 = __webpack_require__(9);\n\t\n\tvar _ScalarType3 = _interopRequireDefault(_ScalarType2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar NullScalarType = function (_ScalarType) {\n\t  _inherits(NullScalarType, _ScalarType);\n\t\n\t  function NullScalarType() {\n\t    _classCallCheck(this, NullScalarType);\n\t\n\t    return _possibleConstructorReturn(this, (NullScalarType.__proto__ || Object.getPrototypeOf(NullScalarType)).apply(this, arguments));\n\t  }\n\t\n\t  _createClass(NullScalarType, [{\n\t    key: '_build',\n\t    value: function _build() {\n\t      return document.createTextNode('');\n\t    }\n\t  }, {\n\t    key: '_validate',\n\t    value: function _validate(value) {\n\t      return value === null;\n\t    }\n\t  }, {\n\t    key: 'value',\n\t    value: function value() {\n\t      return null;\n\t    }\n\t  }], [{\n\t    key: 'supports',\n\t    value: function supports() {\n\t      return ['null'];\n\t    }\n\t  }]);\n\t\n\t  return NullScalarType;\n\t}(_ScalarType3.default);\n\t\n\texports.default = NullScalarType;\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _Tag = __webpack_require__(2);\n\t\n\tvar _Tag2 = _interopRequireDefault(_Tag);\n\t\n\tvar _ValueCollection = __webpack_require__(10);\n\t\n\tvar _ValueCollection2 = _interopRequireDefault(_ValueCollection);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar implementations = new Map();\n\t['string', 'date', 'datetime', 'utc', 'timestamp'].forEach(function (type) {\n\t  return implementations.set(type, null);\n\t});\n\t\n\tvar ScalarType = function () {\n\t  function ScalarType(type, values) {\n\t    _classCallCheck(this, ScalarType);\n\t\n\t    this._type = type;\n\t    this._values = Array.isArray(values) ? this._parse(values) : null;\n\t    this._node = null;\n\t  }\n\t\n\t  _createClass(ScalarType, [{\n\t    key: 'clone',\n\t    value: function clone() {\n\t      return new this.constructor(this._type, this._values);\n\t    }\n\t  }, {\n\t    key: '_parse',\n\t    value: function _parse(values) {\n\t      return new _ValueCollection2.default(values);\n\t    }\n\t  }, {\n\t    key: '_build',\n\t    value: function _build() {\n\t      if (this._values) {\n\t        var values = this._values.values();\n\t        if (values) {\n\t          if (values.length === 1) {\n\t            return (0, _Tag2.default)('input', { type: 'text', disabled: true, value: values[0] });\n\t          }\n\t          return (0, _Tag2.default)('select', values.map(function (v) {\n\t            return (0, _Tag2.default)('option', v);\n\t          }));\n\t        }\n\t      }\n\t      return (0, _Tag2.default)('input', { type: 'text', placeholder: this._type });\n\t    }\n\t  }, {\n\t    key: 'build',\n\t    value: function build() {\n\t      this._node = this._build();\n\t      this._node._squalusType = this;\n\t      return this._node;\n\t    }\n\t  }, {\n\t    key: 'value',\n\t    value: function value() {\n\t      return this._node.value;\n\t    }\n\t  }, {\n\t    key: 'populate',\n\t    value: function populate(data) {\n\t      this._node.value = data === undefined ? '' : data;\n\t    }\n\t  }, {\n\t    key: '_validate',\n\t    value: function _validate(value) {\n\t      return typeof value === 'string';\n\t    }\n\t  }, {\n\t    key: 'validate',\n\t    value: function validate(value, path, silent) {\n\t      if (!this._validate(value, path, silent)) {\n\t        if (silent) {\n\t          return false;\n\t        }\n\t        throw new Error(path + ' must be of type ' + this._type);\n\t      }\n\t\n\t      if (this._values && !this._values.contains(value)) {\n\t        if (silent) {\n\t          return false;\n\t        }\n\t        throw new Error(path + ': \\'' + value + '\\' must be in [' + this._values.toString() + ']');\n\t      }\n\t\n\t      return true;\n\t    }\n\t  }, {\n\t    key: 'clear',\n\t    value: function clear() {\n\t      if (this._values) {\n\t        if (this._node.selectedIndex !== undefined) {\n\t          this._node.selectedIndex = 0;\n\t        }\n\t      } else {\n\t        this._node.value = '';\n\t      }\n\t    }\n\t  }, {\n\t    key: 'name',\n\t    get: function get() {\n\t      return this._type;\n\t    }\n\t  }], [{\n\t    key: 'register',\n\t    value: function register(types) {\n\t      types.forEach(function (type) {\n\t        var supports = type.supports();\n\t        (Array.isArray(supports) ? supports : [supports]).forEach(function (s) {\n\t          if (implementations.has(s)) {\n\t            throw new TypeError('duplicate registration for scalar type ' + s);\n\t          }\n\t          implementations.set(s, type);\n\t        });\n\t      });\n\t    }\n\t  }, {\n\t    key: 'create',\n\t    value: function create(type, values) {\n\t      return new (implementations.get(type) || ScalarType)(type, values);\n\t    }\n\t  }, {\n\t    key: 'getScalarTypes',\n\t    value: function getScalarTypes() {\n\t      return Array.from(implementations.keys());\n\t    }\n\t  }]);\n\t\n\t  return ScalarType;\n\t}();\n\t\n\texports.default = ScalarType;\n\n/***/ },\n/* 10 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar ValueCollection = function () {\n\t  function ValueCollection(values) {\n\t    _classCallCheck(this, ValueCollection);\n\t\n\t    this._values = values;\n\t  }\n\t\n\t  _createClass(ValueCollection, [{\n\t    key: \"contains\",\n\t    value: function contains(value) {\n\t      return this._values.includes(value);\n\t    }\n\t  }, {\n\t    key: \"values\",\n\t    value: function values() {\n\t      return this._values;\n\t    }\n\t  }]);\n\t\n\t  return ValueCollection;\n\t}();\n\t\n\texports.default = ValueCollection;\n\n/***/ },\n/* 11 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _Tag = __webpack_require__(2);\n\t\n\tvar _Tag2 = _interopRequireDefault(_Tag);\n\t\n\tvar _BranchType = __webpack_require__(6);\n\t\n\tvar _BranchType2 = _interopRequireDefault(_BranchType);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar ArrayType = function () {\n\t  function ArrayType(type) {\n\t    _classCallCheck(this, ArrayType);\n\t\n\t    this._type = type;\n\t    this._rows = [];\n\t    this._node = null;\n\t    this._body = null;\n\t  }\n\t\n\t  _createClass(ArrayType, [{\n\t    key: 'name',\n\t    value: function name() {\n\t      return this._type.name() + '[]';\n\t    }\n\t  }, {\n\t    key: 'clone',\n\t    value: function clone() {\n\t      return new this.constructor(this._type.clone());\n\t    }\n\t  }, {\n\t    key: 'build',\n\t    value: function build() {\n\t      this._node = (0, _Tag2.default)('div', { _squalusType: this }, (0, _Tag2.default)('table', this._body = (0, _Tag2.default)('tbody'), (0, _Tag2.default)('tfoot', (0, _Tag2.default)('th', (0, _Tag2.default)('input', { type: 'button', class: 'test-row-add', value: '+' })), (0, _Tag2.default)('th'), (0, _Tag2.default)('td'))));\n\t      return this._node;\n\t    }\n\t  }, {\n\t    key: 'populate',\n\t    value: function populate(data) {\n\t      for (var i = 0; i < data.length; i++) {\n\t        var row = this.add();\n\t        row.populate(data[i]);\n\t      }\n\t    }\n\t  }, {\n\t    key: 'validate',\n\t    value: function validate(value, path, silent, context) {\n\t      var _this = this;\n\t\n\t      if (!Array.isArray(value)) {\n\t        if (silent) {\n\t          return false;\n\t        }\n\t        throw new Error(path + ' must be an array');\n\t      }\n\t\n\t      return value.every(function (item, i) {\n\t        return _this._type.validate(item, path + '[' + i + ']', silent, context);\n\t      });\n\t    }\n\t  }, {\n\t    key: 'value',\n\t    value: function value() {\n\t      return this._rows.map(function (val) {\n\t        return val.value();\n\t      });\n\t    }\n\t  }, {\n\t    key: 'clear',\n\t    value: function clear() {\n\t      this._rows = [];\n\t      this._body.innerHTML = '';\n\t    }\n\t  }, {\n\t    key: 'add',\n\t    value: function add() {\n\t      var clone = this._type.clone();\n\t      this._rows.push(clone);\n\t      this._body.appendChild((0, _Tag2.default)('tr', (0, _Tag2.default)('th', (0, _Tag2.default)('input', { type: 'button', class: 'test-row-remove', value: '-' })), (0, _Tag2.default)('th', '[' + this._body.children.length + ']'), (0, _Tag2.default)('td', clone.build())));\n\t      _BranchType2.default.initializeSelectionStates(this._body.lastElementChild);\n\t      return clone;\n\t    }\n\t  }, {\n\t    key: 'remove',\n\t    value: function remove(i) {\n\t      this._rows.splice(i, 1);\n\t      this._body.children[i].remove();\n\t\n\t      for (var j = i; j < this._body.children.length; j++) {\n\t        this._body.children[j].children[1].textContent = '[' + j + ']';\n\t      }\n\t    }\n\t  }], [{\n\t    key: 'onClickAdd',\n\t    value: function onClickAdd(event) {\n\t      event.target.parentNode.parentNode.parentNode.parentNode._squalusType.add();\n\t    }\n\t  }, {\n\t    key: 'onClickRemove',\n\t    value: function onClickRemove(event) {\n\t      var row = event.target.parentNode.parentNode;\n\t      var i = Array.prototype.indexOf.call(row.parentNode.children, row);\n\t      row.parentNode.parentNode.parentNode._squalusType.remove(i);\n\t    }\n\t  }]);\n\t\n\t  return ArrayType;\n\t}();\n\t\n\texports.default = ArrayType;\n\n/***/ },\n/* 12 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _Tag = __webpack_require__(2);\n\t\n\tvar _Tag2 = _interopRequireDefault(_Tag);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar AttributeType = function () {\n\t  function AttributeType(name, type, required) {\n\t    _classCallCheck(this, AttributeType);\n\t\n\t    this._name = name;\n\t    this._type = type;\n\t    this._required = required;\n\t    this._included = false;\n\t\n\t    if (this._name.endsWith('?')) {\n\t      console.log(this);\n\t    }\n\t  }\n\t\n\t  _createClass(AttributeType, [{\n\t    key: 'name',\n\t    value: function name() {\n\t      return this._name;\n\t    }\n\t  }, {\n\t    key: 'type',\n\t    value: function type() {\n\t      return this._type;\n\t    }\n\t  }, {\n\t    key: 'required',\n\t    value: function required() {\n\t      return this._required;\n\t    }\n\t  }, {\n\t    key: 'included',\n\t    value: function included() {\n\t      return this._included;\n\t    }\n\t  }, {\n\t    key: 'clone',\n\t    value: function clone() {\n\t      return new this.constructor(this._name, this._type.clone(), this._required);\n\t    }\n\t  }, {\n\t    key: 'build',\n\t    value: function build() {\n\t      this._node = (0, _Tag2.default)('tr', { _squalusType: this }, (0, _Tag2.default)('th'), (0, _Tag2.default)('th', this._name), (0, _Tag2.default)('td', this._type.build()));\n\t      if (!this._required) {\n\t        this._node.firstElementChild.appendChild((0, _Tag2.default)('input', { type: 'button', class: 'test-attr-toggle', value: '\\uD83D\\uDCCE' }));\n\t      }\n\t      this.update();\n\t      return this._node;\n\t    }\n\t  }, {\n\t    key: 'value',\n\t    value: function value() {\n\t      return this._type.value();\n\t    }\n\t  }, {\n\t    key: 'populate',\n\t    value: function populate(data) {\n\t      this._type.populate(data);\n\t      this._included = true;\n\t      this.update();\n\t    }\n\t  }, {\n\t    key: 'validate',\n\t    value: function validate(value, path, silent, context) {\n\t      return this._type.validate(value, path, silent, context);\n\t    }\n\t  }, {\n\t    key: 'clear',\n\t    value: function clear() {\n\t      this._type.clear();\n\t      this._included = false;\n\t      this.update();\n\t    }\n\t  }, {\n\t    key: 'toggle',\n\t    value: function toggle() {\n\t      this._included = !this._included;\n\t      this.update();\n\t    }\n\t  }, {\n\t    key: 'update',\n\t    value: function update() {\n\t      if (!this._required) {\n\t        this._node.children[0].firstElementChild.classList.toggle('test-attr-included', this._included);\n\t        this._node.children[1].classList.toggle('test-attr-toggle', !this._included);\n\t        this._node.children[2].firstElementChild.classList.toggle('test-hidden', !this._included);\n\t      }\n\t    }\n\t  }], [{\n\t    key: 'onClickToggle',\n\t    value: function onClickToggle(event) {\n\t      event.target.parentNode.parentNode._squalusType.toggle();\n\t    }\n\t  }, {\n\t    key: 'initializeIncludedStates',\n\t    value: function initializeIncludedStates(root) {\n\t      Array.from(root.querySelectorAll('.test-attr-toggle')).forEach(function (elem) {\n\t        var event = new Event('click', { bubbles: true });\n\t        elem.dispatchEvent(event);\n\t      });\n\t    }\n\t  }]);\n\t\n\t  return AttributeType;\n\t}();\n\t\n\texports.default = AttributeType;\n\n/***/ },\n/* 13 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _Tag = __webpack_require__(2);\n\t\n\tvar _Tag2 = _interopRequireDefault(_Tag);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar ObjectType = function () {\n\t  function ObjectType(attributes) {\n\t    _classCallCheck(this, ObjectType);\n\t\n\t    this._attributes = attributes;\n\t    this._node = null;\n\t  }\n\t\n\t  _createClass(ObjectType, [{\n\t    key: 'attributes',\n\t    value: function attributes() {\n\t      return this._attributes;\n\t    }\n\t  }, {\n\t    key: 'clone',\n\t    value: function clone() {\n\t      return new this.constructor(this._attributes.map(function (attr) {\n\t        return attr.clone();\n\t      }));\n\t    }\n\t  }, {\n\t    key: 'build',\n\t    value: function build() {\n\t      this._node = (0, _Tag2.default)('table', { _squalusType: this }, (0, _Tag2.default)('tbody', this._attributes.map(function (type) {\n\t        return type.build();\n\t      })));\n\t      return this._node;\n\t    }\n\t  }, {\n\t    key: 'value',\n\t    value: function value() {\n\t      var data = {};\n\t      this._attributes.forEach(function (attr) {\n\t        if (attr.required() || attr.included()) {\n\t          data[attr.name()] = attr.value();\n\t        }\n\t      });\n\t      return data;\n\t    }\n\t  }, {\n\t    key: 'populate',\n\t    value: function populate(data) {\n\t      this._attributes.forEach(function (attr) {\n\t        attr.populate(data[attr.name()]);\n\t      });\n\t    }\n\t  }, {\n\t    key: 'validate',\n\t    value: function validate(value, path, silent, context) {\n\t      var _this = this;\n\t\n\t      // todo: filter/warn on unrecognized attributes\n\t\n\t      if ((typeof value === 'undefined' ? 'undefined' : _typeof(value)) !== 'object' || value === null) {\n\t        if (silent) {\n\t          return false;\n\t        }\n\t        throw new Error(path + ' must be an object');\n\t      }\n\t\n\t      for (var i = 0; i < this._attributes.length; i++) {\n\t        var attr = this._attributes[i];\n\t        var key = attr.name();\n\t\n\t        if (value[key] === undefined) {\n\t          if (attr.required()) {\n\t            if (silent) {\n\t              return false;\n\t            }\n\t            throw new Error(path + '.' + key + ' is required');\n\t          }\n\t        } else if (!attr.validate(value[key], path + '.' + key, silent, context)) {\n\t          return false;\n\t        }\n\t      }\n\t\n\t      if (context._throwUnknownObjectAttributes) {\n\t        (function () {\n\t          var allowedKeys = new Set(_this._attributes.map(function (a) {\n\t            return a.name();\n\t          }));\n\t          var diff = Object.keys(value).filter(function (x) {\n\t            return !allowedKeys.has(x);\n\t          });\n\t          if (diff.length > 0) {\n\t            throw new Error('Unknown attributes `' + diff.join(',') + '` not allowed in `' + path + '`');\n\t          }\n\t        })();\n\t      }\n\t\n\t      return true;\n\t    }\n\t  }, {\n\t    key: 'clear',\n\t    value: function clear() {\n\t      this._attributes.forEach(function (attr) {\n\t        return attr.clear();\n\t      });\n\t    }\n\t  }]);\n\t\n\t  return ObjectType;\n\t}();\n\t\n\texports.default = ObjectType;\n\n/***/ },\n/* 14 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _Tag = __webpack_require__(2);\n\t\n\tvar _Tag2 = _interopRequireDefault(_Tag);\n\t\n\tvar _BranchType = __webpack_require__(6);\n\t\n\tvar _BranchType2 = _interopRequireDefault(_BranchType);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar MapType = function () {\n\t  function MapType(key, type, required) {\n\t    _classCallCheck(this, MapType);\n\t\n\t    this._type = type;\n\t    this._key = key;\n\t    this._required = required;\n\t    this._rows = [];\n\t    this._node = null;\n\t    this._body = null;\n\t  }\n\t\n\t  _createClass(MapType, [{\n\t    key: 'name',\n\t    value: function name() {\n\t      return this._type.name() + '{}';\n\t    }\n\t  }, {\n\t    key: 'clone',\n\t    value: function clone() {\n\t      return new this.constructor(this._key.clone(), this._type.clone(), this._required ? this._required.clone() : null);\n\t    }\n\t  }, {\n\t    key: 'build',\n\t    value: function build() {\n\t      var _this = this;\n\t\n\t      this._node = (0, _Tag2.default)('div', { _squalusType: this }, (0, _Tag2.default)('table', this._body = (0, _Tag2.default)('tbody'), (0, _Tag2.default)('tfoot', (0, _Tag2.default)('th', (0, _Tag2.default)('input', { type: 'button', class: 'test-row-add', value: '+' })), (0, _Tag2.default)('th'), (0, _Tag2.default)('td'))));\n\t      if (this._required) {\n\t        this._required.attributes().forEach(function (attr) {\n\t          _this.add(attr.type(), attr.name());\n\t        });\n\t      }\n\t      return this._node;\n\t    }\n\t  }, {\n\t    key: 'populate',\n\t    value: function populate(data) {\n\t      var _this2 = this;\n\t\n\t      Object.keys(data).forEach(function (key, i) {\n\t        var row = _this2.add();\n\t        _this2._body.children[i].firstElementChild.textContent = key;\n\t        row.populate(data[key]);\n\t      });\n\t    }\n\t  }, {\n\t    key: 'validate',\n\t    value: function validate(value, path, silent, context) {\n\t      if ((typeof value === 'undefined' ? 'undefined' : _typeof(value)) !== 'object' || value === null) {\n\t        if (silent) {\n\t          return false;\n\t        }\n\t        throw new Error(path + ' must be an object');\n\t      }\n\t\n\t      var keys = Object.keys(value);\n\t      for (var i = 0; i < keys.length; i++) {\n\t        var key = keys[i];\n\t\n\t        if (!this._key.validate(key, path + '[' + key + ']*', silent, context)) {\n\t          return false;\n\t        }\n\t\n\t        if (!this._type.validate(value[key], path + '[' + key + ']', silent, context)) {\n\t          return false;\n\t        }\n\t      }\n\t\n\t      if (this._required) {\n\t        if (!this._type.validate(value, path, silent, context)) {\n\t          return false;\n\t        }\n\t      }\n\t\n\t      return true;\n\t    }\n\t  }, {\n\t    key: 'value',\n\t    value: function value() {\n\t      var _this3 = this;\n\t\n\t      var obj = {};\n\t      this._rows.forEach(function (row, i) {\n\t        var key = _this3._body.children[i].children[1].firstElementChild.value;\n\t        obj[key] = row.value();\n\t      });\n\t      return obj;\n\t    }\n\t  }, {\n\t    key: 'clear',\n\t    value: function clear() {\n\t      this._rows = [];\n\t      this._body.innerHTML = '';\n\t    }\n\t  }, {\n\t    key: 'add',\n\t    value: function add(type, key) {\n\t      var clone = type || this._type.clone();\n\t      this._rows.push(clone);\n\t      var keyField = this._key ? this._key.build() : (0, _Tag2.default)('input', { type: 'text', placeholder: 'key' });\n\t      if (key) {\n\t        keyField.value = key;\n\t      }\n\t      this._body.appendChild((0, _Tag2.default)('tr', (0, _Tag2.default)('th', (0, _Tag2.default)('input', { type: 'button', class: 'test-row-remove', value: '-' })), (0, _Tag2.default)('th', keyField), (0, _Tag2.default)('td', clone.build())));\n\t      _BranchType2.default.initializeSelectionStates(this._body.lastElementChild);\n\t      return clone;\n\t    }\n\t  }, {\n\t    key: 'remove',\n\t    value: function remove(i) {\n\t      this._rows.splice(i, 1);\n\t      this._body.children[i].remove();\n\t    }\n\t  }]);\n\t\n\t  return MapType;\n\t}();\n\t\n\texports.default = MapType;\n\n/***/ },\n/* 15 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _Tag = __webpack_require__(2);\n\t\n\tvar _Tag2 = _interopRequireDefault(_Tag);\n\t\n\tvar _ScalarType2 = __webpack_require__(9);\n\t\n\tvar _ScalarType3 = _interopRequireDefault(_ScalarType2);\n\t\n\tvar _ValueCollection = __webpack_require__(10);\n\t\n\tvar _ValueCollection2 = _interopRequireDefault(_ValueCollection);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar BoolScalarType = function (_ScalarType) {\n\t  _inherits(BoolScalarType, _ScalarType);\n\t\n\t  function BoolScalarType() {\n\t    _classCallCheck(this, BoolScalarType);\n\t\n\t    return _possibleConstructorReturn(this, (BoolScalarType.__proto__ || Object.getPrototypeOf(BoolScalarType)).apply(this, arguments));\n\t  }\n\t\n\t  _createClass(BoolScalarType, [{\n\t    key: '_parse',\n\t    value: function _parse(values) {\n\t      return new _ValueCollection2.default(values.map(function (v) {\n\t        return v === true || v === 'true';\n\t      }));\n\t    }\n\t  }, {\n\t    key: '_build',\n\t    value: function _build() {\n\t      return (0, _Tag2.default)('input', { type: 'checkbox' });\n\t    }\n\t  }, {\n\t    key: '_validate',\n\t    value: function _validate(value) {\n\t      return typeof value === 'boolean';\n\t    }\n\t  }, {\n\t    key: 'value',\n\t    value: function value() {\n\t      return this._node.checked;\n\t    }\n\t  }, {\n\t    key: 'populate',\n\t    value: function populate(data) {\n\t      this._node.checked = data;\n\t    }\n\t  }, {\n\t    key: 'clear',\n\t    value: function clear() {\n\t      this._node.checked = false;\n\t    }\n\t  }], [{\n\t    key: 'supports',\n\t    value: function supports() {\n\t      return ['bool'];\n\t    }\n\t  }]);\n\t\n\t  return BoolScalarType;\n\t}(_ScalarType3.default);\n\t\n\texports.default = BoolScalarType;\n\n/***/ },\n/* 16 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _ScalarType2 = __webpack_require__(9);\n\t\n\tvar _ScalarType3 = _interopRequireDefault(_ScalarType2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar EmailScalarType = function (_ScalarType) {\n\t  _inherits(EmailScalarType, _ScalarType);\n\t\n\t  function EmailScalarType() {\n\t    _classCallCheck(this, EmailScalarType);\n\t\n\t    return _possibleConstructorReturn(this, (EmailScalarType.__proto__ || Object.getPrototypeOf(EmailScalarType)).apply(this, arguments));\n\t  }\n\t\n\t  _createClass(EmailScalarType, [{\n\t    key: '_validate',\n\t    value: function _validate(value) {\n\t      return value && value.match(/^(([^<>()\\[\\].,;:\\s@\"]+(\\.[^<>()\\[\\].,;:\\s@\"]+)*)|(\".+\"))@(([^<>()[\\].,;:\\s@\"]+\\.)+[^<>()[\\].,;:\\s@\"]{2,})$/i);\n\t    }\n\t  }], [{\n\t    key: 'supports',\n\t    value: function supports() {\n\t      return ['email'];\n\t    }\n\t  }]);\n\t\n\t  return EmailScalarType;\n\t}(_ScalarType3.default);\n\t\n\texports.default = EmailScalarType;\n\n/***/ },\n/* 17 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _ScalarType2 = __webpack_require__(9);\n\t\n\tvar _ScalarType3 = _interopRequireDefault(_ScalarType2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar GuidScalarType = function (_ScalarType) {\n\t  _inherits(GuidScalarType, _ScalarType);\n\t\n\t  function GuidScalarType() {\n\t    _classCallCheck(this, GuidScalarType);\n\t\n\t    return _possibleConstructorReturn(this, (GuidScalarType.__proto__ || Object.getPrototypeOf(GuidScalarType)).apply(this, arguments));\n\t  }\n\t\n\t  _createClass(GuidScalarType, [{\n\t    key: '_validate',\n\t    value: function _validate(value) {\n\t      return value && value.match(/^[a-f0-9]{8}(?:-[a-f0-9]{4}){3}-[a-f0-9]{12}$/i);\n\t    }\n\t  }], [{\n\t    key: 'supports',\n\t    value: function supports() {\n\t      return ['guid'];\n\t    }\n\t  }]);\n\t\n\t  return GuidScalarType;\n\t}(_ScalarType3.default);\n\t\n\texports.default = GuidScalarType;\n\n/***/ },\n/* 18 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _NumericScalarType2 = __webpack_require__(19);\n\t\n\tvar _NumericScalarType3 = _interopRequireDefault(_NumericScalarType2);\n\t\n\tvar _IntValueCollection = __webpack_require__(21);\n\t\n\tvar _IntValueCollection2 = _interopRequireDefault(_IntValueCollection);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar IntScalarType = function (_NumericScalarType) {\n\t  _inherits(IntScalarType, _NumericScalarType);\n\t\n\t  function IntScalarType() {\n\t    _classCallCheck(this, IntScalarType);\n\t\n\t    return _possibleConstructorReturn(this, (IntScalarType.__proto__ || Object.getPrototypeOf(IntScalarType)).apply(this, arguments));\n\t  }\n\t\n\t  _createClass(IntScalarType, [{\n\t    key: '_parse',\n\t    value: function _parse(values) {\n\t      return new _IntValueCollection2.default(values);\n\t    }\n\t  }, {\n\t    key: '_validate',\n\t    value: function _validate(value) {\n\t      var unsigned = this._type.charAt(0) === 'u';\n\t      var positive = this._type.charAt(0) === 'p';\n\t      return typeof value === 'number' && (value | 0) === value && (!unsigned || value >= 0) && (!positive || value > 0);\n\t    }\n\t  }, {\n\t    key: 'value',\n\t    value: function value() {\n\t      var value = this._node.value.trim();\n\t      return value === '' ? null : parseInt(this._node.value, 10);\n\t    }\n\t  }], [{\n\t    key: 'supports',\n\t    value: function supports() {\n\t      return ['int', 'uint', 'pint', 'long', 'ulong', 'plong'];\n\t    }\n\t  }]);\n\t\n\t  return IntScalarType;\n\t}(_NumericScalarType3.default);\n\t\n\texports.default = IntScalarType;\n\n/***/ },\n/* 19 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _ScalarType2 = __webpack_require__(9);\n\t\n\tvar _ScalarType3 = _interopRequireDefault(_ScalarType2);\n\t\n\tvar _NumericValueCollection = __webpack_require__(20);\n\t\n\tvar _NumericValueCollection2 = _interopRequireDefault(_NumericValueCollection);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar NumericScalarType = function (_ScalarType) {\n\t  _inherits(NumericScalarType, _ScalarType);\n\t\n\t  function NumericScalarType() {\n\t    _classCallCheck(this, NumericScalarType);\n\t\n\t    return _possibleConstructorReturn(this, (NumericScalarType.__proto__ || Object.getPrototypeOf(NumericScalarType)).apply(this, arguments));\n\t  }\n\t\n\t  _createClass(NumericScalarType, [{\n\t    key: '_parse',\n\t    value: function _parse(values) {\n\t      return new _NumericValueCollection2.default(values);\n\t    }\n\t  }, {\n\t    key: '_validate',\n\t    value: function _validate(value) {\n\t      return typeof value === 'number';\n\t    }\n\t  }, {\n\t    key: 'value',\n\t    value: function value() {\n\t      var value = this._node.value.trim();\n\t      return value === '' ? null : parseFloat(this._node.value);\n\t    }\n\t  }], [{\n\t    key: 'supports',\n\t    value: function supports() {\n\t      return ['float'];\n\t    }\n\t  }]);\n\t\n\t  return NumericScalarType;\n\t}(_ScalarType3.default);\n\t\n\texports.default = NumericScalarType;\n\n/***/ },\n/* 20 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\t\n\tvar _ValueCollection2 = __webpack_require__(10);\n\t\n\tvar _ValueCollection3 = _interopRequireDefault(_ValueCollection2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar NumericValueCollection = function (_ValueCollection) {\n\t  _inherits(NumericValueCollection, _ValueCollection);\n\t\n\t  function NumericValueCollection(values) {\n\t    _classCallCheck(this, NumericValueCollection);\n\t\n\t    var _this = _possibleConstructorReturn(this, (NumericValueCollection.__proto__ || Object.getPrototypeOf(NumericValueCollection)).call(this, []));\n\t\n\t    _this._ranges = [];\n\t    var discrete = [];\n\t\n\t    var _iteratorNormalCompletion = true;\n\t    var _didIteratorError = false;\n\t    var _iteratorError = undefined;\n\t\n\t    try {\n\t      for (var _iterator = values[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t        var value = _step.value;\n\t\n\t        if (value.indexOf('-') !== -1) {\n\t          var parts = value.split('-');\n\t          var start = _this.parse(parts[0]);\n\t          var end = _this.parse(parts[1]);\n\t\n\t          if (isNaN(start) && parts[0] !== '') {\n\t            throw new Error('invalid value range start');\n\t          }\n\t\n\t          if (isNaN(end) && parts[1] !== '') {\n\t            throw new Error('invalid value range end');\n\t          }\n\t\n\t          if (isNaN(start) && isNaN(end)) {\n\t            throw new Error('invalid range');\n\t          }\n\t\n\t          _this._ranges.push([start, end]);\n\t        } else {\n\t          discrete.push(_this.parse(value));\n\t        }\n\t      }\n\t    } catch (err) {\n\t      _didIteratorError = true;\n\t      _iteratorError = err;\n\t    } finally {\n\t      try {\n\t        if (!_iteratorNormalCompletion && _iterator.return) {\n\t          _iterator.return();\n\t        }\n\t      } finally {\n\t        if (_didIteratorError) {\n\t          throw _iteratorError;\n\t        }\n\t      }\n\t    }\n\t\n\t    _this._values = discrete;\n\t    return _this;\n\t  }\n\t\n\t  _createClass(NumericValueCollection, [{\n\t    key: 'parse',\n\t    value: function parse(value) {\n\t      return parseFloat(value);\n\t    }\n\t  }, {\n\t    key: 'contains',\n\t    value: function contains(value) {\n\t      return _get(NumericValueCollection.prototype.__proto__ || Object.getPrototypeOf(NumericValueCollection.prototype), 'values', this).call(this).includes(value) || this._ranges.some(function (r) {\n\t        return (isNaN(r[0]) || r[0] <= value) && (isNaN(r[1]) || r[1] >= value);\n\t      });\n\t    }\n\t  }, {\n\t    key: 'values',\n\t    value: function values() {\n\t      return this._ranges.length === 0 ? _get(NumericValueCollection.prototype.__proto__ || Object.getPrototypeOf(NumericValueCollection.prototype), 'values', this).call(this) : null;\n\t    }\n\t  }]);\n\t\n\t  return NumericValueCollection;\n\t}(_ValueCollection3.default);\n\t\n\texports.default = NumericValueCollection;\n\n/***/ },\n/* 21 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _NumericValueCollection = __webpack_require__(20);\n\t\n\tvar _NumericValueCollection2 = _interopRequireDefault(_NumericValueCollection);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar maxRangeExpansion = 100;\n\t\n\tvar IntValueCollection = function (_NumericValueCollecti) {\n\t  _inherits(IntValueCollection, _NumericValueCollecti);\n\t\n\t  function IntValueCollection() {\n\t    _classCallCheck(this, IntValueCollection);\n\t\n\t    return _possibleConstructorReturn(this, (IntValueCollection.__proto__ || Object.getPrototypeOf(IntValueCollection)).apply(this, arguments));\n\t  }\n\t\n\t  _createClass(IntValueCollection, [{\n\t    key: 'parse',\n\t    value: function parse(value) {\n\t      return parseInt(value, 10);\n\t    }\n\t  }, {\n\t    key: 'values',\n\t    value: function values() {\n\t      if (this._ranges.some(function (x) {\n\t        return isNaN(x[0]) || isNaN(x[1]);\n\t      })) {\n\t        return null;\n\t      }\n\t\n\t      var rangeSize = this._ranges.reduce(function (previous, current) {\n\t        return previous + (current[1] - current[0]);\n\t      }, 0);\n\t\n\t      if (rangeSize + this._values.length > maxRangeExpansion) {\n\t        return null;\n\t      }\n\t\n\t      var values = this._values.slice();\n\t      this._ranges.forEach(function (r) {\n\t        for (var i = r[0]; i <= r[1]; i++) {\n\t          values.push(i);\n\t        }\n\t      });\n\t      return values.sort(function (a, b) {\n\t        return a - b;\n\t      });\n\t    }\n\t  }]);\n\t\n\t  return IntValueCollection;\n\t}(_NumericValueCollection2.default);\n\t\n\texports.default = IntValueCollection;\n\n/***/ },\n/* 22 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _Tag = __webpack_require__(2);\n\t\n\tvar _Tag2 = _interopRequireDefault(_Tag);\n\t\n\tvar _ScalarType2 = __webpack_require__(9);\n\t\n\tvar _ScalarType3 = _interopRequireDefault(_ScalarType2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar PasswordScalarType = function (_ScalarType) {\n\t  _inherits(PasswordScalarType, _ScalarType);\n\t\n\t  function PasswordScalarType() {\n\t    _classCallCheck(this, PasswordScalarType);\n\t\n\t    return _possibleConstructorReturn(this, (PasswordScalarType.__proto__ || Object.getPrototypeOf(PasswordScalarType)).apply(this, arguments));\n\t  }\n\t\n\t  _createClass(PasswordScalarType, [{\n\t    key: '_build',\n\t    value: function _build() {\n\t      return (0, _Tag2.default)('input', { type: 'password', placeholder: this._type });\n\t    }\n\t  }], [{\n\t    key: 'supports',\n\t    value: function supports() {\n\t      return ['password'];\n\t    }\n\t  }]);\n\t\n\t  return PasswordScalarType;\n\t}(_ScalarType3.default);\n\t\n\texports.default = PasswordScalarType;\n\n/***/ },\n/* 23 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\t__webpack_require__(24);\n\t\n\tvar _TopoSort = __webpack_require__(5);\n\t\n\tvar _TopoSort2 = _interopRequireDefault(_TopoSort);\n\t\n\tvar _TestError = __webpack_require__(25);\n\t\n\tvar _TestError2 = _interopRequireDefault(_TestError);\n\t\n\tvar _ValidationContext = __webpack_require__(26);\n\t\n\tvar _ValidationContext2 = _interopRequireDefault(_ValidationContext);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar TestCollection = function () {\n\t  function TestCollection(name, options) {\n\t    _classCallCheck(this, TestCollection);\n\t\n\t    this._name = name;\n\t    this._groups = null;\n\t    this._cancel = false;\n\t    this._sequential = !!(options || {}).sequential;\n\t    this._validationContext = new _ValidationContext2.default(!!(options || {}).throwUnknownObjectAttributes);\n\t  }\n\t\n\t  _createClass(TestCollection, [{\n\t    key: 'groups',\n\t    value: function groups(_groups) {\n\t      this._groups = _groups;\n\t      return this;\n\t    }\n\t  }, {\n\t    key: 'getMaxGroupNameLength',\n\t    value: function getMaxGroupNameLength() {\n\t      if (this._groups && !this._maxGroupNameLength) {\n\t        this._maxGroupNameLength = this._groups.reduce(function (a, b) {\n\t          return a._name.length > b._name.length ? a : b;\n\t        })._name.length;\n\t      }\n\t      return this._maxGroupNameLength;\n\t    }\n\t  }, {\n\t    key: 'execute',\n\t    value: function execute(initial) {\n\t      var _this = this;\n\t\n\t      var startTime = Date.now();\n\t\n\t      var root = Promise.resolve();\n\t      var context = new Map();\n\t      if (initial) {\n\t        Object.keys(initial).forEach(function (k) {\n\t          return context.set(k, initial[k]);\n\t        });\n\t      }\n\t\n\t      var testCount = this._groups.reduce(function (a, b) {\n\t        return a + b._tests.length;\n\t      }, 0);\n\t\n\t      var options = [];\n\t      if (this._sequential) {\n\t        options.push('sequential');\n\t      }\n\t      if (this._validationContext._throwUnknownObjectAttributes) {\n\t        options.push('throwUnknownObjectAttributes');\n\t      }\n\t\n\t      console.log();\n\t      console.log('  collection [%s] %s', this._name.green, options.length > 0 ? '(' + options.join(',') + ')' : '');\n\t      console.log();\n\t\n\t      this._groups = Array.from((0, _TopoSort2.default)(this._groups, function (g) {\n\t        return g._name;\n\t      }, function (g) {\n\t        return g._requires ? g._requires.map(function (r) {\n\t          return r._name;\n\t        }) : null;\n\t      }).values());\n\t\n\t      return Promise.all(this._groups.map(function (g, i, a) {\n\t        if (_this._sequential && i > 0) {\n\t          root = a[i - 1].execute();\n\t        }\n\t        return g.execute(context, _this, root);\n\t      })).then(function () {\n\t        console.log();\n\t        console.log('  %s after %s', (testCount + ' passing').green, (Date.now() - startTime + ' ms').magenta);\n\t        console.log();\n\t      }).catch(function (error) {\n\t        if (_this._cancel) {\n\t          return;\n\t        }\n\t\n\t        _this._cancel = true;\n\t\n\t        if (error instanceof _TestError2.default) {\n\t          error.log(context, startTime);\n\t        } else {\n\t          console.log(error);\n\t        }\n\t      });\n\t    }\n\t  }]);\n\t\n\t  return TestCollection;\n\t}();\n\t\n\texports.default = TestCollection;\n\n/***/ },\n/* 24 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"colors\");\n\n/***/ },\n/* 25 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar TestError = function () {\n\t  function TestError(test, group, collection, reason, response) {\n\t    _classCallCheck(this, TestError);\n\t\n\t    this._test = test;\n\t    this._group = group;\n\t    this._collection = collection;\n\t    this._reason = reason;\n\t    this._response = response;\n\t  }\n\t\n\t  _createClass(TestError, [{\n\t    key: 'log',\n\t    value: function log(context) {\n\t      var info = {\n\t        collection: this._collection._name,\n\t        group: this._group._name\n\t      };\n\t\n\t      if (this._test._name !== undefined && this._test._name !== null && this._test._name.length > 0) {\n\t        info.test = this._test._name;\n\t      } else {\n\t        info.test = '#' + this._group._tests.indexOf(this._test);\n\t      }\n\t\n\t      info['req-url'] = this._response.request.uri.href;\n\t      info['req-method'] = this._response.request.method.toUpperCase();\n\t\n\t      if (['post', 'put', 'patch'].includes(this._response.request.method)) {\n\t        info['req-body'] = this._response.request.body;\n\t      }\n\t\n\t      if (this._response.statusCode >= 200 && ![204, 205].includes(this._response.statusCode)) {\n\t        // the response MAY include an entity\n\t        var responseContentType = (this._response.headers['content-type'] || '').split(';')[0].toLowerCase().trim();\n\t        // technically, the content-type header is only a SHOULD, rather than a MUST for entity responses,\n\t        // but I don't care enough to sniff the response to determine the media type\n\t        if (responseContentType) {\n\t          var responseBody = this._response.body;\n\t          var responseNote = null;\n\t\n\t          if (responseContentType === 'text/html') {\n\t            if (this._response.statusCode === 500 && /<span><H1>Server Error in/i.test(responseBody)) {\n\t              responseNote = 'including only error trace from ASP.NET YSOD response';\n\t              responseBody = responseBody.replace(/^[\\s\\S]*<!--([\\s\\S]*)-->\\s*$/, '$1');\n\t            }\n\t          } else if (responseContentType === 'application/json') {\n\t            responseBody = JSON.stringify(JSON.parse(responseBody), null, 4);\n\t          }\n\t\n\t          if (this._test._type) {\n\t            info['res-squalus-type'] = this._test._type;\n\t          }\n\t\n\t          info['res-content-type'] = responseContentType;\n\t          info['res-body'] = (responseNote ? '(' + responseNote + ')' : '') + '\\n' + responseBody;\n\t        }\n\t      }\n\t\n\t      info.context = JSON.stringify(Array.from(context.keys()).reduce(function (a, b) {\n\t        return Object.assign(a, _defineProperty({}, '' + b, context.get(b)));\n\t      }, {}), null, 4);\n\t\n\t      if (this._reason instanceof Error) {\n\t        info.error = this._reason.stack;\n\t      } else {\n\t        info.reason = this._reason;\n\t      }\n\t\n\t      var maxInfoNameLength = Object.keys(info).reduce(function (a, b) {\n\t        return Math.max(a, b.length);\n\t      }, 0);\n\t\n\t      console.log();\n\t      console.log('  failed'.red);\n\t      console.log();\n\t      Object.keys(info).forEach(function (k) {\n\t        var infoVal = info[k] || '';\n\t        console.log('    %s%s : %s', k.yellow, infoVal.indexOf('\\n') === -1 ? ' '.repeat(maxInfoNameLength - k.length) : '', infoVal.replace(/\\n/g, '\\n' + ' '.repeat(4 + 4)));\n\t      });\n\t      console.log();\n\t    }\n\t  }]);\n\t\n\t  return TestError;\n\t}();\n\t\n\texports.default = TestError;\n\n/***/ },\n/* 26 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar ValidationContext = function ValidationContext(throwUnknownObjectAttributes) {\n\t  _classCallCheck(this, ValidationContext);\n\t\n\t  this._throwUnknownObjectAttributes = !!throwUnknownObjectAttributes;\n\t};\n\t\n\texports.default = ValidationContext;\n\n/***/ },\n/* 27 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar TestGroup = function () {\n\t  function TestGroup(name) {\n\t    _classCallCheck(this, TestGroup);\n\t\n\t    this._name = name;\n\t    this._requires = null;\n\t    this._parallel = false;\n\t    this._session = null;\n\t    this._tests = null;\n\t    this._promise = null;\n\t  }\n\t\n\t  _createClass(TestGroup, [{\n\t    key: 'requires',\n\t    value: function requires(groups) {\n\t      this._requires = Array.isArray(groups) ? groups : [groups];\n\t      return this;\n\t    }\n\t  }, {\n\t    key: 'parallel',\n\t    value: function parallel() {\n\t      this._parallel = true;\n\t      return this;\n\t    }\n\t  }, {\n\t    key: 'session',\n\t    value: function session(name) {\n\t      this._session = name;\n\t      return this;\n\t    }\n\t  }, {\n\t    key: 'tests',\n\t    value: function tests(_tests) {\n\t      this._tests = _tests;\n\t      return this;\n\t    }\n\t  }, {\n\t    key: 'execute',\n\t    value: function execute(context, collection, root) {\n\t      var _this = this;\n\t\n\t      if (!this._promise) {\n\t        (function () {\n\t          if (!collection || !root) {\n\t            throw new Error('uninitialized promise');\n\t          }\n\t\n\t          var when = root;\n\t          if (_this._requires) {\n\t            when = Promise.all(_this._requires.map(function (g) {\n\t              return g.execute(root, context);\n\t            }).concat([root]));\n\t          }\n\t          _this._promise = new Promise(function (resolve, reject) {\n\t            if (_this._parallel && !collection._sequential) {\n\t              when.then(function () {\n\t                Promise.all(_this._tests.map(function (t) {\n\t                  return t.execute(context, _this, collection);\n\t                })).then(resolve, reject);\n\t              });\n\t            } else {\n\t              (function () {\n\t                var tests = _this._tests.slice().reverse();\n\t\n\t                var onResolve = function onResolve() {\n\t                  if (tests.length) {\n\t                    tests.pop().execute(context, _this, collection).then(onResolve, reject);\n\t                  } else {\n\t                    resolve();\n\t                  }\n\t                };\n\t\n\t                when.then(onResolve, reject);\n\t              })();\n\t            }\n\t          });\n\t        })();\n\t      }\n\t      return this._promise;\n\t    }\n\t  }]);\n\t\n\t  return TestGroup;\n\t}();\n\t\n\texports.default = TestGroup;\n\n/***/ },\n/* 28 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _Squalus = __webpack_require__(1);\n\t\n\tvar _Squalus2 = _interopRequireDefault(_Squalus);\n\t\n\tvar _formData = __webpack_require__(29);\n\t\n\tvar _formData2 = _interopRequireDefault(_formData);\n\t\n\tvar _requestPromise = __webpack_require__(30);\n\t\n\tvar _requestPromise2 = _interopRequireDefault(_requestPromise);\n\t\n\t__webpack_require__(24);\n\t\n\tvar _TestError = __webpack_require__(25);\n\t\n\tvar _TestError2 = _interopRequireDefault(_TestError);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction padRight(str, width) {\n\t  var char = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : ' ';\n\t\n\t  if (str.length < width) {\n\t    return str + char.repeat(width - str.length);\n\t  }\n\t  return str;\n\t}\n\t\n\tvar STRIP_COMMENTS = /((\\/\\/.*$)|(\\/\\*[\\s\\S]*?\\*\\/))/mg;\n\tvar ARGUMENT_NAMES = /([^\\s,]+)/g;\n\tfunction getParamNames(func) {\n\t  var fnStr = func.toString().replace(STRIP_COMMENTS, '');\n\t  var result = fnStr.slice(fnStr.indexOf('(') + 1, fnStr.indexOf(')')).match(ARGUMENT_NAMES);\n\t  if (result === null) {\n\t    result = [];\n\t  }\n\t  return result;\n\t}\n\t\n\tfunction callFuncWithParamInjection(func, response, body, context) {\n\t  var sourceParams = new Map();\n\t  sourceParams.set('response', response);\n\t  sourceParams.set('body', body);\n\t  sourceParams.set('context', context);\n\t  var maps = [sourceParams];\n\t  Array.from(sourceParams.values()).filter(function (p) {\n\t    return p instanceof Map;\n\t  }).forEach(function (map) {\n\t    return maps.push(map);\n\t  });\n\t\n\t  return func.apply(null, getParamNames(func).map(function (name) {\n\t    var map = maps.find(function (m) {\n\t      return m.has(name);\n\t    });\n\t    if (map) {\n\t      return map.get(name);\n\t    }\n\t    return undefined;\n\t  }));\n\t}\n\t\n\tvar Test = function () {\n\t  function Test(name) {\n\t    _classCallCheck(this, Test);\n\t\n\t    this._name = name;\n\t    this._method = null;\n\t    this._url = null;\n\t    this._contentType = null;\n\t    this._responseContentType = null;\n\t    this._body = null;\n\t    this._status = null;\n\t    this._type = null;\n\t    this._save = null;\n\t    this._expect = null;\n\t    this._promise = null;\n\t  }\n\t\n\t  _createClass(Test, [{\n\t    key: 'execute',\n\t    value: function execute(context, group, collection) {\n\t      var _this = this;\n\t\n\t      if (!this._promise) {\n\t        (function () {\n\t          var url = _this._url;\n\t          if (typeof url === 'function') {\n\t            url = url(context);\n\t          }\n\t\n\t          var populateVariables = function populateVariables(m, name) {\n\t            return context.has(name) ? context.get(name) : m;\n\t          };\n\t\n\t          url = url.replace(/[@:]([a-z0-9_]+)/gi, populateVariables);\n\t          url = url.replace(/{([a-z0-9_]+)}/gi, populateVariables);\n\t\n\t          var absUrl = context.get('baseUrl') + url;\n\t\n\t          var body = _this._body;\n\t          if (typeof body === 'function') {\n\t            body = body(context);\n\t          }\n\t\n\t          var reject = function reject(reason, response) {\n\t            return Promise.reject(new _TestError2.default(_this, group, collection, reason, response));\n\t          };\n\t\n\t          var status = function status(response) {\n\t            if (!_this._status || typeof _this._status !== 'number') {\n\t              return reject('invalid response status', response);\n\t            }\n\t            if (response.statusCode !== _this._status) {\n\t              return reject('response status ' + response.statusCode + ' does not match expected ' + _this._status, response);\n\t            }\n\t            if (_this._responseContentType) {\n\t              var contentType = (response.headers['content-type'] || '').split(';', 2)[0];\n\t              if (contentType !== _this._responseContentType) {\n\t                return reject('response content type ' + contentType + ' does not match expected ' + _this._responseContentType, response);\n\t              }\n\t            }\n\t            return Promise.resolve(response);\n\t          };\n\t\n\t          var type = function type(response) {\n\t            if (_this._type) {\n\t              var responseType = _Squalus2.default.getType(_this._type);\n\t              if (!responseType) {\n\t                return reject('failed to create response type ' + _this._type, response);\n\t              }\n\t              try {\n\t                var json = JSON.parse(response.body);\n\t                response.bodyJson = json; // eslint-disable-line no-param-reassign\n\t                responseType.validate(json, 'body', false, collection._validationContext);\n\t              } catch (e) {\n\t                return reject(e, response);\n\t              }\n\t              return Promise.resolve(response);\n\t            }\n\t            return Promise.resolve(response);\n\t          };\n\t\n\t          var expect = function expect(response) {\n\t            if (_this._expect) {\n\t              return Promise.all(_this._expect.map(function (func, i) {\n\t                return Promise.resolve(callFuncWithParamInjection(func, response, response.bodyJson !== undefined ? response.bodyJson : response.body, context)).then(function (passed) {\n\t                  if (!passed) {\n\t                    return reject('expect test \\'' + i + '\\' failed', response);\n\t                  }\n\t                  return Promise.resolve(response);\n\t                });\n\t              })).then(function () {\n\t                return Promise.resolve(response);\n\t              });\n\t            }\n\t            return Promise.resolve(response);\n\t          };\n\t\n\t          var save = function save(response) {\n\t            if (_this._save) {\n\t              return Promise.all(Array.from(_this._save.keys()).map(function (key) {\n\t                return Promise.resolve(callFuncWithParamInjection(_this._save.get(key), response, response.bodyJson !== undefined ? response.bodyJson : response.body, context)).then(function (v) {\n\t                  if (context.has(key)) {\n\t                    throw new Error('The context already contains key \\'' + key + '\\'');\n\t                  }\n\t                  context.set(key, v);\n\t                  // console.log(`  [${key}] = ${v}`);\n\t                });\n\t              })).then(function () {\n\t                return Promise.resolve(response);\n\t              });\n\t            }\n\t            return Promise.resolve(response);\n\t          };\n\t\n\t          var options = {\n\t            uri: absUrl,\n\t            method: _this._method,\n\t            headers: {\n\t              'Content-Type': _this._contentType || 'application/json'\n\t            },\n\t            resolveWithFullResponse: true,\n\t            simple: false\n\t          };\n\t\n\t          var sessionCookie = context.get('http_cookie__' + group._session);\n\t          if (sessionCookie) {\n\t            options.headers.Cookie = sessionCookie;\n\t          }\n\t\n\t          var sessionAuthorization = context.get('http_authorization__' + group._session);\n\t          if (sessionAuthorization) {\n\t            options.headers.Authorization = sessionAuthorization;\n\t          }\n\t\n\t          if (_this._contentType === 'application/x-www-form-urlencoded') {\n\t            options.form = body;\n\t          } else if (_this._contentType === 'multipart/form-data') {\n\t            options.formData = body;\n\t          } else {\n\t            options.body = body;\n\t          }\n\t\n\t          _this._promise = (0, _requestPromise2.default)(options).then(function (res) {\n\t            return status(res);\n\t          }).then(function (res) {\n\t            return type(res);\n\t          }).then(function (res) {\n\t            return expect(res);\n\t          }).then(function (res) {\n\t            return save(res);\n\t          }).then(function () {\n\t            if (collection._cancel) {\n\t              return Promise.reject();\n\t            }\n\t            console.log('    %s %s %s %s', padRight(group._name, collection.getMaxGroupNameLength()).gray, padRight(_this._method.toUpperCase(), 6).magenta, url, _this._name.cyan);\n\t            return Promise.resolve();\n\t          });\n\t        })();\n\t      }\n\t      return this._promise;\n\t    }\n\t  }, {\n\t    key: 'get',\n\t    value: function get(url) {\n\t      this._method = 'get';\n\t      this._url = url;\n\t      this._status = this._status || 200;\n\t      return this;\n\t    }\n\t  }, {\n\t    key: 'post',\n\t    value: function post(url) {\n\t      this._method = 'post';\n\t      this._url = url;\n\t      this._status = this._status || 200;\n\t      return this;\n\t    }\n\t  }, {\n\t    key: 'put',\n\t    value: function put(url) {\n\t      this._method = 'put';\n\t      this._url = url;\n\t      this._status = this._status || 204;\n\t      return this;\n\t    }\n\t  }, {\n\t    key: 'delete',\n\t    value: function _delete(url) {\n\t      this._method = 'delete';\n\t      this._url = url;\n\t      this._status = this._status || 204;\n\t      return this;\n\t    }\n\t  }, {\n\t    key: 'json',\n\t    value: function json(data) {\n\t      this._contentType = 'application/json';\n\t      if (typeof data === 'function') {\n\t        this._body = function (context) {\n\t          return JSON.stringify(data(context));\n\t        };\n\t      } else {\n\t        this._body = JSON.stringify(data);\n\t      }\n\t      return this;\n\t    }\n\t  }, {\n\t    key: 'form',\n\t    value: function form(data) {\n\t      this._contentType = 'application/x-www-form-urlencoded';\n\t      this._body = data;\n\t      return this;\n\t    }\n\t  }, {\n\t    key: 'formData',\n\t    value: function formData(data) {\n\t      this._contentType = 'multipart/form-data';\n\t      var form = new _formData2.default();\n\t      Object.keys(data).forEach(function (key) {\n\t        return form.append(key, data[key]);\n\t      });\n\t      this._body = form;\n\t      return this;\n\t    }\n\t  }, {\n\t    key: 'save',\n\t    value: function save(name, func) {\n\t      if (!this._save) {\n\t        this._save = new Map();\n\t      }\n\t      this._save.set(name, func);\n\t      return this;\n\t    }\n\t  }, {\n\t    key: 'saveCookie',\n\t    value: function saveCookie(name, func) {\n\t      return this.save('http_cookie__' + name, func);\n\t    }\n\t  }, {\n\t    key: 'saveAuthorization',\n\t    value: function saveAuthorization(name, func) {\n\t      return this.save('http_authorization__' + name, func);\n\t    }\n\t  }, {\n\t    key: 'expect',\n\t    value: function expect(type) {\n\t      if (typeof type === 'function') {\n\t        if (!this._expect) {\n\t          this._expect = [];\n\t        }\n\t        this._expect.push(type);\n\t      } else if (typeof type === 'number') {\n\t        this._status = type;\n\t      } else if (type.indexOf('/') !== -1) {\n\t        this._responseContentType = type;\n\t      } else {\n\t        this._type = type;\n\t      }\n\t      return this;\n\t    }\n\t  }]);\n\t\n\t  return Test;\n\t}();\n\t\n\texports.default = Test;\n\n/***/ },\n/* 29 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"form-data\");\n\n/***/ },\n/* 30 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"request-promise\");\n\n/***/ },\n/* 31 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"path\");\n\n/***/ },\n/* 32 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"fs\");\n\n/***/ },\n/* 33 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"js-yaml\");\n\n/***/ }\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// squalus-node.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"lib/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 575924b533d1af05d1f2","import Squalus from './Squalus';\nimport TestCollection from './Automation/TestCollection';\nimport TestGroup from './Automation/TestGroup';\nimport Test from './Automation/Test';\nimport path from 'path';\nimport fs from 'fs';\nimport yaml from 'js-yaml';\n\nfunction getFiles(source, regex) {\n  const files = [];\n\n  const findChildren = (dir) =>\n    fs.readdirSync(dir).forEach(f => {\n      const child = path.join(dir, f);\n      if (fs.statSync(child).isDirectory()) {\n        findChildren(child);\n      } else if (regex.test(f)) {\n        files.push(child);\n      }\n    });\n\n  if (fs.statSync(source).isDirectory()) {\n    findChildren(source);\n  } else {\n    files.push(source);\n  }\n\n  return files;\n}\n\nclass SqualusNode extends Squalus {\n\n  static execute(typePath, collectionInstance, initialContextPath) {\n    const typePaths = Array.isArray(typePath) ? typePath : [typePath];\n    const files = [].concat.apply([], typePaths.map(p => getFiles(p, /\\.yaml$/)));\n\n    if (files.length) {\n      const types = Object.assign.apply(null,\n        files.map(file => yaml.safeLoad(fs.readFileSync(file, { encoding: 'utf8' })))\n      );\n\n      Squalus.buildTypes(types);\n    }\n\n    let context = undefined;\n    if (initialContextPath) {\n      context = JSON.parse(fs.readFileSync(initialContextPath, { encoding: 'utf8' }));\n    }\n\n    return collectionInstance.execute(context);\n  }\n}\n\nfunction collection(name, options) {\n  return new TestCollection(name, options);\n}\n\nfunction group(name) {\n  return new TestGroup(name);\n}\n\nfunction test(name) {\n  return new Test(name);\n}\n\nexport { SqualusNode as squalus, collection, group, test };\n\n\n\n// WEBPACK FOOTER //\n// ./src/SqualusNode.js","import { default as $ } from './Tag';\nimport Endpoint from './Endpoint';\nimport topoSort from './TopoSort';\n\nimport BranchType from './Type/BranchType';\nimport ArrayType from './Type/ArrayType';\nimport AttributeType from './Type/AttributeType';\nimport ObjectType from './Type/ObjectType';\nimport ScalarType from './Type/ScalarType';\nimport MapType from './Type/MapType';\n\nimport BoolScalarType from './Type/Scalar/BoolScalarType';\nimport EmailScalarType from './Type/Scalar/EmailScalarType';\nimport GuidScalarType from './Type/Scalar/GuidScalarType';\nimport IntScalarType from './Type/Scalar/IntScalarType';\nimport NullScalarType from './Type/Scalar/NullScalarType';\nimport NumericScalarType from './Type/Scalar/NumericScalarType';\nimport PasswordScalarType from './Type/Scalar/PasswordScalarType';\n\nScalarType.register([\n  BoolScalarType,\n  EmailScalarType,\n  GuidScalarType,\n  IntScalarType,\n  NullScalarType,\n  NumericScalarType,\n  PasswordScalarType,\n]);\n\nconst registeredTypes = new Map();\n\nfunction findPreviousTokenGroupStart(tokens, i) {\n  if (tokens[i] === ')') {\n    let depth = 0;\n    for (let j = i - 1; j >= 0; j--) {\n      if (tokens[j] === ')') {\n        ++depth;\n      } else if (tokens[j] === '(') {\n        if (depth === 0) {\n          return findPreviousTokenGroupStart(tokens, j - 1);\n        }\n        --depth;\n      }\n    }\n  } else if (tokens[i] === '}') {\n    for (let j = i - 1; j >= 0; j--) {\n      if (tokens[j] === '{') {\n        return findPreviousTokenGroupStart(tokens, j - 1);\n      }\n    }\n  } else if (tokens[i] === '[]') {\n    return findPreviousTokenGroupStart(tokens, i - 1);\n  }\n\n  return i >= 0 ? i : 0;\n}\n\nfunction parseTokensFromType(type, dependenciesOnly) {\n  /*\n   * e.g.\n   *   type\n   *   type:map(Name,Value)\n   *   type1|type2|type3\n   *   type1 => type2\n   *   int{1,2,7-9}?\n   *   string?[]?\n   *   (string => int{2,4-9}|bool|string?)?[]?\n   *   type1,type2 # this only applies to inheritance\n   * todo:\n   *   content-type(image/png) && signature(89 50 4E 47 0D 0A 1A 0A)\n   */\n  const tokens = type.split(/([|{}()?:,]|&&|\\[]|=>)/).map(t => t.trim()).filter(t => t !== '');\n\n  // expand shortcuts\n  for (let i = 0; i < tokens.length; i++) {\n    if (tokens[i] === '?') {\n      const previous = findPreviousTokenGroupStart(tokens, i - 1);\n      tokens.splice(previous, 0, '(');\n      tokens.splice(i + 1, 1, '|', 'null', ')');\n      --i;\n    }\n  }\n\n  if (!dependenciesOnly) {\n    return tokens;\n  }\n\n  /*\n   * remove\n   *   |\n   *   []\n   *   {...}\n   *   :func(...)\n   */\n  const dependencies = [];\n  for (let i = 0; i < tokens.length; i++) {\n    if (tokens[i] === '{') {\n      while (tokens[i] !== '}') {\n        ++i;\n      }\n      continue;\n    } else if (tokens[i] === ':') {\n      while (tokens[i] !== ')') {\n        ++i;\n      }\n      continue;\n    } else if (['[]', '=>', '|', ',', '(', ')'].includes(tokens[i])) {\n      continue;\n    }\n    dependencies.push(tokens[i]);\n  }\n\n  return dependencies;\n}\n\nfunction buildKnownDependencies() {\n  return ScalarType.getScalarTypes().map(t => ({\n    name: t,\n    data: t,\n  }));\n}\n\nfunction parseChild(types) {\n  const dependencies = new Set();\n\n  Object.keys(types).forEach(key => {\n    const type = types[key];\n\n    if (typeof type === 'string') {\n      parseTokensFromType(type, true).forEach(t => dependencies.add(t));\n    } else {\n      parseChild(type).forEach(t => dependencies.add(t));\n    }\n  });\n\n  return dependencies;\n}\n\nfunction scopify(iter, scope) {\n  let source = iter;\n  if (typeof iter === 'string') {\n    source = [iter];\n  }\n  const result = Array.from(source, item => ((\n    item.indexOf('{') === -1 && item.indexOf('[') === -1 && item.indexOf('|') === -1 &&\n    item.indexOf('.') === -1 && !ScalarType.getScalarTypes().includes(item))\n      ? `${scope}.${item}`\n      : item)\n  );\n\n  return (typeof iter === 'string') ? result[0] : result;\n}\n\nfunction parseRoot(root) {\n  const parsed = [];\n\n  Object.keys(root).forEach(scope => {\n    Object.keys(root[scope]).forEach(name => {\n      const type = root[scope][name];\n\n      const requires = new Set();\n\n      if (typeof type === 'string') {\n        parseTokensFromType(type, true).forEach(t => requires.add(t));\n      } else {\n        parseChild(type).forEach(t => requires.add(t));\n      }\n\n      parsed.push({\n        name: scopify(name, scope),\n        requires: scopify(requires, scope),\n        data: type,\n      });\n    });\n  });\n\n  return parsed;\n}\n\nfunction createAttrFromName(name, type) {\n  return new AttributeType(name.replace(/\\?$/, ''), type.clone(), !name.endsWith('?'));\n}\n\nfunction stripOuterParens(array) {\n  if (array[0] === '(' && array[array.length - 1] === ')') {\n    array.splice(array.length - 1);\n    array.splice(0, 1);\n  }\n}\n\nfunction splitArray(array, split) {\n  stripOuterParens(array);\n\n  const chunks = [];\n  let chunk = [];\n  const stack = [];\n  array.forEach(token => {\n    if (token === '(') {\n      stack.push(true);\n      chunk.push(token);\n    } else if (token === ')') {\n      stack.pop();\n      chunk.push(token);\n    } else if (!stack.length && token === split) {\n      if (chunk.length) {\n        chunks.push(chunk);\n      }\n      chunk = [];\n    } else {\n      chunk.push(token);\n    }\n  });\n  if (chunk.length) {\n    chunks.push(chunk);\n  }\n\n  chunks.forEach(c => stripOuterParens(c));\n\n  return chunks;\n}\n\nfunction buildType(def, scope) {\n  // shortcuts\n  if (typeof def === 'boolean') {\n    def = def ? 'bool{true}' : 'bool{false}'; // eslint-disable-line no-param-reassign\n  }\n\n  // references\n  if (typeof def === 'string') {\n    const tokens = parseTokensFromType(def);\n\n    const branches = splitArray(tokens, '|');\n    if (branches.length > 1) {\n      if (branches.length !== new Set(branches).size) {\n        throw new Error('duplicate types in branch list');\n      }\n      const branchMap = new Map();\n      branches.forEach(branch => {\n        branchMap.set(branch, buildType(scopify(branch.join(''), scope)));\n      });\n      return BranchType.create(branchMap);\n    }\n\n    const map = splitArray(tokens, '=>');\n    if (map.length > 1) {\n      return new MapType(buildType(map[0].join(''), scope), buildType(map[1].join(''), scope));\n    }\n\n    if (tokens[tokens.length - 1] === '[]') {\n      return new ArrayType(buildType(tokens.slice(0, tokens.length - 1).join(''), scope));\n    }\n\n    if (tokens[tokens.length - 1] === '}') {\n      return ScalarType.create(\n        tokens[tokens.indexOf('{') - 1],\n        tokens.slice(tokens.indexOf('{') + 1, tokens.length - 1).filter(t => t !== ',')\n      );\n    }\n\n    if (tokens[tokens.length - 1] === ')') {\n      const transformStart = tokens.indexOf(':');\n      const transformName = tokens[transformStart + 1];\n      const transformArgs = tokens.slice(transformStart + 3, tokens.length - 1).filter(t => t !== ',');\n\n      const transforms = {\n        map: type => {\n          const branchMap = new Map();\n          type.attributes().forEach(attr =>\n            branchMap.set(attr.name(), new ObjectType([\n              new AttributeType(transformArgs[0], ScalarType.create('string', [attr.name()]), true),\n              new AttributeType(transformArgs[1], attr.type().clone(), true),\n            ]))\n          );\n          return new BranchType(branchMap);\n        },\n      };\n      if (!transforms[transformName]) {\n        throw new Error('unsupported transform');\n      }\n      return transforms[transformName](buildType(tokens.slice(0, transformStart).join(''), scope));\n    }\n\n    const scopedName = scopify(tokens.join(''), scope);\n    if (registeredTypes.has(scopedName)) {\n      return registeredTypes.get(scopedName).clone();\n    }\n    return ScalarType.create(scopedName);\n  }\n\n  // check for inheritance\n  const attributeNames = Object.keys(def).filter(key => key !== '^');\n  const inheritanceAttr = def['^'];\n  if (inheritanceAttr) {\n    if (typeof inheritanceAttr !== 'string') {\n      throw new Error('inheritance attribute must be a string');\n    }\n\n    const parents = parseTokensFromType(inheritanceAttr).filter(t => t !== ',').map(parent =>\n      registeredTypes.get(scopify(parent, scope))\n    );\n\n    if (parents.length === 1 && parents[0] instanceof BranchType) {\n      const parent = parents[0];\n      if (!Array.from(parent.types.values()).every(branchType => branchType instanceof Object)) {\n        throw new Error('inheritance from branch with non-object');\n      }\n      // create inherited version of each object and re-aggregate\n      const inheritedTypes = new Map();\n      parent.types.forEach((branchType, key) => {\n        const builder = (t, k) => {\n          // add attributes to each branch\n          const attributes = new Map();\n          t.attributes().forEach(attr => {\n            attributes.set(attr.name(), attr.clone());\n          });\n          attributeNames.forEach(attr =>\n            attributes.set(attr.trim('?'), createAttrFromName(attr, buildType(def[attr], scope)))\n          );\n          inheritedTypes.set(k, new ObjectType(Array.from(attributes.values())));\n        };\n\n        if (branchType instanceof BranchType) {\n          branchType.types.forEach((t, k) => builder(t, `${key}-${k}`));\n        } else {\n          builder(branchType, key);\n        }\n      });\n      return new BranchType(inheritedTypes);\n    } else if (parents.every(parent => parent instanceof ObjectType)) {\n      // simple inheritance\n      const attributes = new Map();\n      parents.forEach(parent => {\n        parent.attributes().forEach(parentAttr => {\n          attributes.set(parentAttr, parentAttr.clone());\n        });\n      });\n      attributeNames.forEach(attr =>\n        attributes.set(attr.trim('?'), createAttrFromName(attr, buildType(def[attr], scope)))\n      );\n      return new ObjectType(Array.from(attributes.values()));\n    }\n\n    throw new Error('invalid parent type');\n  }\n\n  // no inheritance\n  return new ObjectType(attributeNames.map(attr => createAttrFromName(attr, buildType(def[attr], scope))));\n}\n\nexport default class Squalus {\n\n  static getType(name) {\n    return registeredTypes.get(name);\n  }\n\n  static buildTypes(root) {\n    // check names and dependencies\n    const dependencies = buildKnownDependencies().concat(parseRoot(root || {}));\n    const sorted = topoSort(dependencies, d => d.name, d => d.requires);\n\n    sorted.forEach((type, name) => {\n      const scope = name.indexOf('.') ? name.substring(0, name.indexOf('.')) : null;\n      registeredTypes.set(name, buildType(type.data, scope));\n    });\n  }\n\n  static buildTests(tests, baseUrl) {\n    const root = document.body.appendChild($('div', { id: 'api-root' }));\n    const api = root.appendChild($('div', { id: 'api-container' }));\n    root.appendChild($('div', { id: 'output-container' }));\n    const ul = api.appendChild($('ul', { class: 'api-tests' }));\n\n    tests.forEach(test => {\n      const supportedMethods = [\n        'get',\n        'put',\n        'post',\n        'delete',\n      ];\n\n      const providedMethods = supportedMethods.filter(x => test[x]);\n\n      if (providedMethods.length !== 1) {\n        throw new Error('missing or invalid method');\n      }\n\n      const def = new Endpoint(\n        baseUrl,\n        test[providedMethods[0]],\n        providedMethods[0].toUpperCase(),\n        test.headers ? buildType(test.headers) : null,\n        test.urlParams ? buildType(test.urlParams) : null,\n        test.queryParams ? buildType(test.queryParams) : null,\n        test.body ? buildType(test.body) : null\n      );\n      ul.appendChild($('li', def.build()));\n\n      def.load();\n    });\n\n    const events = {\n      change: {\n        'select.test-option': BranchType.onChange,\n      },\n      click: {\n        '.test-row-add': ArrayType.onClickAdd,\n        '.test-row-remove': ArrayType.onClickRemove,\n        '.test-attr-toggle': AttributeType.onClickToggle,\n        '.test-submit': Endpoint.onSubmit,\n      },\n      keypress: {\n        'input[type=text],input[type=checkbox],select': Endpoint.onKeyPress,\n      },\n    };\n\n    window.addEventListener('beforeunload', Endpoint.onBeforeUnload);\n\n    // handle events\n    Object.keys(events).forEach(type => {\n      root.addEventListener(type, e => {\n        if (e.target) {\n          const def = Endpoint.closest(e.target);\n          if (def) {\n            Object.keys(events[type]).forEach(selector => {\n              if (e.target.matches(selector)) {\n                const func = events[type][selector];\n                func(e, def);\n              }\n            });\n          }\n        }\n      });\n    });\n\n    BranchType.initializeSelectionStates(root);\n    AttributeType.initializeIncludedStates(root);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/Squalus.js","\nfunction isObject(obj) {\n  return obj === Object(obj) && !Array.isArray(obj);\n}\n\nfunction appendNode(element, content) {\n  if (content && content.nodeType) {\n    element.appendChild(content);\n  } else {\n    const div = document.createElement('div');\n    div.innerHTML = (content === undefined) ? '' : content;\n\n    while (div.firstChild) {\n      element.appendChild(div.firstChild);\n    }\n  }\n}\n\n// (tagName, attributes?, children?, children?)\nexport default function (tagName, ...args) {\n  const attributes = (args.length && isObject(args[0]) && !args[0].nodeType) ? args[0] : {};\n  const children = args.slice((args[0] === attributes) ? 1 : 0);\n\n  const elem = document.createElement(tagName);\n\n  Object.keys(attributes).forEach(name => {\n    if (name.startsWith('data-')) {\n      elem.dataset[name.substr(5)] = attributes[name];\n    } else if (name.startsWith('_')) {\n      elem[name] = attributes[name];\n    } else {\n      elem.setAttribute(name, attributes[name]);\n    }\n  });\n\n  children.forEach((child) => {\n    if (Array.isArray(child)) {\n      child.forEach((c) => {\n        appendNode(elem, c);\n      });\n    } else {\n      appendNode(elem, child);\n    }\n  });\n\n  return elem;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/Tag.js","import { default as $ } from './Tag';\nimport RequestInstance from './RequestInstance';\n\nfunction closestAncestorByClassName(elem, className) {\n  let e = elem.parentNode;\n  while (e) {\n    if (e.classList && e.classList.contains(className)) {\n      return e;\n    }\n    e = e.parentNode;\n  }\n  return null;\n}\n\nfunction convertValueToParam(val, key, query) {\n  if (Array.isArray(val)) {\n    val.forEach((item, i) =>\n      convertValueToParam(item, `${key}[${i}]`, query)\n    );\n  } else if (typeof val === 'object') {\n    Object.keys(val).forEach((name) =>\n      convertValueToParam(val[name], `${key}[${name}]`, query)\n    );\n  } else if (typeof val === 'boolean') {\n    query.set(key, encodeURI(val ? 1 : 0));\n  } else {\n    query.set(key, encodeURI(val));\n  }\n}\n\nconst sections = {\n  headers: 'http-headers',\n  urlParams: 'url-params',\n  queryParams: 'query-params',\n  body: 'body',\n};\n\nexport default class Endpoint {\n\n  constructor(baseUrl, url, method, headers, urlParams, queryParams, body) {\n    this._baseUrl = baseUrl;\n    this._url = url;\n    this._method = method;\n    this._headers = headers;\n    this._urlParams = urlParams;\n    this._queryParams = queryParams;\n    this._body = body;\n\n    // todo: verify that url params is object and that there is a 1:1 correspondence with attributes and placeholders\n    // query params can be object, map, or scalar?\n    // headers can be object or map\n\n    // const names = this._url.match(/{[^}\\s]+}/g).map(m => m.substr(1, m.length - 2));\n\n    this._node = null;\n  }\n\n  section(name) {\n    return this[`_${name}`];\n  }\n\n  headers() {\n    return this._headers ? this._headers.value() : null;\n  }\n\n  urlParams() {\n    return this._urlParams ? this._urlParams.value() : null;\n  }\n\n  queryParams() {\n    return this._queryParams ? this._queryParams.value() : null;\n  }\n\n  body() {\n    return this._body ? this._body.value() : null;\n  }\n\n  clear() {\n    this._body.clear();\n  }\n\n  lock() {\n    this._body.find('*').prop('disabled', true);\n  }\n\n  unlock() {\n    this._body.find('*').prop('disabled', false);\n  }\n\n  getPopulatedUrl() {\n    let url = this._url;\n\n    const urlParams = this.urlParams();\n    if (urlParams) {\n      for (const key of Object.keys(urlParams)) {\n        url = url.replace(`{${key}}`, encodeURI(urlParams[key]));\n      }\n    }\n\n    url = new URL(url, this._baseUrl);\n\n    const queryParams = this.queryParams();\n    if (queryParams) {\n      const query = new Map();\n      for (const key of Object.keys(queryParams)) {\n        const val = queryParams[key];\n        if (val !== null && val !== '') {\n          convertValueToParam(val, key, query);\n        }\n      }\n      query.forEach((value, key) => url.searchParams.append(key, value));\n    }\n\n    return url;\n  }\n\n  build() {\n    this._node = $('div', { class: `endpoint endpoint-method-${this._method.toLowerCase()}`, _squalusDef: this },\n      $('div', { class: 'endpoint-header' },\n        $('span', { class: 'endpoint-method' }, this._method),\n        $('span', { class: 'endpoint-url' }, this._url)\n      )\n    );\n\n    const test = this._node.appendChild($('div', { class: 'endpoint-test' }));\n\n    for (const key of Object.keys(sections)) {\n      const section = this.section(key);\n      if (section) {\n        test.appendChild($('div', { class: `endpoint-test-${key === 'body' ? 'body' : 'params'}` },\n          $('div', { class: 'endpoint-test-label' }, sections[key]),\n          section.build())\n        );\n      }\n    }\n\n    test.appendChild($('div', { class: 'endpoint-test-controls' },\n      $('input', { type: 'button', value: this._method, class: 'test-submit' }),\n      $('span', { class: 'endpoint-test-status' })\n    ));\n\n    return this._node;\n  }\n\n  submit() {\n    // todo: trap parse errors\n    const url = this.getPopulatedUrl();\n    const headers = this.headers();\n    const body = this.body();\n\n    const options = {\n      method: this._method,\n      credentials: 'same-origin',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    };\n\n    if (headers) {\n      for (const header of Object.keys(headers)) {\n        options.headers[header] = headers[header];\n      }\n    }\n\n    if (['PUT', 'POST', 'PATCH'].includes(this._method)) {\n      options.body = JSON.stringify(body);\n    }\n\n    RequestInstance.execute(url, options).then(req => {\n      req.dump();\n    });\n  }\n\n  storageKey() {\n    return `squalus:${this._method.toLowerCase()}-${this._url}`;\n  }\n\n  load() {\n    // todo: load from storage if the endpoint hasn't changed\n\n    for (const key of Object.keys(sections)) {\n      const section = this.section(key);\n      if (section) {\n        let value = localStorage.getItem(`${this.storageKey()}-${key}`);\n        if (value != null) {\n          try {\n            value = JSON.parse(value);\n          } catch (e) {\n            continue;\n          }\n          try {\n            section.populate(value);\n          } catch (e) {\n            // todo: sort this out\n          }\n        }\n      }\n    }\n  }\n\n  unload() {\n    // todo: save values, ignoring parse errors? not sure, it needs to be able to recreate branches, etc.\n\n    for (const key of Object.keys(sections)) {\n      const section = this.section(key);\n      if (section) {\n        localStorage.setItem(`${this.storageKey()}-${key}`, JSON.stringify(section.value()));\n      }\n    }\n  }\n\n  static onBeforeUnload() {\n    Array.from(document.getElementsByClassName('endpoint')).forEach(node => node._squalusDef.unload());\n  }\n\n  static onKeyPress(event, def) {\n    if (event.which === 13) {\n      event.preventDefault();\n      (def || this.closest(event.target)).submit();\n    }\n  }\n\n  static onSubmit(event, def) {\n    (def || this.closest(event.target)).submit();\n  }\n\n  static closest(elem) {\n    const node = closestAncestorByClassName(elem, 'endpoint');\n    return node ? node._squalusDef : null;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/Endpoint.js","import { default as $ } from './Tag';\n\nfunction getOutputContainer() {\n  return document.getElementById('output-container');\n}\n\nexport default class RequestInstance {\n\n  constructor(url, options) {\n    this._url = url;\n    this._options = options;\n    this._sendTime = (new Date()).getTime();\n    this._responseTime = null;\n    this._responseUrl = null;\n    this._responseStatus = null;\n    this._responseHeaders = null;\n    this._responseBody = null;\n  }\n\n  static execute(url, options) {\n    const result = new RequestInstance(url, options);\n\n    const output = getOutputContainer();\n    output.innerHTML = '';\n\n    const sections = {\n      url: result._url,\n      method: result._options.method,\n      status: 'fetching...',\n    };\n\n    RequestInstance.dumpSections(sections);\n\n    return fetch(url, options).then(res =>\n      res.text().then(body => {\n        result._responseTime = (new Date()).getTime();\n        result._responseUrl = res.url;\n        result._responseStatus = res.status;\n        result._responseHeaders = res.headers;\n        result._responseBody = body;\n        return result;\n      })\n    ).catch(error => {\n      console.log(error.message);\n    });\n  }\n\n  dump() {\n    const output = getOutputContainer();\n    output.innerHTML = '';\n\n    let responseBody = this._responseBody;\n    const contentType = this._responseHeaders.get('content-type');\n    if (contentType && contentType.indexOf('application/json') !== -1) {\n      try {\n        responseBody = JSON.stringify(JSON.parse(responseBody), null, 2);\n      } catch (e) {\n        // html comes back for some errors\n      }\n    }\n\n    const body = $('pre');\n    body.textContent = responseBody;\n\n    const sections = {\n      url: this._responseUrl,\n      method: this._options.method,\n      status: this._responseStatus,\n      time: `${this._responseTime - this._sendTime} ms`,\n      headers: $('table', Array.from(this._responseHeaders.entries()).map(x => $('tr', $('th', x[0]), $('td', x[1])))),\n    };\n\n    if (this._responseHeaders.get('content-type')) {\n      sections.body = body;\n    }\n\n    RequestInstance.dumpSections(sections);\n  }\n\n  static dumpSections(sections) {\n    const output = getOutputContainer();\n    for (const key of Object.keys(sections)) {\n      output.appendChild($('div', { class: 'output-section' },\n        $('div', { class: 'output-section-label' }, key),\n        $('div', { class: 'output-section-content' }, sections[key])\n      ));\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/RequestInstance.js","\nexport default function (elements, getName, getRequires) {\n  const edges = new Map();\n  const s = [];\n\n  const sources = new Map();\n  elements.forEach(elem => sources.set(getName(elem), elem));\n\n  sources.forEach(source => {\n    const requires = getRequires(source);\n    if (requires && requires.length) {\n      requires.forEach(dependency => {\n        if (!sources.has(dependency)) {\n          throw new Error(`Unknown dependency ${dependency}`);\n        }\n        if (!edges.has(dependency)) {\n          edges.set(dependency, []);\n        }\n        edges.get(dependency).push(getName(source));\n      });\n    } else {\n      s.push(source);\n    }\n  });\n\n  let parents;\n  const sorted = new Map();\n  while (s.length > 0) {\n    const nSource = s.pop();\n    const n = getName(nSource);\n    sorted.set(n, nSource);\n    if (edges.has(n)) {\n      parents = edges.get(n);\n      while (parents.length > 0) {\n        const m = parents.pop();\n        const mSource = sources.get(m);\n        const requires = getRequires(mSource);\n        if (!requires || !requires.find(d => !sorted.has(d))) {\n          s.push(mSource);\n        }\n      }\n    }\n  }\n\n  edges.forEach(value => {\n    if (value.size > 0) {\n      throw new Error('Graph cycle; unable to sort');\n    }\n  });\n\n  return sorted;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/TopoSort.js","import { default as $ } from './../Tag';\r\nimport NullableType from './NullableType';\r\nimport NullScalarType from './Scalar/NullScalarType';\r\n\r\nexport default class BranchType {\r\n\r\n  constructor(types) {\r\n    if (types.size < 2) {\r\n      throw new Error('degenerate branch type');\r\n    }\r\n\r\n    this._types = types;\r\n    this._node = null;\r\n  }\r\n\r\n  get types() {\r\n    return this._types;\r\n  }\r\n\r\n  clone() {\r\n    const types = new Map();\r\n    this._types.forEach((type, key) => types.set(key, type.clone()));\r\n    return new this.constructor(types);\r\n  }\r\n\r\n  build() {\r\n    this._node = $('div', { _squalusType: this },\r\n      $('select', { class: 'test-option' },\r\n        Array.from(this._types.keys(), key => $('option', key))\r\n      ),\r\n      Array.from(this._types.values(), value => $('div', { class: 'test-option' }, value.build()))\r\n    );\r\n    return this._node;\r\n  }\r\n\r\n  value() {\r\n    return Array.from(this._types.values())[this._node.firstElementChild.selectedIndex].value();\r\n  }\r\n\r\n  populate(data) {\r\n    // validate data to determine branch\r\n    const types = Array.from(this._types.values());\r\n    const i = types.findIndex(type =>\r\n      type.validate(data, '', true)\r\n    );\r\n\r\n    if (i === -1) {\r\n      throw new Error('branch validation failed');\r\n    }\r\n\r\n    const select = this._node.firstElementChild;\r\n    select.selectedIndex = i;\r\n\r\n    const event = new Event('change', { bubbles: true });\r\n    select.dispatchEvent(event);\r\n\r\n    types[i].populate(data);\r\n  }\r\n\r\n  validate(value, path, silent, context) {\r\n    if (!Array.from(this._types.values()).some(type => type.validate(value, path, true, context))) {\r\n      if (silent) {\r\n        return false;\r\n      }\r\n      throw new Error(`${path} does not match any candidate`);\r\n    }\r\n    return true;\r\n  }\r\n\r\n  clear() {\r\n    this._types.forEach(type => type.clear());\r\n  }\r\n\r\n  static onChange(event) {\r\n    let node = event.target;\r\n    let i = 0;\r\n    while (node.nextElementSibling) {\r\n      node = node.nextElementSibling;\r\n      node.classList.toggle('test-hidden', i++ !== event.target.selectedIndex);\r\n    }\r\n  }\r\n\r\n  static initializeSelectionStates(root) {\r\n    Array.from(root.querySelectorAll('select')).forEach(elem => {\r\n      const event = new Event('change', { bubbles: true });\r\n      elem.dispatchEvent(event);\r\n    });\r\n  }\r\n\r\n  static create(types) {\r\n    if (types.size === 2) {\r\n      const nonNullTypes = Array.from(types.values()).filter(t => !(t instanceof NullScalarType));\r\n      if (nonNullTypes.length === 1) {\r\n        return new NullableType(nonNullTypes[0]);\r\n      }\r\n    }\r\n    return new BranchType(types);\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/Type/BranchType.js","export default class NullableType {\r\n\r\n  constructor(type) {\r\n    this._type = type;\r\n  }\r\n\r\n  name() {\r\n    return this._type.name();\r\n  }\r\n\r\n  build() {\r\n    return this._type.build();\r\n  }\r\n\r\n  clone() {\r\n    return new this.constructor(this._type.clone());\r\n  }\r\n\r\n  value() {\r\n    let val = this._type.value();\r\n    if (val === '') {\r\n      val = null;\r\n    }\r\n    return val;\r\n  }\r\n\r\n  validate(value, path, silent, context) {\r\n    return (value === null) || this._type.validate(value, path, silent, context);\r\n  }\r\n\r\n  populate(data) {\r\n    this._type.populate(data);\r\n  }\r\n\r\n  clear() {\r\n    this._type.clear();\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/Type/NullableType.js","import ScalarType from './../ScalarType';\r\n\r\nexport default class NullScalarType extends ScalarType {\r\n\r\n  _build() {\r\n    return document.createTextNode('');\r\n  }\r\n\r\n  _validate(value) {\r\n    return value === null;\r\n  }\r\n\r\n  value() {\r\n    return null;\r\n  }\r\n\r\n  static supports() {\r\n    return ['null'];\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/Type/Scalar/NullScalarType.js","import { default as $ } from './../Tag';\r\nimport ValueCollection from './Scalar/ValueCollection';\r\n\r\nconst implementations = new Map();\r\n[\r\n  'string',\r\n  'date',\r\n  'datetime',\r\n  'utc',\r\n  'timestamp',\r\n].forEach(type => implementations.set(type, null));\r\n\r\nexport default class ScalarType {\r\n\r\n  constructor(type, values) {\r\n    this._type = type;\r\n    this._values = Array.isArray(values) ? this._parse(values) : null;\r\n    this._node = null;\r\n  }\r\n\r\n  get name() {\r\n    return this._type;\r\n  }\r\n\r\n  clone() {\r\n    return new this.constructor(this._type, this._values);\r\n  }\r\n\r\n  _parse(values) {\r\n    return new ValueCollection(values);\r\n  }\r\n\r\n  _build() {\r\n    if (this._values) {\r\n      const values = this._values.values();\r\n      if (values) {\r\n        if (values.length === 1) {\r\n          return $('input', { type: 'text', disabled: true, value: values[0] });\r\n        }\r\n        return $('select',\r\n          values.map(v => $('option', v))\r\n        );\r\n      }\r\n    }\r\n    return $('input', { type: 'text', placeholder: this._type });\r\n  }\r\n\r\n  build() {\r\n    this._node = this._build();\r\n    this._node._squalusType = this;\r\n    return this._node;\r\n  }\r\n\r\n  value() {\r\n    return this._node.value;\r\n  }\r\n\r\n  populate(data) {\r\n    this._node.value = (data === undefined) ? '' : data;\r\n  }\r\n\r\n  _validate(value) {\r\n    return typeof value === 'string';\r\n  }\r\n\r\n  validate(value, path, silent) {\r\n    if (!this._validate(value, path, silent)) {\r\n      if (silent) {\r\n        return false;\r\n      }\r\n      throw new Error(`${path} must be of type ${this._type}`);\r\n    }\r\n\r\n    if (this._values && !this._values.contains(value)) {\r\n      if (silent) {\r\n        return false;\r\n      }\r\n      throw new Error(`${path}: '${value}' must be in [${this._values.toString()}]`);\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  clear() {\r\n    if (this._values) {\r\n      if (this._node.selectedIndex !== undefined) {\r\n        this._node.selectedIndex = 0;\r\n      }\r\n    } else {\r\n      this._node.value = '';\r\n    }\r\n  }\r\n\r\n  static register(types) {\r\n    types.forEach(type => {\r\n      const supports = type.supports();\r\n      (Array.isArray(supports) ? supports : [supports]).forEach(s => {\r\n        if (implementations.has(s)) {\r\n          throw new TypeError(`duplicate registration for scalar type ${s}`);\r\n        }\r\n        implementations.set(s, type);\r\n      });\r\n    });\r\n  }\r\n\r\n  static create(type, values) {\r\n    return new (implementations.get(type) || ScalarType)(type, values);\r\n  }\r\n\r\n  static getScalarTypes() {\r\n    return Array.from(implementations.keys());\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/Type/ScalarType.js","export default class ValueCollection {\r\n\r\n  constructor(values) {\r\n    this._values = values;\r\n  }\r\n\r\n  contains(value) {\r\n    return this._values.includes(value);\r\n  }\r\n\r\n  values() {\r\n    return this._values;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/Type/Scalar/ValueCollection.js","import { default as $ } from './../Tag';\r\nimport BranchType from './BranchType';\r\n\r\nexport default class ArrayType {\r\n\r\n  constructor(type) {\r\n    this._type = type;\r\n    this._rows = [];\r\n    this._node = null;\r\n    this._body = null;\r\n  }\r\n\r\n  name() {\r\n    return `${this._type.name()}[]`;\r\n  }\r\n\r\n  clone() {\r\n    return new this.constructor(this._type.clone());\r\n  }\r\n\r\n  build() {\r\n    this._node = $('div', { _squalusType: this },\r\n      $('table',\r\n        this._body = $('tbody'),\r\n        $('tfoot',\r\n          $('th', $('input', { type: 'button', class: 'test-row-add', value: '+' })),\r\n          $('th'),\r\n          $('td')\r\n        )\r\n      )\r\n    );\r\n    return this._node;\r\n  }\r\n\r\n  populate(data) {\r\n    for (let i = 0; i < data.length; i++) {\r\n      const row = this.add();\r\n      row.populate(data[i]);\r\n    }\r\n  }\r\n\r\n  validate(value, path, silent, context) {\r\n    if (!Array.isArray(value)) {\r\n      if (silent) {\r\n        return false;\r\n      }\r\n      throw new Error(`${path} must be an array`);\r\n    }\r\n\r\n    return value.every((item, i) => this._type.validate(item, `${path}[${i}]`, silent, context));\r\n  }\r\n\r\n  value() {\r\n    return this._rows.map((val) => val.value());\r\n  }\r\n\r\n  clear() {\r\n    this._rows = [];\r\n    this._body.innerHTML = '';\r\n  }\r\n\r\n  add() {\r\n    const clone = this._type.clone();\r\n    this._rows.push(clone);\r\n    this._body.appendChild($('tr',\r\n      $('th', $('input', { type: 'button', class: 'test-row-remove', value: '-' })),\r\n      $('th', `[${this._body.children.length}]`),\r\n      $('td', clone.build())\r\n    ));\r\n    BranchType.initializeSelectionStates(this._body.lastElementChild);\r\n    return clone;\r\n  }\r\n\r\n  remove(i) {\r\n    this._rows.splice(i, 1);\r\n    this._body.children[i].remove();\r\n\r\n    for (let j = i; j < this._body.children.length; j++) {\r\n      this._body.children[j].children[1].textContent = `[${j}]`;\r\n    }\r\n  }\r\n\r\n  static onClickAdd(event) {\r\n    event.target.parentNode.parentNode.parentNode.parentNode._squalusType.add();\r\n  }\r\n\r\n  static onClickRemove(event) {\r\n    const row = event.target.parentNode.parentNode;\r\n    const i = Array.prototype.indexOf.call(row.parentNode.children, row);\r\n    row.parentNode.parentNode.parentNode._squalusType.remove(i);\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/Type/ArrayType.js","import { default as $ } from './../Tag';\r\n\r\nexport default class AttributeType {\r\n\r\n  constructor(name, type, required) {\r\n    this._name = name;\r\n    this._type = type;\r\n    this._required = required;\r\n    this._included = false;\r\n\r\n    if (this._name.endsWith('?')) {\r\n      console.log(this);\r\n    }\r\n  }\r\n\r\n  name() {\r\n    return this._name;\r\n  }\r\n\r\n  type() {\r\n    return this._type;\r\n  }\r\n\r\n  required() {\r\n    return this._required;\r\n  }\r\n\r\n  included() {\r\n    return this._included;\r\n  }\r\n\r\n  clone() {\r\n    return new this.constructor(this._name, this._type.clone(), this._required);\r\n  }\r\n\r\n  build() {\r\n    this._node = $('tr', { _squalusType: this },\r\n      $('th'),\r\n      $('th', this._name),\r\n      $('td', this._type.build())\r\n    );\r\n    if (!this._required) {\r\n      this._node.firstElementChild.appendChild(\r\n        $('input', { type: 'button', class: 'test-attr-toggle', value: '\\uD83D\\uDCCE' })\r\n      );\r\n    }\r\n    this.update();\r\n    return this._node;\r\n  }\r\n\r\n  value() {\r\n    return this._type.value();\r\n  }\r\n\r\n  populate(data) {\r\n    this._type.populate(data);\r\n    this._included = true;\r\n    this.update();\r\n  }\r\n\r\n  validate(value, path, silent, context) {\r\n    return this._type.validate(value, path, silent, context);\r\n  }\r\n\r\n  clear() {\r\n    this._type.clear();\r\n    this._included = false;\r\n    this.update();\r\n  }\r\n\r\n  toggle() {\r\n    this._included = !this._included;\r\n    this.update();\r\n  }\r\n\r\n  update() {\r\n    if (!this._required) {\r\n      this._node.children[0].firstElementChild.classList.toggle('test-attr-included', this._included);\r\n      this._node.children[1].classList.toggle('test-attr-toggle', !this._included);\r\n      this._node.children[2].firstElementChild.classList.toggle('test-hidden', !this._included);\r\n    }\r\n  }\r\n\r\n  static onClickToggle(event) {\r\n    event.target.parentNode.parentNode._squalusType.toggle();\r\n  }\r\n\r\n  static initializeIncludedStates(root) {\r\n    Array.from(root.querySelectorAll('.test-attr-toggle')).forEach(elem => {\r\n      const event = new Event('click', { bubbles: true });\r\n      elem.dispatchEvent(event);\r\n    });\r\n  }\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/Type/AttributeType.js","import { default as $ } from './../Tag';\r\n\r\nexport default class ObjectType {\r\n\r\n  constructor(attributes) {\r\n    this._attributes = attributes;\r\n    this._node = null;\r\n  }\r\n\r\n  attributes() {\r\n    return this._attributes;\r\n  }\r\n\r\n  clone() {\r\n    return new this.constructor(this._attributes.map(attr => attr.clone()));\r\n  }\r\n\r\n  build() {\r\n    this._node = $('table', { _squalusType: this },\r\n      $('tbody',\r\n        this._attributes.map(type => type.build())\r\n      )\r\n    );\r\n    return this._node;\r\n  }\r\n\r\n  value() {\r\n    const data = {};\r\n    this._attributes.forEach((attr) => {\r\n      if (attr.required() || attr.included()) {\r\n        data[attr.name()] = attr.value();\r\n      }\r\n    });\r\n    return data;\r\n  }\r\n\r\n  populate(data) {\r\n    this._attributes.forEach(attr => {\r\n      attr.populate(data[attr.name()]);\r\n    });\r\n  }\r\n\r\n  validate(value, path, silent, context) {\r\n    // todo: filter/warn on unrecognized attributes\r\n\r\n    if (typeof value !== 'object' || value === null) {\r\n      if (silent) {\r\n        return false;\r\n      }\r\n      throw new Error(`${path} must be an object`);\r\n    }\r\n\r\n    for (let i = 0; i < this._attributes.length; i++) {\r\n      const attr = this._attributes[i];\r\n      const key = attr.name();\r\n\r\n      if (value[key] === undefined) {\r\n        if (attr.required()) {\r\n          if (silent) {\r\n            return false;\r\n          }\r\n          throw new Error(`${path}.${key} is required`);\r\n        }\r\n      } else if (!attr.validate(value[key], `${path}.${key}`, silent, context)) {\r\n        return false;\r\n      }\r\n    }\r\n\r\n    if (context._throwUnknownObjectAttributes) {\r\n      const allowedKeys = new Set(this._attributes.map(a => a.name()));\r\n      const diff = Object.keys(value).filter(x => !allowedKeys.has(x));\r\n      if (diff.length > 0) {\r\n        throw new Error(`Unknown attributes \\`${diff.join(',')}\\` not allowed in \\`${path}\\``);\r\n      }\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  clear() {\r\n    this._attributes.forEach(attr => attr.clear());\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/Type/ObjectType.js","import { default as $ } from './../Tag';\r\nimport BranchType from './BranchType';\r\n\r\nexport default class MapType {\r\n\r\n  constructor(key, type, required) {\r\n    this._type = type;\r\n    this._key = key;\r\n    this._required = required;\r\n    this._rows = [];\r\n    this._node = null;\r\n    this._body = null;\r\n  }\r\n\r\n  name() {\r\n    return `${this._type.name()}{}`;\r\n  }\r\n\r\n  clone() {\r\n    return new this.constructor(this._key.clone(), this._type.clone(), this._required ? this._required.clone() : null);\r\n  }\r\n\r\n  build() {\r\n    this._node = $('div', { _squalusType: this },\r\n      $('table',\r\n        this._body = $('tbody'),\r\n        $('tfoot',\r\n          $('th', $('input', { type: 'button', class: 'test-row-add', value: '+' })),\r\n          $('th'),\r\n          $('td')\r\n        )\r\n      )\r\n    );\r\n    if (this._required) {\r\n      this._required.attributes().forEach((attr) => {\r\n        this.add(attr.type(), attr.name());\r\n      });\r\n    }\r\n    return this._node;\r\n  }\r\n\r\n  populate(data) {\r\n    Object.keys(data).forEach((key, i) => {\r\n      const row = this.add();\r\n      this._body.children[i].firstElementChild.textContent = key;\r\n      row.populate(data[key]);\r\n    });\r\n  }\r\n\r\n  validate(value, path, silent, context) {\r\n    if (typeof value !== 'object' || value === null) {\r\n      if (silent) {\r\n        return false;\r\n      }\r\n      throw new Error(`${path} must be an object`);\r\n    }\r\n\r\n    const keys = Object.keys(value);\r\n    for (let i = 0; i < keys.length; i++) {\r\n      const key = keys[i];\r\n\r\n      if (!this._key.validate(key, `${path}[${key}]*`, silent, context)) {\r\n        return false;\r\n      }\r\n\r\n      if (!this._type.validate(value[key], `${path}[${key}]`, silent, context)) {\r\n        return false;\r\n      }\r\n    }\r\n\r\n    if (this._required) {\r\n      if (!this._type.validate(value, path, silent, context)) {\r\n        return false;\r\n      }\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  value() {\r\n    const obj = {};\r\n    this._rows.forEach((row, i) => {\r\n      const key = this._body.children[i].children[1].firstElementChild.value;\r\n      obj[key] = row.value();\r\n    });\r\n    return obj;\r\n  }\r\n\r\n  clear() {\r\n    this._rows = [];\r\n    this._body.innerHTML = '';\r\n  }\r\n\r\n  add(type, key) {\r\n    const clone = type || this._type.clone();\r\n    this._rows.push(clone);\r\n    const keyField = this._key ? this._key.build() : $('input', { type: 'text', placeholder: 'key' });\r\n    if (key) {\r\n      keyField.value = key;\r\n    }\r\n    this._body.appendChild($('tr',\r\n        $('th', $('input', { type: 'button', class: 'test-row-remove', value: '-' })),\r\n        $('th', keyField),\r\n        $('td', clone.build())\r\n      ));\r\n    BranchType.initializeSelectionStates(this._body.lastElementChild);\r\n    return clone;\r\n  }\r\n\r\n  remove(i) {\r\n    this._rows.splice(i, 1);\r\n    this._body.children[i].remove();\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/Type/MapType.js","import { default as $ } from './../../Tag';\r\nimport ScalarType from './../ScalarType';\r\nimport ValueCollection from './ValueCollection';\r\n\r\nexport default class BoolScalarType extends ScalarType {\r\n\r\n  _parse(values) {\r\n    return new ValueCollection(values.map(v => v === true || v === 'true'));\r\n  }\r\n\r\n  _build() {\r\n    return $('input', { type: 'checkbox' });\r\n  }\r\n\r\n  _validate(value) {\r\n    return typeof value === 'boolean';\r\n  }\r\n\r\n  value() {\r\n    return this._node.checked;\r\n  }\r\n\r\n  populate(data) {\r\n    this._node.checked = data;\r\n  }\r\n\r\n  clear() {\r\n    this._node.checked = false;\r\n  }\r\n\r\n  static supports() {\r\n    return ['bool'];\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/Type/Scalar/BoolScalarType.js","import ScalarType from './../ScalarType';\r\n\r\nexport default class EmailScalarType extends ScalarType {\r\n\r\n  _validate(value) {\r\n    return value && value.match(\r\n      /^(([^<>()\\[\\].,;:\\s@\"]+(\\.[^<>()\\[\\].,;:\\s@\"]+)*)|(\".+\"))@(([^<>()[\\].,;:\\s@\"]+\\.)+[^<>()[\\].,;:\\s@\"]{2,})$/i);\r\n  }\r\n\r\n  static supports() {\r\n    return ['email'];\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/Type/Scalar/EmailScalarType.js","import ScalarType from './../ScalarType';\r\n\r\nexport default class GuidScalarType extends ScalarType {\r\n\r\n  _validate(value) {\r\n    return value && value.match(/^[a-f0-9]{8}(?:-[a-f0-9]{4}){3}-[a-f0-9]{12}$/i);\r\n  }\r\n\r\n  static supports() {\r\n    return ['guid'];\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/Type/Scalar/GuidScalarType.js","import NumericScalarType from './NumericScalarType';\r\nimport IntValueCollection from './IntValueCollection';\r\n\r\nexport default class IntScalarType extends NumericScalarType {\r\n\r\n  _parse(values) {\r\n    return new IntValueCollection(values);\r\n  }\r\n\r\n  _validate(value) {\r\n    const unsigned = this._type.charAt(0) === 'u';\r\n    const positive = this._type.charAt(0) === 'p';\r\n    return typeof value === 'number' && (value | 0) === value && (!unsigned || value >= 0) && (!positive || value > 0);\r\n  }\r\n\r\n  value() {\r\n    const value = this._node.value.trim();\r\n    return value === '' ? null : parseInt(this._node.value, 10);\r\n  }\r\n\r\n  static supports() {\r\n    return ['int', 'uint', 'pint', 'long', 'ulong', 'plong'];\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/Type/Scalar/IntScalarType.js","import ScalarType from './../ScalarType';\r\nimport NumericValueCollection from './NumericValueCollection';\r\n\r\nexport default class NumericScalarType extends ScalarType {\r\n\r\n  _parse(values) {\r\n    return new NumericValueCollection(values);\r\n  }\r\n\r\n  _validate(value) {\r\n    return typeof value === 'number';\r\n  }\r\n\r\n  value() {\r\n    const value = this._node.value.trim();\r\n    return value === '' ? null : parseFloat(this._node.value);\r\n  }\r\n\r\n  static supports() {\r\n    return ['float'];\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/Type/Scalar/NumericScalarType.js","import ValueCollection from './ValueCollection';\r\n\r\nexport default class NumericValueCollection extends ValueCollection {\r\n\r\n  constructor(values) {\r\n    super([]);\r\n\r\n    this._ranges = [];\r\n    const discrete = [];\r\n\r\n    for (const value of values) {\r\n      if (value.indexOf('-') !== -1) {\r\n        const parts = value.split('-');\r\n        const start = this.parse(parts[0]);\r\n        const end = this.parse(parts[1]);\r\n\r\n        if (isNaN(start) && parts[0] !== '') {\r\n          throw new Error('invalid value range start');\r\n        }\r\n\r\n        if (isNaN(end) && parts[1] !== '') {\r\n          throw new Error('invalid value range end');\r\n        }\r\n\r\n        if (isNaN(start) && isNaN(end)) {\r\n          throw new Error('invalid range');\r\n        }\r\n\r\n        this._ranges.push([start, end]);\r\n      } else {\r\n        discrete.push(this.parse(value));\r\n      }\r\n    }\r\n\r\n    this._values = discrete;\r\n  }\r\n\r\n  parse(value) {\r\n    return parseFloat(value);\r\n  }\r\n\r\n  contains(value) {\r\n    return super.values().includes(value) ||\r\n      this._ranges.some(r => (isNaN(r[0]) || r[0] <= value) && (isNaN(r[1]) || r[1] >= value));\r\n  }\r\n\r\n  values() {\r\n    return this._ranges.length === 0 ? super.values() : null;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/Type/Scalar/NumericValueCollection.js","import NumericValueCollection from './NumericValueCollection';\r\n\r\nconst maxRangeExpansion = 100;\r\n\r\nexport default class IntValueCollection extends NumericValueCollection {\r\n\r\n  parse(value) {\r\n    return parseInt(value, 10);\r\n  }\r\n\r\n  values() {\r\n    if (this._ranges.some(x => isNaN(x[0]) || isNaN(x[1]))) {\r\n      return null;\r\n    }\r\n\r\n    const rangeSize = this._ranges.reduce((previous, current) => previous + (current[1] - current[0]), 0);\r\n\r\n    if (rangeSize + this._values.length > maxRangeExpansion) {\r\n      return null;\r\n    }\r\n\r\n    const values = this._values.slice();\r\n    this._ranges.forEach(r => {\r\n      for (let i = r[0]; i <= r[1]; i++) {\r\n        values.push(i);\r\n      }\r\n    });\r\n    return values.sort((a, b) => a - b);\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/Type/Scalar/IntValueCollection.js","import { default as $ } from './../../Tag';\r\nimport ScalarType from './../ScalarType';\r\n\r\nexport default class PasswordScalarType extends ScalarType {\r\n\r\n  _build() {\r\n    return $('input', { type: 'password', placeholder: this._type });\r\n  }\r\n\r\n  static supports() {\r\n    return ['password'];\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/Type/Scalar/PasswordScalarType.js","import 'colors';\nimport topoSort from '../TopoSort';\nimport TestError from './TestError';\nimport ValidationContext from '../ValidationContext';\n\nexport default class TestCollection {\n\n  constructor(name, options) {\n    this._name = name;\n    this._groups = null;\n    this._cancel = false;\n    this._sequential = !!((options || {}).sequential);\n    this._validationContext = new ValidationContext(\n      !!((options || {}).throwUnknownObjectAttributes)\n    );\n  }\n\n  groups(groups) {\n    this._groups = groups;\n    return this;\n  }\n\n  getMaxGroupNameLength() {\n    if (this._groups && !this._maxGroupNameLength) {\n      this._maxGroupNameLength = this._groups.reduce((a, b) => (a._name.length > b._name.length ? a : b))._name.length;\n    }\n    return this._maxGroupNameLength;\n  }\n\n  execute(initial) {\n    const startTime = Date.now();\n\n    let root = Promise.resolve();\n    const context = new Map();\n    if (initial) {\n      Object.keys(initial).forEach(k => context.set(k, initial[k]));\n    }\n\n    const testCount = this._groups.reduce((a, b) => a + b._tests.length, 0);\n\n    const options = [];\n    if (this._sequential) {\n      options.push('sequential');\n    }\n    if (this._validationContext._throwUnknownObjectAttributes) {\n      options.push('throwUnknownObjectAttributes');\n    }\n\n    console.log();\n    console.log('  collection [%s] %s', this._name.green, options.length > 0 ? `(${options.join(',')})` : '');\n    console.log();\n\n    this._groups = Array.from(topoSort(this._groups, g => g._name, g =>\n      (g._requires ? g._requires.map(r => r._name) : null)\n    ).values());\n\n    return Promise.all(this._groups.map((g, i, a) => {\n      if (this._sequential && i > 0) {\n        root = a[i - 1].execute();\n      }\n      return g.execute(context, this, root);\n    })).then(() => {\n      console.log();\n      console.log('  %s after %s',\n        `${testCount} passing`.green,\n        `${(Date.now() - startTime)} ms`.magenta\n      );\n      console.log();\n    }).catch(error => {\n      if (this._cancel) {\n        return;\n      }\n\n      this._cancel = true;\n\n      if (error instanceof TestError) {\n        error.log(context, startTime);\n      } else {\n        console.log(error);\n      }\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/Automation/TestCollection.js","module.exports = require(\"colors\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"colors\"\n// module id = 24\n// module chunks = 0","\r\nexport default class TestError {\r\n\r\n  constructor(test, group, collection, reason, response) {\r\n    this._test = test;\r\n    this._group = group;\r\n    this._collection = collection;\r\n    this._reason = reason;\r\n    this._response = response;\r\n  }\r\n\r\n  log(context) {\r\n    const info = {\r\n      collection: this._collection._name,\r\n      group: this._group._name,\r\n    };\r\n\r\n    if (this._test._name !== undefined && this._test._name !== null && this._test._name.length > 0) {\r\n      info.test = this._test._name;\r\n    } else {\r\n      info.test = `#${this._group._tests.indexOf(this._test)}`;\r\n    }\r\n\r\n    info['req-url'] = this._response.request.uri.href;\r\n    info['req-method'] = this._response.request.method.toUpperCase();\r\n\r\n    if (['post', 'put', 'patch'].includes(this._response.request.method)) {\r\n      info['req-body'] = this._response.request.body;\r\n    }\r\n\r\n    if (this._response.statusCode >= 200 && ![204, 205].includes(this._response.statusCode)) {\r\n      // the response MAY include an entity\r\n      const responseContentType = (this._response.headers['content-type'] || '')\r\n        .split(';')[0].toLowerCase().trim();\r\n      // technically, the content-type header is only a SHOULD, rather than a MUST for entity responses,\r\n      // but I don't care enough to sniff the response to determine the media type\r\n      if (responseContentType) {\r\n        let responseBody = this._response.body;\r\n        let responseNote = null;\r\n\r\n        if (responseContentType === 'text/html') {\r\n          if (this._response.statusCode === 500 && /<span><H1>Server Error in/i.test(responseBody)) {\r\n            responseNote = 'including only error trace from ASP.NET YSOD response';\r\n            responseBody = responseBody.replace(/^[\\s\\S]*<!--([\\s\\S]*)-->\\s*$/, '$1');\r\n          }\r\n        } else if (responseContentType === 'application/json') {\r\n          responseBody = JSON.stringify(JSON.parse(responseBody), null, 4);\r\n        }\r\n\r\n        if (this._test._type) {\r\n          info['res-squalus-type'] = this._test._type;\r\n        }\r\n\r\n        info['res-content-type'] = responseContentType;\r\n        info['res-body'] = `${(responseNote ? `(${responseNote})` : '')}\\n${responseBody}`;\r\n      }\r\n    }\r\n\r\n    info.context = JSON.stringify(Array.from(context.keys()).reduce((a, b) =>\r\n      Object.assign(a, { [`${b}`]: context.get(b) }), {}), null, 4);\r\n\r\n    if (this._reason instanceof Error) {\r\n      info.error = this._reason.stack;\r\n    } else {\r\n      info.reason = this._reason;\r\n    }\r\n\r\n    const maxInfoNameLength = Object.keys(info).reduce((a, b) => (Math.max(a, b.length)), 0);\r\n\r\n    console.log();\r\n    console.log('  failed'.red);\r\n    console.log();\r\n    Object.keys(info).forEach(k => {\r\n      const infoVal = info[k] || '';\r\n      console.log('    %s%s : %s',\r\n        k.yellow,\r\n        infoVal.indexOf('\\n') === -1\r\n          ? ' '.repeat(maxInfoNameLength - k.length)\r\n          : '',\r\n        infoVal.replace(/\\n/g, `\\n${' '.repeat(4 + 4)}`)\r\n      );\r\n    });\r\n    console.log();\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/Automation/TestError.js","\nexport default class ValidationContext {\n\n  constructor(throwUnknownObjectAttributes) {\n    this._throwUnknownObjectAttributes = !!throwUnknownObjectAttributes;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ValidationContext.js","\nexport default class TestGroup {\n\n  constructor(name) {\n    this._name = name;\n    this._requires = null;\n    this._parallel = false;\n    this._session = null;\n    this._tests = null;\n    this._promise = null;\n  }\n\n  requires(groups) {\n    this._requires = Array.isArray(groups) ? groups : [groups];\n    return this;\n  }\n\n  parallel() {\n    this._parallel = true;\n    return this;\n  }\n\n  session(name) {\n    this._session = name;\n    return this;\n  }\n\n  tests(tests) {\n    this._tests = tests;\n    return this;\n  }\n\n  execute(context, collection, root) {\n    if (!this._promise) {\n      if (!collection || !root) {\n        throw new Error('uninitialized promise');\n      }\n\n      let when = root;\n      if (this._requires) {\n        when = Promise.all(this._requires.map(g => g.execute(root, context)).concat([root]));\n      }\n      this._promise = new Promise((resolve, reject) => {\n        if (this._parallel && !collection._sequential) {\n          when.then(() => {\n            Promise.all(this._tests.map(t => t.execute(context, this, collection))).then(resolve, reject);\n          });\n        } else {\n          const tests = this._tests.slice().reverse();\n\n          const onResolve = () => {\n            if (tests.length) {\n              tests.pop().execute(context, this, collection).then(onResolve, reject);\n            } else {\n              resolve();\n            }\n          };\n\n          when.then(onResolve, reject);\n        }\n      });\n    }\n    return this._promise;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/Automation/TestGroup.js","import Squalus from '../Squalus';\nimport FormData from 'form-data';\nimport rp from 'request-promise';\nimport 'colors';\nimport TestError from './TestError';\n\nfunction padRight(str, width, char = ' ') {\n  if (str.length < width) {\n    return str + char.repeat(width - str.length);\n  }\n  return str;\n}\n\nconst STRIP_COMMENTS = /((\\/\\/.*$)|(\\/\\*[\\s\\S]*?\\*\\/))/mg;\nconst ARGUMENT_NAMES = /([^\\s,]+)/g;\nfunction getParamNames(func) {\n  const fnStr = func.toString().replace(STRIP_COMMENTS, '');\n  let result = fnStr.slice(fnStr.indexOf('(') + 1, fnStr.indexOf(')')).match(ARGUMENT_NAMES);\n  if (result === null) {\n    result = [];\n  }\n  return result;\n}\n\nfunction callFuncWithParamInjection(func, response, body, context) {\n  const sourceParams = new Map();\n  sourceParams.set('response', response);\n  sourceParams.set('body', body);\n  sourceParams.set('context', context);\n  const maps = [sourceParams];\n  Array.from(sourceParams.values()).filter(p => p instanceof Map).forEach(map => maps.push(map));\n\n  return func.apply(null, getParamNames(func).map(name => {\n    const map = maps.find(m => m.has(name));\n    if (map) {\n      return map.get(name);\n    }\n    return undefined;\n  }));\n}\n\nexport default class Test {\n\n  constructor(name) {\n    this._name = name;\n    this._method = null;\n    this._url = null;\n    this._contentType = null;\n    this._responseContentType = null;\n    this._body = null;\n    this._status = null;\n    this._type = null;\n    this._save = null;\n    this._expect = null;\n    this._promise = null;\n  }\n\n  execute(context, group, collection) {\n    if (!this._promise) {\n      let url = this._url;\n      if (typeof url === 'function') {\n        url = url(context);\n      }\n\n      const populateVariables = (m, name) => (context.has(name) ? context.get(name) : m);\n\n      url = url.replace(/[@:]([a-z0-9_]+)/gi, populateVariables);\n      url = url.replace(/{([a-z0-9_]+)}/gi, populateVariables);\n\n      const absUrl = context.get('baseUrl') + url;\n\n      let body = this._body;\n      if (typeof body === 'function') {\n        body = body(context);\n      }\n\n      const reject = (reason, response) =>\n        Promise.reject(new TestError(this, group, collection, reason, response));\n\n      const status = (response) => {\n        if (!this._status || typeof this._status !== 'number') {\n          return reject('invalid response status', response);\n        }\n        if (response.statusCode !== this._status) {\n          return reject(`response status ${response.statusCode} does not match expected ${this._status}`, response);\n        }\n        if (this._responseContentType) {\n          const contentType = (response.headers['content-type'] || '').split(';', 2)[0];\n          if (contentType !== this._responseContentType) {\n            return reject(`response content type ${contentType} does not match expected ${this._responseContentType}`,\n              response);\n          }\n        }\n        return Promise.resolve(response);\n      };\n\n      const type = (response) => {\n        if (this._type) {\n          const responseType = Squalus.getType(this._type);\n          if (!responseType) {\n            return reject(`failed to create response type ${this._type}`, response);\n          }\n          try {\n            const json = JSON.parse(response.body);\n            response.bodyJson = json;// eslint-disable-line no-param-reassign\n            responseType.validate(json, 'body', false, collection._validationContext);\n          } catch (e) {\n            return reject(e, response);\n          }\n          return Promise.resolve(response);\n        }\n        return Promise.resolve(response);\n      };\n\n      const expect = (response) => {\n        if (this._expect) {\n          return Promise.all(this._expect.map((func, i) =>\n            Promise.resolve(callFuncWithParamInjection(\n              func,\n              response,\n              response.bodyJson !== undefined ? response.bodyJson : response.body,\n              context\n            )).then(passed => {\n              if (!passed) {\n                return reject(`expect test '${i}' failed`, response);\n              }\n              return Promise.resolve(response);\n            })\n          )).then(() => Promise.resolve(response));\n        }\n        return Promise.resolve(response);\n      };\n\n      const save = (response) => {\n        if (this._save) {\n          return Promise.all(Array.from(this._save.keys()).map(key =>\n            Promise.resolve(\n              callFuncWithParamInjection(\n                this._save.get(key),\n                response,\n                response.bodyJson !== undefined ? response.bodyJson : response.body,\n                context\n              )\n            ).then(v => {\n              if (context.has(key)) {\n                throw new Error(`The context already contains key '${key}'`);\n              }\n              context.set(key, v);\n              // console.log(`  [${key}] = ${v}`);\n            })\n          )).then(() => Promise.resolve(response));\n        }\n        return Promise.resolve(response);\n      };\n\n      const options = {\n        uri: absUrl,\n        method: this._method,\n        headers: {\n          'Content-Type': this._contentType || 'application/json',\n        },\n        resolveWithFullResponse: true,\n        simple: false,\n      };\n\n      const sessionCookie = context.get(`http_cookie__${group._session}`);\n      if (sessionCookie) {\n        options.headers.Cookie = sessionCookie;\n      }\n\n      const sessionAuthorization = context.get(`http_authorization__${group._session}`);\n      if (sessionAuthorization) {\n        options.headers.Authorization = sessionAuthorization;\n      }\n\n      if (this._contentType === 'application/x-www-form-urlencoded') {\n        options.form = body;\n      } else if (this._contentType === 'multipart/form-data') {\n        options.formData = body;\n      } else {\n        options.body = body;\n      }\n\n      this._promise = rp(options)\n        .then(res => status(res))\n        .then(res => type(res))\n        .then(res => expect(res))\n        .then(res => save(res))\n        .then(() => {\n          if (collection._cancel) {\n            return Promise.reject();\n          }\n          console.log('    %s %s %s %s',\n            padRight(group._name, collection.getMaxGroupNameLength()).gray,\n            padRight(this._method.toUpperCase(), 6).magenta,\n            url,\n            this._name.cyan\n          );\n          return Promise.resolve();\n        });\n    }\n    return this._promise;\n  }\n\n  get(url) {\n    this._method = 'get';\n    this._url = url;\n    this._status = this._status || 200;\n    return this;\n  }\n\n  post(url) {\n    this._method = 'post';\n    this._url = url;\n    this._status = this._status || 200;\n    return this;\n  }\n\n  put(url) {\n    this._method = 'put';\n    this._url = url;\n    this._status = this._status || 204;\n    return this;\n  }\n\n  delete(url) {\n    this._method = 'delete';\n    this._url = url;\n    this._status = this._status || 204;\n    return this;\n  }\n\n  json(data) {\n    this._contentType = 'application/json';\n    if (typeof data === 'function') {\n      this._body = context => JSON.stringify(data(context));\n    } else {\n      this._body = JSON.stringify(data);\n    }\n    return this;\n  }\n\n  form(data) {\n    this._contentType = 'application/x-www-form-urlencoded';\n    this._body = data;\n    return this;\n  }\n\n  formData(data) {\n    this._contentType = 'multipart/form-data';\n    const form = new FormData();\n    Object.keys(data).forEach(key => form.append(key, data[key]));\n    this._body = form;\n    return this;\n  }\n\n  save(name, func) {\n    if (!this._save) {\n      this._save = new Map();\n    }\n    this._save.set(name, func);\n    return this;\n  }\n\n  saveCookie(name, func) {\n    return this.save(`http_cookie__${name}`, func);\n  }\n\n  saveAuthorization(name, func) {\n    return this.save(`http_authorization__${name}`, func);\n  }\n\n  expect(type) {\n    if (typeof type === 'function') {\n      if (!this._expect) {\n        this._expect = [];\n      }\n      this._expect.push(type);\n    } else if (typeof type === 'number') {\n      this._status = type;\n    } else if (type.indexOf('/') !== -1) {\n      this._responseContentType = type;\n    } else {\n      this._type = type;\n    }\n    return this;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/Automation/Test.js","module.exports = require(\"form-data\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"form-data\"\n// module id = 29\n// module chunks = 0","module.exports = require(\"request-promise\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"request-promise\"\n// module id = 30\n// module chunks = 0","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 31\n// module chunks = 0","module.exports = require(\"fs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs\"\n// module id = 32\n// module chunks = 0","module.exports = require(\"js-yaml\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"js-yaml\"\n// module id = 33\n// module chunks = 0"],"sourceRoot":""}